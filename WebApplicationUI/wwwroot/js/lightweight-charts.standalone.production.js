/*!
 * @license
 * TradingView Lightweight Charts v3.8.0-dev+202409131107
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
!function(){"use strict";var t,i,n,s=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.addScaled=function(i,n){return new t(this.x+n*i.x,this.y+n*i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},t.prototype.crossProduct=function(t){return this.x*t.y-this.y*t.x},t.prototype.signedAngle=function(t){return Math.atan2(this.crossProduct(t),this.dotProduct(t))},t.prototype.angle=function(t){return Math.acos(this.dotProduct(t)/(this.length()*t.length()))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.scaled=function(i){return new t(this.x*i,this.y*i)},t.prototype.normalized=function(){return this.scaled(1/this.length())},t.prototype.transposed=function(){return new t(-this.y,this.x)},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),h=function(t,i){this.t=new s(Math.min(t.x,i.x),Math.min(t.y,i.y)),this.i=new s(Math.max(t.x,i.x),Math.max(t.y,i.y))},r=function(t,i){this.h=t,this.u=i};function e(t,i){return t.x===i.x&&t.y===i.y}function u(t,i){if(e(t,i))throw new Error("Points should be distinct");return function(t,i,n){return{o:t,l:i,v:n}}(t.y-i.y,i.x-t.x,t.x*i.y-i.x*t.y)}function o(t,i){if(e(t,i))throw new Error("Points of a segment should be distinct");return[t,i]}function l(t,i){var n=i.h;return n.o*t.x+n.l*t.y+n.v>0===i.u}function a(t,i){for(var n=0;n<t.length;n++)if(e(t[n],i))return!1;return t.push(i),!0}function f(t,i,n){var h=c(t,i,n.t,new s(n.i.x,n.t.y)),r=c(t,i,new s(n.i.x,n.t.y),n.i),e=c(t,i,n.i,new s(n.t.x,n.i.y)),u=c(t,i,new s(n.t.x,n.i.y),n.t),o=[];if(null!==h&&h>=0&&o.push(h),null!==r&&r>=0&&o.push(r),null!==e&&e>=0&&o.push(e),null!==u&&u>=0&&o.push(u),0===o.length)return null;o.sort((function(t,i){return t-i}));var l=_(t,n)?o[0]:o[o.length-1];return t.addScaled(i.subtract(t),l)}function c(t,i,n,s){var h=function(t,i,n,s){var h=i.subtract(t),r=s.subtract(n),e=h.x*r.y-h.y*r.x;if(Math.abs(e)<1e-6)return null;var u=t.subtract(n);return(u.y*r.x-u.x*r.y)/e}(t,i,n,s);if(null===h)return null;var r=d(n,s,i.subtract(t).scaled(h).add(t));return Math.abs(r._)<1e-6?h:null}function v(t,i,n){var s=i.subtract(t),h=n.subtract(t).dotProduct(s)/s.dotProduct(s);return{M:h,_:t.addScaled(s,h).subtract(n).length()}}function d(t,i,n){var s=v(t,i,n);if(0<=s.M&&s.M<=1)return s;var h=t.subtract(n).length(),r=i.subtract(n).length();return h<r?{M:0,_:h}:{M:1,_:r}}function _(t,i){return t.x>=i.t.x&&t.x<=i.i.x&&t.y>=i.t.y&&t.y<=i.i.y}function w(t,i){for(var n=t.x,s=t.y,h=!1,r=i.length-1,e=0;e<i.length;e++){var u=i[e],o=i[r];r=e,(u.y<s&&o.y>=s||o.y<s&&u.y>=s)&&u.x+(s-u.y)/(o.y-u.y)*(o.x-u.x)<n&&(h=!h)}return h}function M(t,i){var n=t.o*i.l-i.o*t.l;if(Math.abs(n)<1e-6)return null;var h=(t.l*i.v-i.l*t.v)/n,r=(i.o*t.v-t.o*i.v)/n;return new s(h,r)}function b(t,i){return!(t.length<=0||!e(t[t.length-1],i)||!e(t[0],i))||(t.push(i),!1)}function m(t){return[[t.lineWidth,t.lineWidth],[2*t.lineWidth,2*t.lineWidth],[6*t.lineWidth,6*t.lineWidth],[t.lineWidth,4*t.lineWidth],[2*t.lineWidth,t.lineWidth]][t.lineStyle-1]||[]}function p(t){var i=1;switch(t){case 1:i=3.5;break;case 2:i=2;break;case 3:i=1.5;break;case 4:i=1.25}return i}function g(t,i){t.lineStyle=i,y(t,m(t))}function y(t,i){t.setLineDash?t.setLineDash(i):void 0!==t.mozDash?t.mozDash=i:void 0!==t.webkitLineDash&&(t.webkitLineDash=i)}function k(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(n,i+h),t.lineTo(s,i+h),t.stroke()}function x(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(i+h,n),t.lineTo(i+h,s),t.stroke()}function C(t,i,n,s,h){isFinite(i)&&isFinite(n)&&isFinite(s)&&isFinite(h)&&(0!==t.lineStyle?function(t,i,n,s,h){t.save(),t.beginPath(),y(t,m(t)),t.moveTo(i,n),t.lineTo(s,h),t.stroke(),t.restore()}(t,i,n,s,h):function(t,i,n,s,h){t.beginPath(),t.moveTo(i,n),t.lineTo(s,h),t.stroke()}(t,i,n,s,h))}function N(t,i,n,r,l,c){if(e(t,i))return null;var v=new s(0,0),d=new s(n,r);if(l){if(c){var _=function(t,i){if(0===t.o){var n=-t.v/t.l;return i.t.y<=n&&n<=i.i.y?o(new s(i.t.x,n),new s(i.i.x,n)):null}if(0===t.l){var h=-t.v/t.o;return i.t.x<=h&&h<=i.i.x?o(new s(h,i.t.y),new s(h,i.i.y)):null}var r=[],u=function(n){var h=-(t.v+t.o*n)/t.l;i.t.y<=h&&h<=i.i.y&&a(r,new s(n,h))},l=function(n){var h=-(t.v+t.l*n)/t.o;i.t.x<=h&&h<=i.i.x&&a(r,new s(h,n))};switch(u(i.t.x),l(i.t.y),u(i.i.x),l(i.i.y),r.length){case 0:return null;case 1:return r[0];case 2:return e(r[0],r[1])?r[0]:o(r[0],r[1])}throw new Error("We should have at most two intersection points")}(u(t,i),new h(v,d));return Array.isArray(_)?_:null}var w;return null===(w=f(i,t,new h(v,d)))||e(i,w)?null:o(i,w)}if(c)return null===(w=f(t,i,new h(v,d)))||e(t,w)?null:o(t,w);_=function(t,i){var n=t[0].x,h=t[0].y,r=t[1].x,u=t[1].y,l=i.t.x,a=i.t.y,f=i.i.x,c=i.i.y;function v(t,i,n,s,h,r){var e=0;return t<n?e|=1:t>h&&(e|=2),i<s?e|=4:i>r&&(e|=8),e}for(var d=!1,_=v(n,h,l,a,f,c),w=v(r,u,l,a,f,c),M=0;;){if(M>1e3)throw new Error("Cohen - Sutherland algorithm: infinity loop");if(M++,!(_|w)){d=!0;break}if(_&w)break;var b=_||w,m=void 0,p=void 0;8&b?(m=n+(r-n)*(c-h)/(u-h),p=c):4&b?(m=n+(r-n)*(a-h)/(u-h),p=a):2&b?(p=h+(u-h)*(f-n)/(r-n),m=f):(p=h+(u-h)*(l-n)/(r-n),m=l),b===_?_=v(n=m,h=p,l,a,f,c):w=v(r=m,u=p,l,a,f,c)}return d?e(new s(n,h),new s(r,u))?new s(n,h):o(new s(n,h),new s(r,u)):null}(o(t,i),new h(v,d));return Array.isArray(_)?_:null}function S(t,i,n,s){var h=p(n);i.save(),i.fillStyle="#000000",i.beginPath(),i.arc(t.x*s,t.y*s,n*h*s,0,2*Math.PI,!1),i.fill(),i.restore()}function T(t,i,n,s,h){if(!(i.subtract(t).length()<1))for(var r=function(t,i,n){var s=.5*n,h=Math.sqrt(2),r=i.subtract(t),e=r.normalized(),u=p(n),o=5*n*u,l=1*s;if(o*h*.2<=l)return[];var a=e.scaled(o),f=i.subtract(a),c=e.transposed(),v=1*o,d=c.scaled(v),_=f.add(d),w=f.subtract(d),M=_.subtract(i).normalized().scaled(l),b=w.subtract(i).normalized().scaled(l),m=i.add(M),g=i.add(b),y=s*(h-1),k=c.scaled(y),x=Math.min(o-1*s/h,s*h*1),C=e.scaled(x),N=i.subtract(k),S=i.add(k),T=i.subtract(C);return[[_,m],[w,g],[N,T.subtract(k)],[S,T.add(k)]]}(t,i,s),e=0;e<r.length;++e){var u=r[e][0],o=r[e][1];C(n,u.x*h,u.y*h,o.x*h,o.y*h)}}function F(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function L(t){if(void 0===t)throw new Error("Value is undefined");return t}function E(t){if(null===t)throw new Error("Value is null");return t}function A(t){return E(L(t))}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(t||(t={})),function(t){t[t.Normal=0]="Normal",t[t.Arrow=1]="Arrow",t[t.Circle=2]="Circle"}(i||(i={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted",t[t.SmallDashed=5]="SmallDashed"}(n||(n={}));var B={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function D(t){return t<0?0:t>255?255:Math.round(t)||0}function P(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var O=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,R=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,z=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,V=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function W(t){var i;if((t=t.toLowerCase())in B&&(t=B[t]),i=V.exec(t)||z.exec(t))return[D(parseInt(i[1],10)),D(parseInt(i[2],10)),D(parseInt(i[3],10)),P(i.length<5?1:parseFloat(i[4]))];if(i=R.exec(t))return[D(parseInt(i[1],16)),D(parseInt(i[2],16)),D(parseInt(i[3],16)),1];if(i=O.exec(t))return[D(17*parseInt(i[1],16)),D(17*parseInt(i[2],16)),D(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function I(t,i){if("transparent"===t)return t;var n=W(t),s=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(i*s,")")}function j(t){var i,n=W(t);return{m:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),p:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var H=function(t,i){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},H(t,i)};function q(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}H(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var U=function(){return U=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},U.apply(this,arguments)};function Y(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))}var J=function(){function t(){this.k=[]}return t.prototype.C=function(t,i,n){var s={N:t,S:i,T:!0===n};this.k.push(s)},t.prototype.F=function(t){var i=this.k.findIndex((function(i){return t===i.N}));i>-1&&this.k.splice(i,1)},t.prototype.L=function(t){this.k=this.k.filter((function(i){return i.S!==t}))},t.prototype.A=function(t,i){var n=Y([],this.k,!0);this.k=this.k.filter((function(t){return!t.T})),n.forEach((function(n){return n.N(t,i)}))},t.prototype.B=function(){return this.k.length>0},t.prototype.D=function(){this.k=[]},t}();function $(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var s=0,h=i;s<h.length;s++){var r=h[s];for(var e in r)void 0!==r[e]&&("object"!=typeof r[e]||void 0===t[e]?t[e]=r[e]:$(t[e],r[e]))}return t}function K(t){return"number"==typeof t&&isFinite(t)}function X(t){return"number"==typeof t&&t%1==0}function Z(t){return"string"==typeof t}function G(t){return"boolean"==typeof t}function Q(t){var i,n,s,h=t;if(!h||"object"!=typeof h)return h;for(n in i=Array.isArray(h)?[]:{},h)h.hasOwnProperty(n)&&(s=h[n],i[n]=s&&"object"==typeof s?Q(s):s);return i}function tt(t){return null!==t}function it(t){return null===t?void 0:t}var nt="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function st(t,i,n){return n=void 0!==n?"".concat(n," "):"",void 0===i&&(i=nt),"".concat(n).concat(t,"px ").concat(i)}var ht=function(){function t(t){this.P={O:1,R:4,V:NaN,W:"",I:"",j:"",H:0,q:0,U:0,Y:0,J:0},this.$=t}return t.prototype.K=function(){var t=this.P,i=this.X(),n=this.Z();return t.V===i&&t.I===n||(t.V=i,t.I=n,t.W=st(i,n),t.Y=Math.floor(i/3.5),t.H=t.Y,t.q=Math.max(Math.ceil(i/2-t.R/2),0),t.U=Math.ceil(i/2+t.R/2),t.J=Math.round(i/10)),t.j=this.G(),this.P},t.prototype.G=function(){return this.$.K().layout.textColor},t.prototype.X=function(){return this.$.K().layout.fontSize},t.prototype.Z=function(){return this.$.K().layout.fontFamily},t}(),rt=function(){function t(){this.tt=[],this.it=1}return t.prototype.nt=function(t){this.it=t},t.prototype.st=function(t){this.tt.push(t)},t.prototype.ht=function(t,i){this.tt.splice(i,0,t)},t.prototype.rt=function(){this.tt.length=0},t.prototype.et=function(){return 0===this.tt.length},t.prototype.ut=function(t){this.tt=t},t.prototype.ot=function(t,i,n,s){var h=this;this.tt.forEach((function(r){t.save(),t.globalAlpha=h.it,r.ot(t,i,n,s),t.restore()}))},t.prototype.lt=function(t,i,n){for(var s=null,h=this.tt.length-1;h>=0;h--){var r=this.tt[h];if(r.lt&&(s=r.lt(t,i,n)||null),s)break}return s},t}(),et=function(){function t(){}return t.prototype.ot=function(t,i,n,s){t.save(),t.scale(i,i),this.ft(t,n,s),t.restore()},t.prototype.ct=function(t,i,n,s){t.save(),t.scale(i,i),this.vt(t,n,s),t.restore()},t.prototype.vt=function(t,i,n){},t}(),ut=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.dt=null,i}return q(i,t),i.prototype._t=function(t){this.dt=t},i.prototype.ft=function(t){if(null!==this.dt&&null!==this.dt.wt){var i=this.dt.wt,n=this.dt,s=function(s){t.beginPath();for(var h=i.to-1;h>=i.from;--h){var r=n.Mt[h];t.moveTo(r.bt,r.gt),t.arc(r.bt,r.gt,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.yt,s(n.kt+2),t.fillStyle=n.xt,s(n.kt)}},i}(et);function ot(){return{Mt:[{bt:0,gt:0,Ct:0,Nt:0}],xt:"",yt:"",kt:0,wt:null}}var lt={from:0,to:1},at=function(){function t(t,i){this.St=new rt,this.Tt=[],this.Ft=[],this.Lt=!0,this.$=t,this.Et=i,this.St.ut(this.Tt)}return t.prototype.At=function(t){var i=this.$.Bt();i.length!==this.Tt.length&&(this.Ft=i.map(ot),this.Tt=this.Ft.map((function(t){var i=new ut;return i._t(t),i})),this.St.ut(this.Tt)),this.Lt=!0},t.prototype.Dt=function(t,i,n){return this.Lt&&(this.Pt(t),this.Lt=!1),this.St},t.prototype.Pt=function(t){var i=this,n=this.$.Bt(),s=this.Et.Ot(),h=this.$.Rt();n.forEach((function(n,r){var e,u=i.Ft[r],o=n.zt(s);if(null!==o&&n.Vt()){var l=E(n.Wt());u.xt=o.It,u.kt=o.kt,u.Mt[0].Nt=o.Nt,u.Mt[0].gt=n.Ht().jt(o.Nt,l.qt),u.yt=null!==(e=o.Ut)&&void 0!==e?e:i.$.Yt(u.Mt[0].gt/t),u.Mt[0].Ct=s,u.Mt[0].bt=h.Jt(s),u.wt=lt}else u.wt=null}))},t}(),ft=function(){function t(t){this.$t=t}return t.prototype.ot=function(t,i,n,s){if(null!==this.$t){var h=this.$t.Kt.Vt,r=this.$t.Xt.Vt;if(h||r){t.save();var e=Math.round(this.$t.bt*i),u=Math.round(this.$t.gt*i),o=Math.ceil(this.$t.Zt*i),l=Math.ceil(this.$t.Gt*i);t.lineCap="butt",h&&e>=0&&(t.lineWidth=Math.floor(this.$t.Kt.Qt*i),t.strokeStyle=this.$t.Kt.j,t.fillStyle=this.$t.Kt.j,g(t,this.$t.Kt.ti),x(t,e,0,l)),r&&u>=0&&(t.lineWidth=Math.floor(this.$t.Xt.Qt*i),t.strokeStyle=this.$t.Xt.j,t.fillStyle=this.$t.Xt.j,g(t,this.$t.Xt.ti),k(t,u,0,o)),t.restore()}}},t}(),ct=function(){function t(t){this.Lt=!0,this.ii={Kt:{Qt:1,ti:0,j:"",Vt:!1},Xt:{Qt:1,ti:0,j:"",Vt:!1},Zt:0,Gt:0,bt:0,gt:0},this.ni=new ft(this.ii),this.si=t}return t.prototype.At=function(){this.Lt=!0},t.prototype.Dt=function(t,i){return this.Lt&&(this.Pt(),this.Lt=!1),this.ni},t.prototype.Pt=function(){var t=this.si.Vt(),i=E(this.si.hi()),n=i.ri().K().crosshair,s=this.ii;s.Xt.Vt=t&&this.si.ei(i),s.Kt.Vt=t&&this.si.ui(),s.Xt.Qt=n.horzLine.width,s.Xt.ti=n.horzLine.style,s.Xt.j=n.horzLine.color,s.Kt.Qt=n.vertLine.width,s.Kt.ti=n.vertLine.style,s.Kt.j=n.vertLine.color,s.Zt=i.oi(),s.Gt=i.li(),s.bt=this.si.ai(),s.gt=this.si.fi()},t}();function vt(t,i,n,s,h,r){t.fillRect(i+r,n,s-2*r,r),t.fillRect(i+r,n+h-r,s-2*r,r),t.fillRect(i,n,r,h),t.fillRect(i+s-r,n,r,h)}function dt(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function _t(t,i,n,s,h,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,s,h),t.restore()}function wt(t,i,n,s,h,r,e){t.save(),t.globalCompositeOperation="copy";var u=t.createLinearGradient(0,0,0,h);u.addColorStop(0,r),u.addColorStop(1,e),t.fillStyle=u,t.fillRect(i,n,s,h),t.restore()}var Mt=function(){function t(t,i){this._t(t,i)}return t.prototype._t=function(t,i){this.$t=t,this.ci=i},t.prototype.ot=function(t,i,n,s,h,r){if(this.$t.Vt){t.font=i.W;var e=this.$t.di||!this.$t._i?i.R:0,u=i.O,o=i.Y,l=i.H,a=i.q,f=i.U,c=this.$t.wi,v=Math.ceil(n.Mi(t,c)),d=i.J,_=i.V+o+l,w=Math.ceil(.5*_),M=u+v+a+f+e,b=this.ci.bi;this.ci.mi&&(b=this.ci.mi);var m,p,g=(b=Math.round(b))-w,y=g+_,k="right"===h,x=k?s:0,C=Math.ceil(s*r),N=x;if(t.fillStyle=this.ci.m,t.lineWidth=1,t.lineCap="butt",c){k?(m=x-e,p=(N=x-M)+f):(N=x+M,m=x+e,p=x+u+e+a);var S=Math.max(1,Math.floor(r)),T=Math.max(1,Math.floor(u*r)),F=k?C:0,L=Math.round(g*r),E=Math.round(N*r),A=Math.round(b*r)-Math.floor(.5*r),B=A+S+(A-L),D=Math.round(m*r);t.save(),t.beginPath(),t.moveTo(F,L),t.lineTo(E,L),t.lineTo(E,B),t.lineTo(F,B),t.fill(),t.fillStyle=this.$t.Ut,t.fillRect(k?C-T:0,L,T,B-L),this.$t.di&&(t.fillStyle=this.ci.j,t.fillRect(F,A,D-F,S)),t.textAlign="left",t.fillStyle=this.ci.j,dt(t,r,(function(){t.fillText(c,p,y-l-d)})),t.restore()}}},t.prototype.li=function(t,i){return this.$t.Vt?t.V+t.Y+t.H:0},t}(),bt=function(){function t(t){this.pi={bi:0,j:"#FFF",m:"#000"},this.gi={wi:"",Vt:!1,di:!0,_i:!1,Ut:""},this.yi={wi:"",Vt:!1,di:!1,_i:!0,Ut:""},this.Lt=!0,this.ki=new(t||Mt)(this.gi,this.pi),this.xi=new(t||Mt)(this.yi,this.pi)}return t.prototype.wi=function(){return this.Ci(),this.gi.wi},t.prototype.bi=function(){return this.Ci(),this.pi.bi},t.prototype.At=function(){this.Lt=!0},t.prototype.li=function(t,i){return void 0===i&&(i=!1),Math.max(this.ki.li(t,i),this.xi.li(t,i))},t.prototype.Ni=function(){return this.pi.mi||0},t.prototype.Si=function(t){this.pi.mi=t},t.prototype.Ti=function(){return this.Ci(),this.gi.Vt||this.yi.Vt},t.prototype.Fi=function(){return this.Ci(),this.gi.Vt},t.prototype.Dt=function(t){return this.Ci(),this.gi.di=this.gi.di&&t.K().drawTicks,this.yi.di=this.yi.di&&t.K().drawTicks,this.ki._t(this.gi,this.pi),this.xi._t(this.yi,this.pi),this.ki},t.prototype.Li=function(){return this.Ci(),this.ki._t(this.gi,this.pi),this.xi._t(this.yi,this.pi),this.xi},t.prototype.Ci=function(){this.Lt&&(this.gi.di=!0,this.yi.di=!1,this.Ei(this.gi,this.yi,this.pi))},t}(),mt=function(t){function i(i,n,s){var h=t.call(this)||this;return h.si=i,h.Ai=n,h.Bi=s,h}return q(i,t),i.prototype.Ei=function(t,i,n){t.Vt=!1;var s=this.si.K().horzLine;if(s.labelVisible){var h=this.Ai.Wt();if(this.si.Vt()&&!this.Ai.et()&&null!==h){var r=j(s.labelBackgroundColor);n.m=r.m,n.j=r.p;var e=this.Bi(this.Ai);n.bi=e.bi,t.wi=this.Ai.Di(e.Nt,h),t.Vt=!0}}},i}(bt),pt=/[1-9]/g,gt=function(){function t(){this.$t=null}return t.prototype._t=function(t){this.$t=t},t.prototype.ot=function(t,i,n){var s=this;if(null!==this.$t&&!1!==this.$t.Vt&&0!==this.$t.wi.length){t.font=i.W;var h=Math.round(i.Pi.Mi(t,this.$t.wi,pt));if(!(h<=0)){t.save();var r=i.Oi,e=h+2*r,u=e/2,o=this.$t.oi,l=this.$t.bi,a=Math.floor(l-u)+.5;a<0?(l+=Math.abs(0-a),a=Math.floor(l-u)+.5):a+e>o&&(l-=Math.abs(o-(a+e)),a=Math.floor(l-u)+.5);var f=a+e,c=0+i.O+i.Y+i.V+i.H;t.fillStyle=this.$t.m;var v=Math.round(a*n),d=Math.round(0*n),_=Math.round(f*n),w=Math.round(c*n);t.fillRect(v,d,_-v,w-d);var M=Math.round(this.$t.bi*n),b=d,m=Math.round((b+i.O+i.R)*n);t.fillStyle=this.$t.j;var p=Math.max(1,Math.floor(n)),g=Math.floor(.5*n);t.fillRect(M-g,b,p,m-b);var y=c-i.J-i.H;t.textAlign="left",t.fillStyle=this.$t.j,dt(t,n,(function(){t.fillText(E(s.$t).wi,a+r,y)})),t.restore()}}},t}(),yt=function(){function t(t,i,n){this.Lt=!0,this.ni=new gt,this.ii={Vt:!1,m:"#4c525e",j:"white",wi:"",oi:0,bi:NaN},this.Et=t,this.Ri=i,this.Bi=n}return t.prototype.At=function(){this.Lt=!0},t.prototype.Dt=function(){return this.Lt&&(this.Pt(),this.Lt=!1),this.ni._t(this.ii),this.ni},t.prototype.Pt=function(){var t=this.ii;t.Vt=!1;var i=this.Et.K().vertLine;if(i.labelVisible){var n=this.Ri.Rt();if(!n.et()){var s=n.zi(this.Et.Ot());t.oi=n.oi();var h=this.Bi();t.bi=h.bi,t.bi=n.Vi(E(s)),t.wi=n.Wi(E(s)),t.Vt=!0;var r=j(i.labelBackgroundColor);t.m=r.m,t.j=r.p}}},t}(),kt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var xt,Ct=function(){function t(){this.Ii=null,this.ji=function(t){for(var i="",n=0;n<t;++n){var s=Math.floor(62*Math.random());i+=kt[s]}return i}(6),this.Hi=0}return t.prototype.qi=function(){return this.ji},t.prototype.Ui=function(t){this.ji=t},t.prototype.Yi=function(){return this.Hi},t.prototype.Ji=function(t){this.Hi=t},t.prototype.Ht=function(){return this.Ii},t.prototype.$i=function(t){this.Ii=t},t.prototype.Ki=function(){return[]},t.prototype.Vt=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(xt||(xt={}));var Nt=function(t){function i(i,n){var s=t.call(this)||this;s.Xi=null,s.Zi=NaN,s.Gi=0,s.Qi=!0,s.tn=new Map,s.nn=!1,s.sn=NaN,s.hn=NaN,s.rn=NaN,s.en=NaN,s.Ri=i,s.un=n,s.ln=new at(i,s);var h,r;s.an=(h=function(){return s.Zi},r=function(){return s.hn},function(t){var i=r(),n=h();if(t===E(s.Xi).fn())return{Nt:n,bi:i};var e=E(t.Wt());return{Nt:t.cn(i,e),bi:i}});var e=function(t,i){return function(){return{Ct:s.Ri.Rt().vn(t()),bi:i()}}}((function(){return s.Gi}),(function(){return s.ai()}));return s.dn=new yt(s,i,e),s._n=new ct(s),s}return q(i,t),i.prototype.K=function(){return this.un},i.prototype.wn=function(t,i){this.rn=t,this.en=i},i.prototype.Mn=function(){this.rn=NaN,this.en=NaN},i.prototype.bn=function(){return this.rn},i.prototype.mn=function(){return this.en},i.prototype.pn=function(t,i,n){this.nn||(this.nn=!0),this.Qi=!0,this.gn(t,i,n)},i.prototype.Ot=function(){return this.Gi},i.prototype.ai=function(){return this.sn},i.prototype.fi=function(){return this.hn},i.prototype.Vt=function(){return this.Qi},i.prototype.yn=function(){this.Qi=!1,this.kn(),this.Zi=NaN,this.sn=NaN,this.hn=NaN,this.Xi=null,this.Mn()},i.prototype.xn=function(t){return null!==this.Xi?[this._n,this.ln]:[]},i.prototype.ei=function(t){return t===this.Xi&&this.un.horzLine.visible},i.prototype.ui=function(){return this.un.vertLine.visible},i.prototype.Cn=function(t,i){this.Qi&&this.Xi===t||this.tn.clear();var n=[];return this.Xi===t&&n.push(this.Nn(this.tn,i,this.an)),n},i.prototype.Ki=function(){return this.Qi?[this.dn]:[]},i.prototype.hi=function(){return this.Xi},i.prototype.Sn=function(){this._n.At(),this.tn.forEach((function(t){return t.At()})),this.dn.At(),this.ln.At()},i.prototype.Tn=function(t){return t&&!t.fn().et()?t.fn():null},i.prototype.gn=function(t,i,n){this.Fn(t,i,n)&&this.Sn()},i.prototype.Fn=function(t,i,n){var s=this.sn,h=this.hn,r=this.Zi,e=this.Gi,u=this.Xi,o=this.Tn(n);this.Gi=t,this.sn=isNaN(t)?NaN:this.Ri.Rt().Jt(t),this.Xi=n;var l=null!==o?o.Wt():null;return null!==o&&null!==l?(this.Zi=i,this.hn=o.jt(i,l)):(this.Zi=NaN,this.hn=NaN),s!==this.sn||h!==this.hn||e!==this.Gi||r!==this.Zi||u!==this.Xi},i.prototype.kn=function(){var t=this.Ri.Bt().map((function(t){return t.En().Ln()})).filter(tt),i=0===t.length?null:Math.max.apply(Math,t);this.Gi=null!==i?i:NaN},i.prototype.Nn=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new mt(this,i,n),t.set(i,s)),s},i}(Ct);function St(t){return"left"===t||"right"===t}var Tt=function(){function t(t){this.An=new Map,this.Bn=[],this.Dn=t}return t.prototype.Pn=function(t,i){var n=function(t,i){return void 0===t?i:{On:Math.max(t.On,i.On),Rn:t.Rn||i.Rn}}(this.An.get(t),i);this.An.set(t,n)},t.prototype.zn=function(){return this.Dn},t.prototype.Vn=function(t){var i=this.An.get(t);return void 0===i?{On:this.Dn}:{On:Math.max(this.Dn,i.On),Rn:i.Rn}},t.prototype.Wn=function(){this.Bn=[{In:0}]},t.prototype.jn=function(t){this.Bn=[{In:1,qt:t}]},t.prototype.Hn=function(){this.Bn=[{In:4}]},t.prototype.qn=function(t){this.Bn.push({In:2,qt:t})},t.prototype.Un=function(t){this.Bn.push({In:3,qt:t})},t.prototype.Yn=function(){return this.Bn},t.prototype.Jn=function(t){for(var i=this,n=0,s=t.Bn;n<s.length;n++){var h=s[n];this.$n(h)}this.Dn=Math.max(this.Dn,t.Dn),t.An.forEach((function(t,n){i.Pn(n,t)}))},t.prototype.$n=function(t){switch(t.In){case 0:this.Wn();break;case 1:this.jn(t.qt);break;case 2:this.qn(t.qt);break;case 3:this.Un(t.qt);break;case 4:this.Hn()}},t}(),Ft={value:"",padding:0,wordWrapWidth:0,forceTextAlign:!1,forceCalculateMaxLineWidth:!1,alignment:"left",font:{family:nt,color:"#2962ff",size:12,bold:!1,italic:!1},box:{scale:1,angle:0,alignment:{vertical:"top",horizontal:"left"}}},Lt={visible:!0,editable:!0,line:{width:1,color:"#2962ff",style:0,extend:{left:!1,right:!1},end:{left:0,right:0}},text:Ft},Et={visible:!0,editable:!0,line:{width:2,color:"rgba(74,144,226,1)",style:0,extend:{left:!1,right:!1},end:{left:1,right:0}},text:{value:"this is some text",padding:0,wordWrapWidth:150,forceTextAlign:!1,forceCalculateMaxLineWidth:!0,alignment:"left",font:{family:nt,color:"rgba(255,255,255,1)",size:14,bold:!1,italic:!1},box:{scale:1,angle:0,alignment:{vertical:"middle",horizontal:"center"},offset:{x:0,y:0},padding:{x:0,y:0},maxHeight:500,shadow:{blur:0,color:"rgba(255,255,255,1)",offset:{x:0,y:0}},border:{color:"rgba(74,144,226,1)",width:4,radius:20,highlight:!1,style:0},background:{color:"rgba(19,73,133,1)",inflation:{x:10,y:10}}}}},At={visible:!0,editable:!0,line:{width:1,color:"#2962ff",style:0,extend:{left:!0,right:!0},end:{left:0,right:0}},text:Ft},Bt={visible:!0,editable:!0,showMiddleLine:!0,extend:{left:!1,right:!1},background:{color:I("#2962ff",.2)},middleLine:{width:1,color:"#2962ff",style:2},channelLine:{width:1,color:"#2962ff",style:0}},Dt={visible:!0,editable:!0,rectangle:{extend:{left:!1,right:!1},background:{color:I("#9c27b0",.2)},border:{width:1,style:0,color:"#9c27b0"}},text:Ft},Pt={visible:!0,editable:!0,circle:{extend:{left:!1,right:!1},background:{color:I("#9c27b0",.2)},border:{width:1,style:0,color:"#9c27b0"}},text:Ft},Ot={visible:!0,editable:!0,priceRange:{extend:{left:!1,right:!1},background:{color:I("#9c27b0",.2)},border:{width:1,style:0,color:"#9c27b0"}},text:Ft},Rt={visible:!0,editable:!0,triangle:{background:{color:I("#f57c00",.2)},border:{width:1,style:0,color:"#f57c00"}}},zt={visible:!0,editable:!0,text:Ft,line:{width:1,color:"#2962ff",style:0}},Vt={visible:!0,editable:!0,line:{color:I("#f23645",.15)}},Wt={visible:!0,editable:!0,text:$(Q(Ft),{value:"Text"})},It={Ray:$(Q(Lt),{line:{extend:{right:!0}}}),Arrow:$(Q(Lt),{line:{end:{right:1}}}),ExtendedLine:$(Q(Lt),{line:{extend:{right:!0,left:!0}}}),HorizontalRay:$(Q(At),{line:{extend:{left:!1}}}),FibRetracement:{visible:!0,editable:!0,extend:{left:!1,right:!1},line:{width:1,style:0},levels:[{color:"#787b86",coeff:0,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#f23645",coeff:.236,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#81c784",coeff:.382,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#4caf50",coeff:.5,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#089981",coeff:.618,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#64b5f6",coeff:.786,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#787b86",coeff:1,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#2962ff",coeff:1.618,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#f23645",coeff:2.618,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#9c27b0",coeff:3.618,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0},{color:"#e91e63",coeff:4.236,opacity:0,distanceFromCoeffEnabled:!1,distanceFromCoeff:0}]},ParallelChannel:Bt,HorizontalLine:At,VerticalLine:zt,Highlighter:Vt,CrossLine:{visible:!0,editable:!0,line:{width:1,color:"#2962ff",style:0}},TrendLine:Lt,Callout:Et,Rectangle:Dt,Circle:Pt,PriceRange:Ot,Triangle:Rt,Brush:{visible:!0,editable:!0,line:{width:1,color:"#00bcd4",join:"round",style:0,end:{left:0,right:0}}},Path:{visible:!0,editable:!0,line:{width:1,color:"#2962ff",style:0,end:{left:0,right:1}}},Text:Wt},jt=function(){function t(){this.$t=null}return t.prototype._t=function(t){this.$t=t},t.prototype.ct=function(t,i,n){if(null!==this.$t&&!1!==this.$t.Vt){var s=this.$t,h=s.bi,r=s.li,e=s.j,u=t.canvas.clientWidth;dt(t,n,(function(){t.fillStyle=e,t.fillRect(0,h,u,r)}))}},t}(),Ht=function(t){function i(i){var n=t.call(this)||this;return n.Kn=new jt,n.Xn={j:"rgba(41, 98, 255, 0.25)",Vt:!1,bi:0,li:0},n.Zn=i,n.Gn=i.ri(),n.Kn._t(n.Xn),n}return q(i,t),i.prototype.Ei=function(){this.Xn.Vt=!1;var t=this.Zn.Ht();if(t&&!t.et()&&this.Zn.Qn()){var i=this.Zn.ts().map((function(i){return t.jt(i.price,i.price)})),n=Math.max.apply(Math,i),s=Math.min.apply(Math,i);this.Xn.bi=s,this.Xn.li=n-s,this.Xn.Vt=!0}},i}(bt),qt=function(t){function i(i,n){var s=t.call(this)||this;return s.ns=!1,s.ns=!1,s.Zn=i,s.ss=n,s}return q(i,t),i.prototype.hs=function(t){this.ns=t},i.prototype.Ei=function(t,i,n){var s;t.Vt=!1;var h=this.Zn.ri();if(h.Rt()&&!h.Rt().et()){var r=this.rs();if(null!==r){var e=this.Zn.Ht();if(null!==e&&!e.et()&&null!==h.Rt().es()){var u=this.Zn.ts();if(!(u.length<=this.ss)){var o=u[this.ss];if(isFinite(o.price)){var l=this.Zn.us(),a=null!==l?l.Wt():null;null!==a&&(n.m=r,n.j=j(n.m).p,n.bi=e.jt(o.price,a.qt),t.wi=(null===(s=this.Zn.Ht())||void 0===s?void 0:s.Di(o.price,a.qt))||"",t.Vt=!0)}}}}}},i.prototype.rs=function(){return this.Zn.os()},i}(bt),Ut=function(){function t(){this.$t=null}return t.prototype._t=function(t){this.$t=t},t.prototype.ot=function(t,i,n){if(null!==this.$t&&!1!==this.$t.Vt){var s=this.$t,h=s.bi,r=s.oi,e=s.j,u=t.canvas.clientHeight;dt(t,n,(function(){t.fillStyle=e,t.fillRect(h,0,r,u)}))}},t}(),Yt=function(){function t(t){this.Kn=new Ut,this.ls=!0,this.Xn={j:"rgba(41, 98, 255, 0.25)",Vt:!1,bi:0,oi:0},this.Zn=t,this.Gn=t.ri(),this.Kn._t(this.Xn)}return t.prototype.At=function(){this.ls=!0},t.prototype.Dt=function(){return this.ls&&this.fs(),this.ls=!1,this.Kn},t.prototype.fs=function(){var t=this;if(this.Xn.Vt=!1,!this.Gn.Rt().et()&&this.Zn.Qn()){var i=this.Zn.cs().map((function(i){return t.Gn.Rt().Vi({vs:i.timestamp})})),n=Math.max.apply(Math,i),s=Math.min.apply(Math,i);this.Xn.bi=s,this.Xn.oi=n-s,this.Xn.Vt=!0,this.ls=!1}},t}(),Jt=function(){function t(t,i,n){this.Kn=new gt,this.ls=!0,this.Xn={m:"",bi:0,j:"",wi:"",oi:0,Vt:!1,di:!1},this.Gn=t,this.Zn=i,this.ss=n,this.Kn._t(this.Xn)}return t.prototype.At=function(){this.ls=!0},t.prototype.Dt=function(){return this.ls&&this.fs(),this.ls=!1,this.Kn},t.prototype.fs=function(){if(this.Xn.Vt=!1,!this.Gn.Rt().et()){var t=this.rs();if(null!==t){var i=this.ds();if(null!==i){var n=j(t);this.Xn.m=n.m,this.Xn.j=n.p,this.Xn.bi=this.Gn.Rt().Vi({vs:i}),this.Xn.wi=this.Gn.Rt().Wi({vs:i}),this.Xn.oi=this.Gn.Rt().oi(),this.Xn.Vt=!0,this.ls=!1}}}},t.prototype.rs=function(){return this.Zn._s()},t.prototype.ds=function(){var t=this.Zn.cs();return t.length<=this.ss?null:t[this.ss].timestamp},t}(),$t=function(t){function i(i){var n=t.call(this)||this;return n.Ri=i,n}return q(i,t),i.prototype.ri=function(){return this.Ri},i}(Ct),Kt=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i)||this;h.ws=new J,h.Ms=new J,h.bs=[],h.ps=[],h.gs=[],h.ys=!1,h.ks=!1,h.xs=!1,h.Cs=!1,h.Ns=!1,h.Ss=null,h.Ts=null,h.Fs=[],h.Fs=s,h.Ls=n;for(var r=0;r<h.Es();r++)h.bs.push(new qt(h,r)),h.ps.push(new Jt(i,h,r));return h.Es()>1&&(h.bs.push(new Ht(h)),h.ps.push(new Yt(h))),h.Ss=i.Bt()[0],h.xs=h.Fs.length>=(-1===h.Es()?2:h.Es()),h.Ns=0===h.Fs.length||!h.As(),h}return q(i,t),i.prototype.As=function(){return this.xs},i.prototype.Bs=function(){this.Fs.length>=Math.max(1,this.Es())&&(this.xs=!0,this.ks=!0,this.Ns=!1,this.Ts=null,this.ri().Ds(this))},i.prototype.Ps=function(){var t=Y(Y([],this.Fs,!0),this.Ts?[this.Ts]:[],!0);return-1===this.Es()?t:t.slice(0,this.Es())},i.prototype.Os=function(t){this.Fs.push(t)},i.prototype.Rs=function(t){return this.Ps()[t]||null},i.prototype.zs=function(t,i){this.Fs[t].price=i.price,this.Fs[t].timestamp=i.timestamp},i.prototype.Vs=function(t){this.Fs=t},i.prototype.Ws=function(t){this.Ts=t},i.prototype.Is=function(t){var i,n,h=(null===(n=null===(i=this.us())||void 0===i?void 0:i.Wt())||void 0===n?void 0:n.qt)||0,r=this.Ht(),e=this.Rt();if(!r||r.et()||e.et())return null;var u=e.Vi({vs:t.timestamp}),o=r.jt(t.price,h);return new s(u,o)},i.prototype.js=function(t){var i,n,s=(null===(n=null===(i=this.us())||void 0===i?void 0:i.Wt())||void 0===n?void 0:n.qt)||0,h=this.Ht(),r=this.Rt();return h?{price:h.cn(t.y,s),timestamp:r.Hs(t.x).vs}:null},i.prototype.qs=function(){return{qi:this.qi(),In:this.Us,K:this.Ls}},i.prototype.Ht=function(){return this.ri().Js()[0].Ys()},i.prototype.Rt=function(){return this.ri().Rt()},i.prototype.us=function(){return this.Ss},i.prototype.K=function(){return this.Ls},i.prototype.Vt=function(){return this.Ls.visible},i.prototype.$s=function(t){$(this.Ls,t),this.ri().Ds(this),this.gs.forEach((function(t){t.At("options")}))},i.prototype.xn=function(t){return this.gs},i.prototype.Sn=function(){if(this.K().visible){this.Ks();for(var t=0;t<this.bs.length;t++)this.bs[t].At();for(t=0;t<this.ps.length;t++)this.ps[t].At()}},i.prototype.Xs=function(){return this.ys},i.prototype.Zs=function(t){var i=t!==this.ys;return this.ys=t,i},i.prototype.Qn=function(){return this.ks},i.prototype.Gs=function(t){var i=t!==this.ks;return this.ks=t,i&&this.Sn(),i},i.prototype.Qs=function(){return this.Cs},i.prototype.th=function(t){var i=t!==this.Cs;return this.Cs=t,i},i.prototype.ih=function(){return this.Ns},i.prototype.nh=function(t){var i=t!==this.Ns;return this.Ns=t,i},i.prototype.sh=function(){return this.Us},i.prototype.D=function(){},i.prototype.cs=function(){return this.Ps()},i.prototype.ts=function(){return this.Ps()},i.prototype._s=function(){return this.Qn()?"#2962FF":null},i.prototype.os=function(){return this.Qn()?"#2962FF":null},i.prototype.Ki=function(){return this.ps},i.prototype.Cn=function(){return this.bs},i.prototype.hh=function(){return!1},i.prototype.rh=function(){return!0},i.prototype.eh=function(){return 0},i.prototype.uh=function(t,i){return null},i.prototype.Wt=function(){return null},i.prototype.oh=function(){return this.ah},i.prototype.fh=function(t){return t},i.prototype.dh=function(){return{id:this.qi(),toolType:this.Us,options:this.K(),points:this.Ps()}},i.prototype._h=function(t){this.gs=t},i.prototype.Ks=function(){this.gs.forEach((function(t){return t.At()}))},i}($t);function Xt(t){var i;if("object"!=typeof t||null===t||"number"==typeof t.nodeType)i=t;else if(t instanceof Date)i=new Date(t.valueOf());else if(Array.isArray(t)){i=[];for(var n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=Xt(t[n]))}else i={},Object.keys(t).forEach((function(n){i[n]=Xt(t[n])}));return i}var Zt,Gt=function(){function t(t,i){this.wh=t,this.$t=i||null}return t.prototype.In=function(){return this.wh},t.prototype.Mh=function(){return this.$t},t}();!function(t){t[t.bh=1]="_internal_Regular",t[t.mh=2]="_internal_MovePoint",t[t.ph=3]="_internal_MovePointBackground",t[t.gh=4]="_internal_ChangePoint",t[t.yh=5]="_internal_Custom"}(Zt||(Zt={}));var Qt=3,ti=2,ii=function(){function t(){this.kh=1e3,this.xh=1e3,this.dt=null,this.Ch=new Gt(Zt.mh)}return t.prototype._t=function(t){this.dt=t},t.prototype.Nh=function(t){this.Ch=t},t.prototype.ot=function(t,i,n,s){if(this.dt&&!(this.dt.Ps.length<2)){this.xh=t.canvas.width,this.kh=t.canvas.height;var h=this.dt.Sh.width||1,r=this.dt.Sh.color||"white",e=this.dt.Sh.style||0;t.lineCap="butt",t.strokeStyle=r,t.lineWidth=Math.max(1,Math.floor(h*i)),g(t,e);var u=this.dt.Ps[0],o=this.dt.Ps[1];this.Th(t,[u,o],h,i);var l=this.Fh(u,o);null!==l&&h>0&&(l[0].x===l[1].x?x(t,Math.round(l[0].x*i),l[0].y*i,l[1].y*i):l[0].y===l[1].y?k(t,Math.round(l[0].y*i),l[0].x*i,l[1].x*i):C(t,l[0].x*i,l[0].y*i,l[1].x*i,l[1].y*i))}},t.prototype.lt=function(t,i){if(null===this.dt||this.dt.Ps.length<2)return null;var n=Qt,h=this.Fh(this.dt.Ps[0],this.dt.Ps[1]);return null!==h&&d(h[0],h[1],new s(t,i))._<=n?this.Ch:null},t.prototype.Fh=function(t,i){var n,s,h=E(this.dt);return N(t,i,this.xh,this.kh,!!(null===(n=h.Sh.extend)||void 0===n?void 0:n.left),!!(null===(s=h.Sh.extend)||void 0===s?void 0:s.right))},t.prototype.Th=function(t,i,n,s){var h,r,e=E(this.dt);switch(null===(h=e.Sh.end)||void 0===h?void 0:h.left){case 1:T(i[1],i[0],t,n,s);break;case 2:S(i[0],t,n,s)}switch(null===(r=e.Sh.end)||void 0===r?void 0:r.right){case 1:T(i[0],i[1],t,n,s);break;case 2:S(i[1],t,n,s)}},t}();function ni(t,i,n,s,h,r,e){var u,o,l,a;if(Array.isArray(r))if(2===r.length){var f=Math.max(0,r[0]),c=Math.max(0,r[1]);u=f,o=f,l=c,a=c}else{if(4!==r.length)throw new Error("Wrong border radius - it should be like css border radius");u=Math.max(0,r[0]),o=Math.max(0,r[1]),l=Math.max(0,r[2]),a=Math.max(0,r[3])}else u=f=Math.max(0,r),o=f,l=f,a=f;t.beginPath(),g(t,e||0),t.moveTo(i+u,n),t.lineTo(i+s-o,n),0!==o&&t.arcTo(i+s,n,i+s,n+o,o),t.lineTo(i+s,n+h-l),0!==l&&t.arcTo(i+s,n+h,i+s-l,n+h,l),t.lineTo(i+a,n+h),0!==a&&t.arcTo(i,n+h,i,n+h-a,a),t.lineTo(i,n+u),0!==u&&t.arcTo(i,n,i+u,n,u),t.stroke()}function si(t,i,n,h,r,e,u,o,l,a,f){void 0===e&&(e=0);var c=l?0:i.x,v=a?f:n.x;if(void 0!==h&&(t.fillStyle=h,t.fillRect(c,i.y,v-c,n.y-i.y)),void 0!==r&&e>0){t.beginPath(),g(t,u||0);var d=new s(0,0),_=new s(0,0),w=new s(0,0),M=new s(0,0);switch(o){case"outer":w=new s(0,p=.5*e),M=new s(0,p),d=new s(p,-e),_=new s(p,-e);break;case"center":var b=e%2?.5:0,m=e%2?.5:1;w=new s((p=.5*e)-b,-b),M=new s(m+p,-b),d=new s(-b,b+p),_=new s(m,b+p);break;case"inner":var p;w=new s(0,-(p=.5*e)),M=new s(1,-p),d=new s(-p,e),_=new s(1-p,e)}t.lineWidth=e,t.strokeStyle=r,t.moveTo(c-w.x,i.y-w.y),t.lineTo(v+M.x,i.y-M.y),t.moveTo(n.x+_.x,i.y+_.y),t.lineTo(n.x+_.x,n.y-_.y),t.moveTo(c-w.x,n.y+w.y),t.lineTo(v+M.x,n.y+M.y),t.moveTo(i.x-d.x,i.y+d.y),t.lineTo(i.x-d.x,n.y-d.y),t.stroke()}}var hi,ri=function(){function t(t,i){this.Lh=null,this.Eh=null,this.Ah=null,this.Bh=null,this.Dh=null,this.dt=null,this.Ch=i||new Gt(Zt.mh),void 0!==t&&this._t(t)}return t.prototype._t=function(t){!function(t,i){var n,s,h,r,e,u,o,l,a,f,c,v,d,_,w,M,b,m,p,g,y,k,x,C,N,S,T,F,L,E,A,B,D,P,O,R,z,V,W,I,j,H,q,U,Y,J,$,K,X,Z,G,Q,tt,it,nt,st,ht,rt,et,ut,ot,lt,at,ft,ct,vt,dt,_t,wt,Mt,bt,mt,pt,gt,yt,kt,xt,Ct,Nt,St,Tt,Ft,Lt,Et,At,Bt,Dt,Pt,Ot,Rt,zt,Vt,Wt,It,jt,Ht,qt,Ut,Yt,Jt,$t,Kt,Xt,Zt,Gt,Qt,ti,ii,ni,si,hi,ri,ei,ui,oi,li,ai,fi,ci,vi,di,_i;if(null===t||null===i)return null===t==(null===i);if(void 0===t.Ps!=(void 0===i.Ps))return!1;if(void 0!==t.Ps&&void 0!==i.Ps){if(t.Ps.length!==i.Ps.length)return!1;for(var wi=0;wi<t.Ps.length;++wi)if(t.Ps[wi].x!==i.Ps[wi].x||t.Ps[wi].y!==i.Ps[wi].y)return!1}return(null===(n=t.wi)||void 0===n?void 0:n.forceCalculateMaxLineWidth)===(null===(s=i.wi)||void 0===s?void 0:s.forceCalculateMaxLineWidth)&&(null===(h=t.wi)||void 0===h?void 0:h.forceTextAlign)===(null===(r=i.wi)||void 0===r?void 0:r.forceTextAlign)&&(null===(e=t.wi)||void 0===e?void 0:e.wordWrapWidth)===(null===(u=i.wi)||void 0===u?void 0:u.wordWrapWidth)&&(null===(o=t.wi)||void 0===o?void 0:o.padding)===(null===(l=i.wi)||void 0===l?void 0:l.padding)&&(null===(a=t.wi)||void 0===a?void 0:a.value)===(null===(f=i.wi)||void 0===f?void 0:f.value)&&(null===(c=t.wi)||void 0===c?void 0:c.alignment)===(null===(v=i.wi)||void 0===v?void 0:v.alignment)&&(null===(_=null===(d=t.wi)||void 0===d?void 0:d.font)||void 0===_?void 0:_.bold)===(null===(M=null===(w=i.wi)||void 0===w?void 0:w.font)||void 0===M?void 0:M.bold)&&(null===(m=null===(b=t.wi)||void 0===b?void 0:b.font)||void 0===m?void 0:m.size)===(null===(g=null===(p=i.wi)||void 0===p?void 0:p.font)||void 0===g?void 0:g.size)&&(null===(k=null===(y=t.wi)||void 0===y?void 0:y.font)||void 0===k?void 0:k.family)===(null===(C=null===(x=i.wi)||void 0===x?void 0:x.font)||void 0===C?void 0:C.family)&&(null===(S=null===(N=t.wi)||void 0===N?void 0:N.font)||void 0===S?void 0:S.italic)===(null===(F=null===(T=i.wi)||void 0===T?void 0:T.font)||void 0===F?void 0:F.italic)&&(null===(E=null===(L=t.wi)||void 0===L?void 0:L.box)||void 0===E?void 0:E.angle)===(null===(B=null===(A=i.wi)||void 0===A?void 0:A.box)||void 0===B?void 0:B.angle)&&(null===(P=null===(D=t.wi)||void 0===D?void 0:D.box)||void 0===P?void 0:P.scale)===(null===(R=null===(O=i.wi)||void 0===O?void 0:O.box)||void 0===R?void 0:R.scale)&&(null===(W=null===(V=null===(z=t.wi)||void 0===z?void 0:z.box)||void 0===V?void 0:V.offset)||void 0===W?void 0:W.x)===(null===(H=null===(j=null===(I=i.wi)||void 0===I?void 0:I.box)||void 0===j?void 0:j.offset)||void 0===H?void 0:H.x)&&(null===(Y=null===(U=null===(q=t.wi)||void 0===q?void 0:q.box)||void 0===U?void 0:U.offset)||void 0===Y?void 0:Y.y)===(null===(K=null===($=null===(J=i.wi)||void 0===J?void 0:J.box)||void 0===$?void 0:$.offset)||void 0===K?void 0:K.y)&&(null===(Z=null===(X=t.wi)||void 0===X?void 0:X.box)||void 0===Z?void 0:Z.maxHeight)===(null===(Q=null===(G=i.wi)||void 0===G?void 0:G.box)||void 0===Q?void 0:Q.maxHeight)&&(null===(nt=null===(it=null===(tt=t.wi)||void 0===tt?void 0:tt.box)||void 0===it?void 0:it.padding)||void 0===nt?void 0:nt.x)===(null===(rt=null===(ht=null===(st=i.wi)||void 0===st?void 0:st.box)||void 0===ht?void 0:ht.padding)||void 0===rt?void 0:rt.x)&&(null===(ot=null===(ut=null===(et=t.wi)||void 0===et?void 0:et.box)||void 0===ut?void 0:ut.padding)||void 0===ot?void 0:ot.y)===(null===(ft=null===(at=null===(lt=i.wi)||void 0===lt?void 0:lt.box)||void 0===at?void 0:at.padding)||void 0===ft?void 0:ft.y)&&(null===(dt=null===(vt=null===(ct=t.wi)||void 0===ct?void 0:ct.box)||void 0===vt?void 0:vt.alignment)||void 0===dt?void 0:dt.vertical)===(null===(Mt=null===(wt=null===(_t=i.wi)||void 0===_t?void 0:_t.box)||void 0===wt?void 0:wt.alignment)||void 0===Mt?void 0:Mt.vertical)&&(null===(pt=null===(mt=null===(bt=t.wi)||void 0===bt?void 0:bt.box)||void 0===mt?void 0:mt.alignment)||void 0===pt?void 0:pt.horizontal)===(null===(kt=null===(yt=null===(gt=i.wi)||void 0===gt?void 0:gt.box)||void 0===yt?void 0:yt.alignment)||void 0===kt?void 0:kt.horizontal)&&(null===(St=null===(Nt=null===(Ct=null===(xt=t.wi)||void 0===xt?void 0:xt.box)||void 0===Ct?void 0:Ct.background)||void 0===Nt?void 0:Nt.inflation)||void 0===St?void 0:St.x)===(null===(Et=null===(Lt=null===(Ft=null===(Tt=i.wi)||void 0===Tt?void 0:Tt.box)||void 0===Ft?void 0:Ft.background)||void 0===Lt?void 0:Lt.inflation)||void 0===Et?void 0:Et.x)&&(null===(Pt=null===(Dt=null===(Bt=null===(At=t.wi)||void 0===At?void 0:At.box)||void 0===Bt?void 0:Bt.background)||void 0===Dt?void 0:Dt.inflation)||void 0===Pt?void 0:Pt.y)===(null===(Vt=null===(zt=null===(Rt=null===(Ot=i.wi)||void 0===Ot?void 0:Ot.box)||void 0===Rt?void 0:Rt.background)||void 0===zt?void 0:zt.inflation)||void 0===Vt?void 0:Vt.y)&&(null===(jt=null===(It=null===(Wt=t.wi)||void 0===Wt?void 0:Wt.box)||void 0===It?void 0:It.border)||void 0===jt?void 0:jt.highlight)===(null===(Ut=null===(qt=null===(Ht=i.wi)||void 0===Ht?void 0:Ht.box)||void 0===qt?void 0:qt.border)||void 0===Ut?void 0:Ut.highlight)&&(null===($t=null===(Jt=null===(Yt=t.wi)||void 0===Yt?void 0:Yt.box)||void 0===Jt?void 0:Jt.border)||void 0===$t?void 0:$t.radius)===(null===(Zt=null===(Xt=null===(Kt=i.wi)||void 0===Kt?void 0:Kt.box)||void 0===Xt?void 0:Xt.border)||void 0===Zt?void 0:Zt.radius)&&(null===(ti=null===(Qt=null===(Gt=t.wi)||void 0===Gt?void 0:Gt.box)||void 0===Qt?void 0:Qt.shadow)||void 0===ti?void 0:ti.offset)===(null===(si=null===(ni=null===(ii=i.wi)||void 0===ii?void 0:ii.box)||void 0===ni?void 0:ni.shadow)||void 0===si?void 0:si.offset)&&(null===(ei=null===(ri=null===(hi=t.wi)||void 0===hi?void 0:hi.box)||void 0===ri?void 0:ri.shadow)||void 0===ei?void 0:ei.color)===(null===(li=null===(oi=null===(ui=i.wi)||void 0===ui?void 0:ui.box)||void 0===oi?void 0:oi.shadow)||void 0===li?void 0:li.color)&&(null===(ci=null===(fi=null===(ai=t.wi)||void 0===ai?void 0:ai.box)||void 0===fi?void 0:fi.shadow)||void 0===ci?void 0:ci.blur)===(null===(_i=null===(di=null===(vi=i.wi)||void 0===vi?void 0:vi.box)||void 0===di?void 0:di.shadow)||void 0===_i?void 0:_i.blur)}(this.dt,t)?(this.dt=t,this.Eh=null,this.Lh=null,this.Ah=null,this.Bh=null,this.Dh=null):this.dt=t},t.prototype.lt=function(t,i){return null===this.dt||void 0===this.dt.Ps||0===this.dt.Ps.length?null:w(new s(t,i),this.Ph())?this.Ch:null},t.prototype.Oh=function(t){return null!==this.dt&&void 0!==this.dt.Ps&&0!==this.dt.Ps.length&&_(this.dt.Ps[0],t)},t.prototype.Rh=function(){return null===this.dt?{oi:0,li:0}:this.zh()},t.prototype.Vh=function(){if(null===this.dt)return{bt:0,gt:0,oi:0,li:0};var t=this.Wh();return{bt:t.Ih,gt:t.jh,oi:t.Hh,li:t.qh}},t.prototype.Uh=function(t,i){if(null===this.dt||void 0===this.dt.Ps||0===this.dt.Ps.length)return!0;var n=this.Wh();if(n.Ih+n.Hh<0||n.Ih>t){var r=new h(new s(0,0),new s(t,i));return this.Ph().every((function(t){return!_(t,r)}))}return!1},t.prototype.Vs=function(t,i){E(this.dt).Ps=t,this.Ch=i||new Gt(Zt.mh)},t.prototype.Yh=function(){return null===this.dt?"":this.Jh().Yh},t.prototype.$h=function(t,i,n){return function(t,i,n){hi||ei();n="[object String]"===Object.prototype.toString.call(n)?parseInt(n):n,t+="";var s=!Number.isInteger(n)||!isFinite(n)||n<=0?t.split(/\r\n|\r|\n|$/):t.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/);s[s.length-1]||s.pop();if(!Number.isInteger(n)||!isFinite(n)||n<=0)return s;hi.font=i;for(var h=[],r=0;r<s.length;r++){var e=s[r],u=hi.measureText(e).width;if(u<=n)h.push(e);else for(var o=e.split(/([-)\]},.!?:;])|(\s+)/);o.length;){var l=Math.floor(n/u*(o.length+2)/3);if(l<=0||hi.measureText(o.slice(0,3*l-1).join("")).width<=n)for(;hi.measureText(o.slice(0,3*(l+1)-1).join("")).width<=n;)l++;else for(;l>0&&hi.measureText(o.slice(0,3*--l-1).join("")).width>n;);if(l>0)h.push(o.slice(0,3*l-1).join("")),o.splice(0,3*l);else{var a=o[0]+(o[1]||""),f=Math.floor(n/hi.measureText(a).width*a.length);if(hi.measureText(a.substring(0,f)).width<=n)for(;hi.measureText(a.substring(0,f+1)).width<=n;)f++;else for(;f>1&&hi.measureText(a.substring(0,--f)).width>n;);f=Math.max(1,f),h.push(a.substring(0,f)),o[0]=a.substring(f),o[1]=""}if(hi.measureText(o.join("")).width<=n){h.push(o.join(""));break}}}return h}(t,n||this.Yh(),i)},t.prototype.ot=function(t,i){var n,s,h,r,e,u,o,l,a,f,c,v,d,_,w,M,b,m,p,g,y;if(null!==this.dt&&void 0!==this.dt.Ps&&0!==this.dt.Ps.length){var k=t.canvas.width,x=t.canvas.height;if(!this.Uh(k,x)){var C=this.dt.wi,N=this.Wh(),S=this.Kh().scaled(i),T=-((null===(n=C.box)||void 0===n?void 0:n.angle)||0)*Math.PI/180;t.save(),t.translate(S.x,S.y),t.rotate(T),t.translate(-S.x,-S.y);var F=this.Jh().V;t.textAlign=N.Xh,t.textBaseline="middle",t.font=this.Yh();var L=Math.round(N.jh*i),E=Math.round(N.Ih*i),A=E+Math.round(N.Hh*i),B=L+Math.round(N.qh*i);if((null===(h=null===(s=C.box)||void 0===s?void 0:s.background)||void 0===h?void 0:h.color)||(null===(e=null===(r=C.box)||void 0===r?void 0:r.border)||void 0===e?void 0:e.color)||(null===(o=null===(u=C.box)||void 0===u?void 0:u.border)||void 0===o?void 0:o.highlight)&&C.wordWrapWidth){var D=Math.round(((null===(a=null===(l=C.box)||void 0===l?void 0:l.border)||void 0===a?void 0:a.width)||Math.max(F/12,1))*i),P=D/2,O=!1;if(null===(f=C.box)||void 0===f?void 0:f.shadow){var R=null===(c=C.box)||void 0===c?void 0:c.shadow,z=R.color,V=R.blur,W=R.offset;t.save(),t.shadowColor=z,t.shadowBlur=V,t.shadowOffsetX=(null==W?void 0:W.x)||0,t.shadowOffsetY=(null==W?void 0:W.y)||0,O=!0}if(null===(v=C.box.border)||void 0===v?void 0:v.width){(null===(d=C.box.border)||void 0===d?void 0:d.color)&&(t.strokeStyle=C.box.border.color),t.lineWidth=D;var I=null!==(M=null===(w=null===(_=C.box)||void 0===_?void 0:_.border)||void 0===w?void 0:w.radius)&&void 0!==M?M:0*i+D,j=null===(m=null===(b=C.box)||void 0===b?void 0:b.border)||void 0===m?void 0:m.style;ni(t,E-P,L-P,A-E+D,B-L+D,I,j),(null===(p=C.box.background)||void 0===p?void 0:p.color)&&(t.fillStyle=C.box.background.color,t.fill()),O&&(t.restore(),O=!1)}else(null===(g=C.box.background)||void 0===g?void 0:g.color)&&(t.fillStyle=C.box.background.color,t.fillRect(E,L,A-E,B-L)),O&&(t.restore(),O=!1)}t.fillStyle=null===(y=C.font)||void 0===y?void 0:y.color;for(var H=this.Gh().Zh,q=.05*F,U=di(this.dt),Y=(E+Math.round(N.Qh*i))/i,J=(L+Math.round((N.tr+q)*i))/i,$=function(n){dt(t,i,(function(){return t.fillText(n,Y,J)})),J+=F+U},K=0,X=H;K<X.length;K++){$(X[K])}t.restore()}}},t.prototype.Wh=function(){var t,i,n,s,h,r,e,u,o,l,a,f,c,v,d,_,w,M,b,m,p;if(null!==this.Lh)return this.Lh;var g=E(this.dt),y=fi(g),k=ai(g),x=vi(g)+y,C=ci(g)+k,N=L(g.Ps)[0],S=this.zh(),T=S.oi,F=S.li,A=N.y,B=N.x;switch(null===(n=null===(i=null===(t=g.wi)||void 0===t?void 0:t.box)||void 0===i?void 0:i.alignment)||void 0===n?void 0:n.vertical){case"top":A-=F+((null===(r=null===(h=null===(s=g.wi)||void 0===s?void 0:s.box)||void 0===h?void 0:h.offset)||void 0===r?void 0:r.y)||0);break;case"middle":A-=F/2;break;case"bottom":A+=(null===(o=null===(u=null===(e=g.wi)||void 0===e?void 0:e.box)||void 0===u?void 0:u.offset)||void 0===o?void 0:o.y)||0}var D=A+C+_i(g)/2,P="start",O=0;switch(null===(f=null===(a=null===(l=g.wi)||void 0===l?void 0:l.box)||void 0===a?void 0:a.alignment)||void 0===f?void 0:f.horizontal){case"left":B+=(null===(d=null===(v=null===(c=g.wi)||void 0===c?void 0:c.box)||void 0===v?void 0:v.offset)||void 0===d?void 0:d.x)||0;break;case"center":B-=T/2;break;case"right":B-=T+((null===(M=null===(w=null===(_=g.wi)||void 0===_?void 0:_.box)||void 0===w?void 0:w.offset)||void 0===M?void 0:M.x)||0)}switch(L(null===(b=g.wi)||void 0===b?void 0:b.alignment)){case"start":case"left":P="start",O=B+x,bi()&&((null===(m=g.wi)||void 0===m?void 0:m.forceTextAlign)?P="left":(O=B+T-x,P="right"));break;case"center":P="center",O=B+T/2;break;case"right":case"end":P="end",O=B+T-x,bi()&&(null===(p=g.wi)||void 0===p?void 0:p.forceTextAlign)&&(P="right")}return this.Lh={Ih:B,jh:A,Hh:T,qh:F,Xh:P,tr:D-A,Qh:O-B},this.Lh},t.prototype.ir=function(t){var i,n,s;if(hi||ei(),hi.textBaseline="alphabetic",hi.font=this.Yh(),null!==this.dt&&(null===(i=this.dt.wi)||void 0===i?void 0:i.wordWrapWidth)&&!(null===(n=this.dt.wi)||void 0===n?void 0:n.forceCalculateMaxLineWidth))return(null===(s=this.dt.wi)||void 0===s?void 0:s.wordWrapWidth)*Mi(this.dt);for(var h=0,r=0,e=t;r<e.length;r++){var u=e[r];h=Math.max(h,hi.measureText(u).width)}return h},t.prototype.Gh=function(){var t,i,n,s,h,r;if(null===this.Ah){var e=E(this.dt),u=this.$h((null===(t=e.wi)||void 0===t?void 0:t.value)||"",null===(i=e.wi)||void 0===i?void 0:i.wordWrapWidth);if(void 0!==(null===(s=null===(n=e.wi)||void 0===n?void 0:n.box)||void 0===s?void 0:s.maxHeight)){var o=L(null===(r=null===(h=e.wi)||void 0===h?void 0:h.box)||void 0===r?void 0:r.maxHeight),l=_i(e),a=di(e),f=Math.floor((o+a)/(l+a));u.length>f&&(u=u.slice(0,f))}this.Ah={nr:this.ir(u),Zh:u}}return this.Ah},t.prototype.Jh=function(){var t,i,n,s,h,r;if(null===this.Bh){var e=E(this.dt),u=_i(e),o=((null===(i=null===(t=e.wi)||void 0===t?void 0:t.font)||void 0===i?void 0:i.bold)?"bold ":"")+((null===(s=null===(n=e.wi)||void 0===n?void 0:n.font)||void 0===s?void 0:s.italic)?"italic ":"")+u+"px "+(null===(r=null===(h=e.wi)||void 0===h?void 0:h.font)||void 0===r?void 0:r.family);this.Bh={Yh:o,V:u}}return this.Bh},t.prototype.zh=function(){if(null===this.Dh){var t=this.Gh(),i=E(this.dt);this.Dh={oi:oi(i,t.nr),li:li(i,t.Zh.length)}}return this.Dh},t.prototype.Ph=function(){var t,i;if(null!==this.Eh)return this.Eh;if(null===this.dt)return[];var n=this.Wh(),h=n.Ih,r=n.jh,e=n.Hh,u=n.qh,o=this.Kh(),l=-((null===(i=null===(t=this.dt.wi)||void 0===t?void 0:t.box)||void 0===i?void 0:i.angle)||0)*Math.PI/180;return this.Eh=[ui(new s(h,r),o,l),ui(new s(h+e,r),o,l),ui(new s(h+e,r+u),o,l),ui(new s(h,r+u),o,l)],this.Eh},t.prototype.Kh=function(){var t,i,n,h=this.Wh(),r=h.Ih,e=h.jh,u=h.Hh,o=h.qh,l=L(null===(n=null===(i=null===(t=this.dt)||void 0===t?void 0:t.wi)||void 0===i?void 0:i.box)||void 0===n?void 0:n.alignment),a=l.horizontal,f=l.vertical,c=0,v=0;switch(a){case"center":c=r+u/2;break;case"left":c=r;break;case"right":c=r+u}switch(f){case"middle":v=e+o/2;break;case"bottom":v=e;break;case"top":v=e+o}return new s(c,v)},t}();function ei(){var t=document.createElement("canvas");t.width=0,t.height=0,hi=E(t.getContext("2d"))}function ui(t,i,n){if(0===n)return t.clone();var h=(t.x-i.x)*Math.cos(n)-(t.y-i.y)*Math.sin(n)+i.x,r=(t.x-i.x)*Math.sin(n)+(t.y-i.y)*Math.cos(n)+i.y;return new s(h,r)}function oi(t,i){return i+2*vi(t)+2*fi(t)}function li(t,i){return _i(t)*i+di(t)*(i-1)+2*ci(t)+2*ai(t)}function ai(t){var i,n,s,h,r,e;return void 0!==(null===(s=null===(n=null===(i=t.wi)||void 0===i?void 0:i.box)||void 0===n?void 0:n.padding)||void 0===s?void 0:s.y)?(null===(e=null===(r=null===(h=t.wi)||void 0===h?void 0:h.box)||void 0===r?void 0:r.padding)||void 0===e?void 0:e.y)*Mi(t):_i(t)/3}function fi(t){var i,n,s,h,r,e;return(null===(s=null===(n=null===(i=t.wi)||void 0===i?void 0:i.box)||void 0===n?void 0:n.padding)||void 0===s?void 0:s.x)?(null===(e=null===(r=null===(h=t.wi)||void 0===h?void 0:h.box)||void 0===r?void 0:r.padding)||void 0===e?void 0:e.x)*Mi(t):_i(t)/3}function ci(t){var i,n,s,h;return((null===(h=null===(s=null===(n=null===(i=t.wi)||void 0===i?void 0:i.box)||void 0===n?void 0:n.background)||void 0===s?void 0:s.inflation)||void 0===h?void 0:h.y)||0)*Mi(t)}function vi(t){var i,n,s,h;return((null===(h=null===(s=null===(n=null===(i=t.wi)||void 0===i?void 0:i.box)||void 0===n?void 0:n.background)||void 0===s?void 0:s.inflation)||void 0===h?void 0:h.x)||0)*Mi(t)}function di(t){var i;return((null===(i=t.wi)||void 0===i?void 0:i.padding)||0)*Mi(t)}function _i(t){return Math.ceil(wi(t)*Mi(t))}function wi(t){var i,n;return(null===(n=null===(i=t.wi)||void 0===i?void 0:i.font)||void 0===n?void 0:n.size)||30}function Mi(t){var i,n,s=Math.min(1,Math.max(.2,(null===(n=null===(i=t.wi)||void 0===i?void 0:i.box)||void 0===n?void 0:n.scale)||1));if(1===s)return s;var h=wi(t);return Math.ceil(s*h)/h}function bi(){return"rtl"===window.document.dir}var mi=function(){function t(){this.$t=null}return t.prototype._t=function(t){this.$t=t},t.prototype.ot=function(t,i,n,s){var h=this;if(null!==this.$t){var r=Math.max(1,Math.floor(i));t.lineWidth=r;var e=Math.ceil(this.$t.Gt*i),u=Math.ceil(this.$t.Zt*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=E(h.$t);if(n.sr){t.strokeStyle=n.hr,g(t,n.rr),t.beginPath();for(var s=0,o=n.er;s<o.length;s++){var l=o[s],a=Math.round(l.ur*i);t.moveTo(a,-r),t.lineTo(a,e+r)}t.stroke()}if(n.lr){t.strokeStyle=n.ar,g(t,n.cr),t.beginPath();for(var f=0,c=n.vr;f<c.length;f++){var v=c[f],d=Math.round(v.ur*i);t.moveTo(-r,d),t.lineTo(u+r,d)}t.stroke()}}))}},t}(),pi=function(){function t(t){this.ni=new mi,this.Lt=!0,this.Xi=t}return t.prototype.At=function(){this.Lt=!0},t.prototype.Dt=function(t,i){if(this.Lt){var n=this.Xi.ri().K().grid,s={Gt:t,Zt:i,lr:n.horzLines.visible,sr:n.vertLines.visible,ar:n.horzLines.color,hr:n.vertLines.color,cr:n.horzLines.style,rr:n.vertLines.style,vr:this.Xi.fn().dr(),er:this.Xi.ri().Rt().dr()||[]};this.ni._t(s),this.Lt=!1}return this.ni},t}(),gi=function(){function t(t){this._n=new pi(t)}return t.prototype._r=function(){return this._n},t}(),yi=".";function ki(t,i){if(!K(t))return"n/a";if(!X(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var xi=function(){function t(t,i){if(i||(i=1),K(t)&&X(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ai=t,this.wr=i,this.Mr()}return t.prototype.format=function(t){var i=t<0?"−":"";return t=Math.abs(t),i+this.br(t)},t.prototype.Mr=function(){if(this.mr=0,this.Ai>0&&this.wr>0)for(var t=this.Ai;t>1;)t/=10,this.mr++},t.prototype.br=function(t){var i=this.Ai/this.wr,n=Math.floor(t),s="",h=void 0!==this.mr?this.mr:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.mr);r>=i&&(r-=i,n+=1),s=yi+ki(+r.toFixed(this.mr)*this.wr,h)}else n=Math.round(n*i)/i,h>0&&(s=yi+ki(0,h));return n.toFixed(0)+s},t}(),Ci=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return q(i,t),i.prototype.format=function(i){return"".concat(t.prototype.format.call(this,i),"%")},i}(xi),Ni=function(){function t(t,i){this.pr=t,this.gr=i}return t.prototype.yr=function(t){return null!==t&&(this.pr===t.pr&&this.gr===t.gr)},t.prototype.kr=function(){return new t(this.pr,this.gr)},t.prototype.Cr=function(){return this.pr},t.prototype.Nr=function(){return this.gr},t.prototype.Sr=function(){return this.gr-this.pr},t.prototype.et=function(){return this.gr===this.pr||Number.isNaN(this.gr)||Number.isNaN(this.pr)},t.prototype.Jn=function(i){return null===i?this:new t(Math.min(this.Cr(),i.Cr()),Math.max(this.Nr(),i.Nr()))},t.prototype.Tr=function(t){if(K(t)&&0!==this.gr-this.pr){var i=.5*(this.gr+this.pr),n=this.gr-i,s=this.pr-i;n*=t,s*=t,this.gr=i+n,this.pr=i+s}},t.prototype.Fr=function(t){K(t)&&(this.gr+=t,this.pr+=t)},t.prototype.Lr=function(){return{minValue:this.pr,maxValue:this.gr}},t.Er=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function Si(t,i,n){return Math.min(Math.max(t,i),n)}function Ti(t,i,n){return i-t<=n}function Fi(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function Li(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function Ei(t){var i=Math.ceil(t);return i%2==0?i-1:i}var Ai={Ar:4,Br:1e-4};function Bi(t,i){var n=100*(t-i)/i;return i<0?-n:n}function Di(t,i){var n=Bi(t.Cr(),i),s=Bi(t.Nr(),i);return new Ni(n,s)}function Pi(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function Oi(t,i){var n=Pi(t.Cr(),i),s=Pi(t.Nr(),i);return new Ni(n,s)}function Ri(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Fi(n+i.Br)+i.Ar;return t<0?-s:s}function zi(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Math.pow(10,n-i.Ar)-i.Br;return t<0?-s:s}function Vi(t,i){if(null===t)return null;var n=Ri(t.Cr(),i),s=Ri(t.Nr(),i);return new Ni(n,s)}function Wi(t,i){if(null===t)return null;var n=zi(t.Cr(),i),s=zi(t.Nr(),i);return new Ni(n,s)}function Ii(t){if(null===t)return Ai;var i=Math.abs(t.Nr()-t.Cr());if(i>=1||i<1e-15)return Ai;var n=Math.ceil(Math.abs(Math.log10(i))),s=Ai.Ar+n;return{Ar:s,Br:1/Math.pow(10,s)}}var ji,Hi=function(){function t(t,i){if(this.Dr=t,this.Pr=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Dr))this.Or=[2,2.5,2];else{this.Or=[];for(var n=this.Dr;1!==n;){if(n%2==0)this.Or.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Or.push(2,2.5),n/=5}if(this.Or.length>100)throw new Error("something wrong with base")}}}return t.prototype.Rr=function(t,i,n){for(var s,h,r,e=0===this.Dr?0:1/this.Dr,u=Math.pow(10,Math.max(0,Math.ceil(Fi(t-i)))),o=0,l=this.Pr[0];;){var a=Ti(u,e,1e-14)&&u>e+1e-14,f=Ti(u,n*l,1e-14),c=Ti(u,1,1e-14);if(!(a&&f&&c))break;u/=l,l=this.Pr[++o%this.Pr.length]}if(u<=e+1e-14&&(u=e),u=Math.max(1,u),this.Or.length>0&&(s=u,h=1,r=1e-14,Math.abs(s-h)<r))for(o=0,l=this.Or[0];Ti(u,n*l,1e-14)&&u>e+1e-14;)u/=l,l=this.Or[++o%this.Or.length];return u},t}(),qi=function(){function t(t,i,n,s){this.zr=[],this.Ai=t,this.Dr=i,this.Vr=n,this.Wr=s}return t.prototype.Rr=function(t,i){if(t<i)throw new Error("high < low");var n=this.Ai.li(),s=(t-i)*this.Ir()/n,h=new Hi(this.Dr,[2,2.5,2]),r=new Hi(this.Dr,[2,2,2.5]),e=new Hi(this.Dr,[2.5,2,2]),u=[];return u.push(h.Rr(t,i,s),r.Rr(t,i,s),e.Rr(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(u)},t.prototype.jr=function(){var t=this.Ai,i=t.Wt();if(null!==i){var n=t.li(),s=this.Vr(n-1,i),h=this.Vr(0,i),r=this.Ai.K().entireTextOnly?this.Hr()/2:0,e=r,u=n-1-r,o=Math.max(s,h),l=Math.min(s,h);if(o!==l){for(var a=this.Rr(o,l),f=o%a,c=o>=l?1:-1,v=null,d=0,_=o-(f+=f<0?a:0);_>l;_-=a){var w=this.Wr(_,i,!0);null!==v&&Math.abs(w-v)<this.Ir()||(w<e||w>u||(d<this.zr.length?(this.zr[d].ur=w,this.zr[d].qr=t.Ur(_)):this.zr.push({ur:w,qr:t.Ur(_)}),d++,v=w,t.Yr()&&(a=this.Rr(_*c,l))))}this.zr.length=d}else this.zr=[]}else this.zr=[]},t.prototype.dr=function(){return this.zr},t.prototype.Hr=function(){return this.Ai.V()},t.prototype.Ir=function(){return Math.ceil(2.5*this.Hr())},t}();function Ui(t){return t.slice().sort((function(t,i){return E(t.Yi())-E(i.Yi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(ji||(ji={}));var Yi,Ji=new Ci,$i=new xi(100,1),Ki=function(){function t(t,i,n,s){this.Jr=0,this.$r=null,this.Kr=null,this.Xr=null,this.Zr={Gr:!1,Qr:null},this.te=0,this.ie=0,this.ne=new J,this.se=new J,this.he=[],this.re=null,this.ee=null,this.ue=null,this.oe=null,this.ah=$i,this.le=Ii(null),this.ji=t,this.un=i,this.ae=n,this.fe=s,this.ce=new qi(this,100,this.ve.bind(this),this.de.bind(this))}return t.prototype.qi=function(){return this.ji},t.prototype.K=function(){return this.un},t.prototype.$s=function(t){if($(this.un,t),this._e(),void 0!==t.mode&&this.we({Me:t.mode}),void 0!==t.scaleMargins){var i=L(t.scaleMargins.top),n=L(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+n));this.be(),this.ee=null}},t.prototype.me=function(){return this.un.autoScale},t.prototype.Yr=function(){return 1===this.un.mode},t.prototype.pe=function(){return 2===this.un.mode},t.prototype.ge=function(){return 3===this.un.mode},t.prototype.Me=function(){return{Rn:this.un.autoScale,ye:this.un.invertScale,Me:this.un.mode}},t.prototype.we=function(t){var i=this.Me(),n=null;void 0!==t.Rn&&(this.un.autoScale=t.Rn),void 0!==t.Me&&(this.un.mode=t.Me,2!==t.Me&&3!==t.Me||(this.un.autoScale=!0),this.Zr.Gr=!1),1===i.Me&&t.Me!==i.Me&&(!function(t,i){if(null===t)return!1;var n=zi(t.Cr(),i),s=zi(t.Nr(),i);return isFinite(n)&&isFinite(s)}(this.Kr,this.le)?this.un.autoScale=!0:null!==(n=Wi(this.Kr,this.le))&&this.ke(n)),1===t.Me&&t.Me!==i.Me&&null!==(n=Vi(this.Kr,this.le))&&this.ke(n);var s=i.Me!==this.un.mode;s&&(2===i.Me||this.pe())&&this._e(),s&&(3===i.Me||this.ge())&&this._e(),void 0!==t.ye&&i.ye!==t.ye&&(this.un.invertScale=t.ye,this.xe()),this.se.A(i,this.Me())},t.prototype.Ce=function(){return this.se},t.prototype.V=function(){return this.ae.fontSize},t.prototype.li=function(){return this.Jr},t.prototype.Ne=function(t){this.Jr!==t&&(this.Jr=t,this.be(),this.ee=null)},t.prototype.Se=function(){if(this.$r)return this.$r;var t=this.li()-this.Te()-this.Fe();return this.$r=t,t},t.prototype.Le=function(){return this.Ee(),this.Kr},t.prototype.ke=function(t,i){var n=this.Kr;(i||null===n&&null!==t||null!==n&&!n.yr(t))&&(this.ee=null,this.Kr=t)},t.prototype.et=function(){return this.Ee(),0===this.Jr||!this.Kr||this.Kr.et()},t.prototype.Ae=function(t){return this.ye()?t:this.li()-1-t},t.prototype.jt=function(t,i){return this.pe()?t=Bi(t,i):this.ge()&&(t=Pi(t,i)),this.de(t,i)},t.prototype.Be=function(t,i,n){this.Ee();for(var s=this.Fe(),h=E(this.Le()),r=h.Cr(),e=h.Nr(),u=this.Se()-1,o=this.ye(),l=u/(e-r),a=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.De(),v=a;v<f;v++){var d=t[v],_=d.Nt;if(!isNaN(_)){var w=_;null!==c&&(w=c(d.Nt,i));var M=s+l*(w-r),b=o?M:this.Jr-1-M;d.gt=b}}},t.prototype.Pe=function(t,i,n){this.Ee();for(var s=this.Fe(),h=E(this.Le()),r=h.Cr(),e=h.Nr(),u=this.Se()-1,o=this.ye(),l=u/(e-r),a=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.De(),v=a;v<f;v++){var d=t[v],_=d.open,w=d.high,M=d.low,b=d.close;null!==c&&(_=c(d.open,i),w=c(d.high,i),M=c(d.low,i),b=c(d.close,i));var m=s+l*(_-r),p=o?m:this.Jr-1-m;d.Oe=p,m=s+l*(w-r),p=o?m:this.Jr-1-m,d.Re=p,m=s+l*(M-r),p=o?m:this.Jr-1-m,d.ze=p,m=s+l*(b-r),p=o?m:this.Jr-1-m,d.Ve=p}},t.prototype.cn=function(t,i){var n=this.ve(t,i);return this.We(n,i)},t.prototype.We=function(t,i){var n=t;return this.pe()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.ge()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Ie=function(){return this.he},t.prototype.je=function(){if(this.re)return this.re;for(var t=[],i=0;i<this.he.length;i++){var n=this.he[i];null===n.Yi()&&n.Ji(i+1),t.push(n)}return t=Ui(t),this.re=t,this.re},t.prototype.He=function(t){-1===this.he.indexOf(t)&&(this.he.push(t),this._e(),this.qe())},t.prototype.Ue=function(t){var i=this.he.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.he.splice(i,1),0===this.he.length&&(this.we({Rn:!0}),this.ke(null)),this._e(),this.qe()},t.prototype.Wt=function(){for(var t=null,i=0,n=this.he;i<n.length;i++){var s=n[i].Wt();null!==s&&((null===t||s.Ye<t.Ye)&&(t=s))}return null===t?null:t.qt},t.prototype.ye=function(){return this.un.invertScale},t.prototype.dr=function(){var t=null===this.Wt();if(null!==this.ee&&(t||this.ee.Je===t))return this.ee.dr;this.ce.jr();var i=this.ce.dr();return this.ee={dr:i,Je:t},this.ne.A(),i},t.prototype.$e=function(){return this.ne},t.prototype.Ke=function(t){this.pe()||this.ge()||null===this.ue&&null===this.Xr&&(this.et()||(this.ue=this.Jr-t,this.Xr=E(this.Le()).kr()))},t.prototype.Xe=function(t){if(!this.pe()&&!this.ge()&&null!==this.ue){this.we({Rn:!1}),(t=this.Jr-t)<0&&(t=0);var i=(this.ue+.2*(this.Jr-1))/(t+.2*(this.Jr-1)),n=E(this.Xr).kr();i=Math.max(i,.1),n.Tr(i),this.ke(n)}},t.prototype.Ze=function(){this.pe()||this.ge()||(this.ue=null,this.Xr=null)},t.prototype.Ge=function(t){this.me()||null===this.oe&&null===this.Xr&&(this.et()||(this.oe=t,this.Xr=E(this.Le()).kr()))},t.prototype.Qe=function(t){if(!this.me()&&null!==this.oe){var i=E(this.Le()).Sr()/(this.Se()-1),n=t-this.oe;this.ye()&&(n*=-1);var s=n*i,h=E(this.Xr).kr();h.Fr(s),this.ke(h,!0),this.ee=null}},t.prototype.tu=function(){this.me()||null!==this.oe&&(this.oe=null,this.Xr=null)},t.prototype.oh=function(){return this.ah||this._e(),this.ah},t.prototype.Di=function(t,i){switch(this.un.mode){case 2:return this.oh().format(Bi(t,i));case 3:return this.oh().format(Pi(t,i));default:return this.iu(t)}},t.prototype.Ur=function(t){switch(this.un.mode){case 2:case 3:return this.oh().format(t);default:return this.iu(t)}},t.prototype.nu=function(t){return this.iu(t,E(this.su()).oh())},t.prototype.hu=function(t,i){return t=Bi(t,i),Ji.format(t)},t.prototype.ru=function(){return this.he},t.prototype.eu=function(t){this.Zr={Qr:t,Gr:!1}},t.prototype.Sn=function(){this.he.forEach((function(t){return t.Sn()}))},t.prototype._e=function(){this.ee=null;var t=this.su(),i=100;null!==t&&(i=Math.round(1/t.eh())),this.ah=$i,this.pe()?(this.ah=Ji,i=100):this.ge()?(this.ah=new xi(100,1),i=100):null!==t&&(this.ah=t.oh()),this.ce=new qi(this,i,this.ve.bind(this),this.de.bind(this)),this.ce.jr()},t.prototype.qe=function(){this.re=null},t.prototype.su=function(){return this.he[0]||null},t.prototype.Te=function(){return this.ye()?this.un.scaleMargins.bottom*this.li()+this.ie:this.un.scaleMargins.top*this.li()+this.te},t.prototype.Fe=function(){return this.ye()?this.un.scaleMargins.top*this.li()+this.te:this.un.scaleMargins.bottom*this.li()+this.ie},t.prototype.Ee=function(){this.Zr.Gr||(this.Zr.Gr=!0,this.uu())},t.prototype.be=function(){this.$r=null},t.prototype.de=function(t,i){if(this.Ee(),this.et())return 0;t=this.Yr()&&t?Ri(t,this.le):t;var n=E(this.Le()),s=this.Fe()+(this.Se()-1)*(t-n.Cr())/n.Sr();return this.Ae(s)},t.prototype.ve=function(t,i){if(this.Ee(),this.et())return 0;var n=this.Ae(t),s=E(this.Le()),h=s.Cr()+s.Sr()*((n-this.Fe())/(this.Se()-1));return this.Yr()?zi(h,this.le):h},t.prototype.xe=function(){this.ee=null,this.ce.jr()},t.prototype.uu=function(){var t=this.Zr.Qr;if(null!==t){for(var i,n,s=null,h=0,r=0,e=0,u=this.ru();e<u.length;e++){var o=u[e];if(o.Vt()){var l=o.Wt();if(null!==l){var a=o.uh(t.ou(),t.lu()),f=a&&a.Le();if(null!==f){switch(this.un.mode){case 1:f=Vi(f,this.le);break;case 2:f=Di(f,l.qt);break;case 3:f=Oi(f,l.qt)}if(s=null===s?f:s.Jn(E(f)),null!==a){var c=a.au();null!==c&&(h=Math.max(h,c.above),r=Math.max(h,c.below))}}}}}if(h===this.te&&r===this.ie||(this.te=h,this.ie=r,this.ee=null,this.be()),null!==s){if(s.Cr()===s.Nr()){var v=this.su(),d=5*(null===v||this.pe()||this.ge()?1:v.eh());this.Yr()&&(s=Wi(s,this.le)),s=new Ni(s.Cr()-d,s.Nr()+d),this.Yr()&&(s=Vi(s,this.le))}if(this.Yr()){var _=Wi(s,this.le),w=Ii(_);if(i=w,n=this.le,i.Ar!==n.Ar||i.Br!==n.Br){var M=null!==this.Xr?Wi(this.Xr,this.le):null;this.le=w,s=Vi(_,w),null!==M&&(this.Xr=Vi(M,w))}}this.ke(s)}else null===this.Kr&&(this.ke(new Ni(-.5,.5)),this.le=Ii(null));this.Zr.Gr=!0}},t.prototype.De=function(){var t=this;return this.pe()?Bi:this.ge()?Pi:this.Yr()?function(i){return Ri(i,t.le)}:null},t.prototype.iu=function(t,i){return void 0===this.fe.priceFormatter?(void 0===i&&(i=this.oh()),i.format(t)):this.fe.priceFormatter(t)},t}();!function(t){t.fu="default",t.cu="crosshair",t.vu="pointer",t.du="grabbing",t._u="zoom-in",t.wu="n-resize",t.Mu="e-resize",t.bu="nesw-resize",t.mu="nwse-resize",t.pu="not-allowed"}(Yi||(Yi={}));var Xi=function(){function t(t,i){this.he=[],this.gu=new Map,this.Jr=0,this.yu=0,this.ku=1e3,this.re=null,this.xu=new J,this.Cu=t,this.Ri=i,this.Nu=new gi(this);var n=i.K();this.Su=this.Tu("left",n.leftPriceScale),this.Fu=this.Tu("right",n.rightPriceScale),this.Su.Ce().C(this.Lu.bind(this,this.Su),this),this.Fu.Ce().C(this.Lu.bind(this,this.Su),this),this.Eu(n)}return t.prototype.Eu=function(t){if(t.leftPriceScale&&this.Su.$s(t.leftPriceScale),t.rightPriceScale&&this.Fu.$s(t.rightPriceScale),t.localization&&(this.Su._e(),this.Fu._e()),t.overlayPriceScales)for(var i=0,n=Array.from(this.gu.values());i<n.length;i++){var s=E(n[i][0].Ht());s.$s(t.overlayPriceScales),t.localization&&s._e()}},t.prototype.Au=function(t){switch(t){case"left":return this.Su;case"right":return this.Fu}return this.gu.has(t)?L(this.gu.get(t))[0].Ht():null},t.prototype.D=function(){this.ri().Bu().L(this),this.Su.Ce().L(this),this.Fu.Ce().L(this),this.he.forEach((function(t){t.D&&t.D()})),this.xu.A()},t.prototype.Du=function(){return this.ku},t.prototype.Pu=function(t){this.ku=t},t.prototype.ri=function(){return this.Ri},t.prototype.oi=function(){return this.yu},t.prototype.li=function(){return this.Jr},t.prototype.Ou=function(t){this.yu=t,this.Ru()},t.prototype.Ne=function(t){var i=this;this.Jr=t,this.Su.Ne(t),this.Fu.Ne(t),this.he.forEach((function(n){if(i.zu(n)){var s=n.Ht();null!==s&&s.Ne(t)}})),this.Ru()},t.prototype.Ie=function(){return this.he},t.prototype.zu=function(t){var i=t.Ht();return null===i||this.Su!==i&&this.Fu!==i},t.prototype.He=function(t,i,n){var s=void 0!==n?n:this.Wu().Vu+1;this.Iu(t,i,s)},t.prototype.Ue=function(t){var i=this.he.indexOf(t);F(-1!==i,"removeDataSource: invalid data source"),this.he.splice(i,1);var n=E(t.Ht()).qi();if(this.gu.has(n)){var s=L(this.gu.get(n)),h=s.indexOf(t);-1!==h&&(s.splice(h,1),0===s.length&&this.gu.delete(n))}var r=t.Ht();r&&r.Ie().indexOf(t)>=0&&r.Ue(t),null!==r&&(r.qe(),this.ju(r)),this.re=null},t.prototype.Hu=function(){return this.he.filter((function(t){return t instanceof Kt})).map((function(t){return t}))},t.prototype.qu=function(t){var i=this.he.filter((function(i){return i instanceof Kt&&i.qi()===t})).map((function(t){return t}));return i.length>0?i[0]:null},t.prototype.Uu=function(){return this.he.filter((function(t){return t instanceof Kt&&t.Qn()})).map((function(t){return t}))},t.prototype.Yu=function(t){return t===this.Su?"left":t===this.Fu?"right":"overlay"},t.prototype.Ju=function(){return this.Su},t.prototype.Ys=function(){return this.Fu},t.prototype.$u=function(t,i){t.Ke(i)},t.prototype.Ku=function(t,i){t.Xe(i),this.Ru()},t.prototype.Xu=function(t){t.Ze()},t.prototype.Zu=function(t,i){t.Ge(i)},t.prototype.Gu=function(t,i){t.Qe(i),this.Ru()},t.prototype.Qu=function(t){t.tu()},t.prototype.Ru=function(){this.he.forEach((function(t){t.Sn()}))},t.prototype.fn=function(){var t=null;return this.Ri.K().rightPriceScale.visible&&0!==this.Fu.Ie().length?t=this.Fu:this.Ri.K().leftPriceScale.visible&&0!==this.Su.Ie().length?t=this.Su:0!==this.he.length&&(t=this.he[0].Ht()),null===t&&(t=this.Fu),t},t.prototype.io=function(){var t=null;return this.Ri.K().rightPriceScale.visible?t=this.Fu:this.Ri.K().leftPriceScale.visible&&(t=this.Su),t},t.prototype.ju=function(t){null!==t&&t.me()&&this.no(t)},t.prototype.so=function(t){var i=this.Cu.es();t.we({Rn:!0}),null!==i&&t.eu(i),this.Ru()},t.prototype.ho=function(){this.no(this.Su),this.no(this.Fu)},t.prototype.ro=function(){var t=this;this.ju(this.Su),this.ju(this.Fu),this.he.forEach((function(i){t.zu(i)&&t.ju(i.Ht())})),this.Ru(),this.Ri.eo()},t.prototype.je=function(){return null===this.re&&(this.re=Ui(this.he)),this.re},t.prototype.uo=function(){return this.xu},t.prototype.oo=function(){return this.Nu},t.prototype.no=function(t){var i=t.ru();if(i&&i.length>0&&!this.Cu.et()){var n=this.Cu.es();null!==n&&t.eu(n)}t.Sn()},t.prototype.Wu=function(){var t=this.je();if(0===t.length)return{lo:0,Vu:0};for(var i=0,n=0,s=0;s<t.length;s++){var h=t[s].Yi();null!==h&&(h<i&&(i=h),h>n&&(n=h))}return{lo:i,Vu:n}},t.prototype.Iu=function(t,i,n){var s=this.Au(i);if(null===s&&(s=this.Tu(i,this.Ri.K().overlayPriceScales)),this.he.push(t),!St(i)){var h=this.gu.get(i)||[];h.push(t),this.gu.set(i,h)}s.He(t),t.$i(s),t.Ji(n),this.ju(s),this.re=null},t.prototype.Lu=function(t,i,n){i.Me!==n.Me&&this.no(t)},t.prototype.Tu=function(t,i){var n=U({visible:!0,autoScale:!0},Q(i)),s=new Ki(t,n,this.Ri.K().layout,this.Ri.K().localization);return s.Ne(this.li()),s},t}(),Zi=function(t){function i(i,n,s,h){var r=t.call(this,i,n)||this;return r.Mh=s,r.ao=h,r}return q(i,t),i.prototype.clone=function(){return new i(this.x,this.y,this.Mh,this.ao)},i}(s),Gi=function(){function t(t){this.dt=void 0!==t?t:null}return t.prototype._t=function(t){this.dt=t},t.prototype.fo=function(t){this.dt=$(this.dt,t)},t.prototype.ot=function(t,i,n,s){if(null!==this.dt&&this.dt.Vt){for(var h=[],r=[],e=[],u=[],o=0;o<this.dt.Ps.length;++o){var l=this.dt.Ps[o],a=this.dt.co[o];l.ao?(h.push(l),r.push(a)):(e.push(l),u.push(a))}t.strokeStyle=this.dt.j,h.length&&this.vo(t,i,h,r,nn,tn),e.length&&this.vo(t,i,e,u,hn,sn)}},t.prototype.lt=function(t,i){if(null===this.dt)return null;for(var n=new s(t,i),h=0;h<this.dt.Ps.length;++h){var r=this.dt.Ps[h];if(r.subtract(n).length()<=this.dt.kt+ti){var e=void 0!==this.dt.do?this.dt.do[h]:Yi.fu,u=r.Mh;return new Gt(this.dt._o,{wo:u,Mo:e})}}return null},t.prototype.vo=function(t,i,n,s,h,r){var e=E(this.dt),u=e.bo,o=Math.max(1,Math.floor((e.mo||2)*i));e.Qn&&(o+=Math.max(1,Math.floor(i/2)));var l=Math.max(1,Math.floor(i)),a=Math.round(e.kt*i*2);i%2!=l%2&&(a+=1);for(var f=l%2/2,c=0;c<n.length;++c){var v=n[c];if(t.fillStyle=s[c],!Number.isInteger(v.Mh)||e.po!==v.Mh){var d=Math.round(v.x*i)+f,_=Math.round(v.y*i)+f;if(h(t,new Zi(d,_,v.Mh,v.ao),a/2,o),v.subtract(u).length()<=e.kt+ti){var w=Math.max(1,Math.floor(e.yo*i));r(t,new Zi(d,_,v.Mh,v.ao),a/2,w)}}}},t}();function Qi(t,i,n,s){t.lineWidth=s;var h=n+s/2;ni(t,i.x-h,i.y-h,2*h,2*h,(n+s)/2),t.closePath()}function tn(t,i,n,s){t.globalAlpha=.2,Qi(t,i,n,s),t.stroke(),t.globalAlpha=1}function nn(t,i,n,s){Qi(t,i,n-s,s),t.fill(),t.stroke()}function sn(t,i,n,s){t.lineWidth=s,t.globalAlpha=.2,t.beginPath(),t.arc(i.x,i.y,n+s/2,0,2*Math.PI,!0),t.closePath(),t.stroke(),t.globalAlpha=1}function hn(t,i,n,s){t.lineWidth=s,t.beginPath(),t.arc(i.x,i.y,n-s/2,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()}var rn=function(){function t(t,i){this.Fs=[],this.ls=!0,this.ko=null,this.xo=null,this.Co=[],this.Kn=null,this.No=[],this.Zn=t,this.Gn=i}return t.prototype.So=function(t,i,n,h){if(h&&(this.Kn&&this.Kn.lt||!this.Zn.As())){var r=this.Gn.To(),e=new s(r.ai(),r.fi()),u=new s(r.bn(),r.mn()),o=11!==n||h.Fo?9===n?this.Lo(t,i,u,e,h):6===n?this.Eo(t,i,u,e,h):10===n&&this.Ao(t):this.Bo(t,i,u,e,h);h.Fo||(h.Fo=this.Zn.Qs()||!this.Zn.As()),(o||this.Zn.Xs()||this.Zn.Qs()||!this.Zn.As())&&this.Do()}},t.prototype.Dt=function(t,i,n){return this.ls&&this.fs(t,i),this.Zn.Vt()?this.Kn:null},t.prototype.jt=function(t){var i=this.Zn.Ht(),n=this.Zn.us();if(null===i)return null;var s=null!==n?n.Wt():null;return null===s?null:i.jt(t,s.qt)},t.prototype.bo=function(){var t=this.Gn.To();return new s(t.bn(),t.mn())},t.prototype.po=function(){return this.Zn.Qs()?this.xo:null},t.prototype.Po=function(){return this.Zn.Xs()||this.Zn.Qn()||this.Zn.Qs()||!this.Zn.As()},t.prototype.At=function(){this.ls=!0},t.prototype.Oo=function(t){t.st(this.Ro({Ps:this.Fs},0))},t.prototype.Do=function(){var t=this;this.Co.forEach((function(i){i.fo({Ps:t.Fs,Qn:t.Zn.Qn(),Vt:t.Po(),bo:t.bo(),po:t.po()})})),this.Gn.Ds(this.Zn),this.Zn.Sn()},t.prototype.Ro=function(t,i){var n=this.zo(i);return n._t(U(U({},t),{kt:6,mo:1,j:"#1E53E5",yo:4,Qn:this.Zn.Qn(),Vt:this.Po(),bo:this.bo(),co:this.Vo(t.Ps),po:this.Zn.Qs()?this.po():null,_o:Zt.gh})),n},t.prototype.Wo=function(t,i,n){var s=t.qs().qu(n);if(null!==s){var h=Q(s.dh());this.Gn.Io(h,i)}},t.prototype.Ao=function(t){if(this.Zn.As()){if(this.Zn.Qs()){this.Gn.Ho().jo(),this.qo(),this.ko=null,this.xo=null,this.Zn.th(!1),this.Zn.nh(!1);i=this.Zn.qi();return this.Wo(t,"lineToolEdited",i),!0}}else{this.Zn.Bs();var i=this.Zn.qi();this.Zn.Qs()||this.Zn.ih()?this.Zn.As()&&this.Wo(t,"pathFinished",i):this.Wo(t,"lineToolFinished",i)}return!1},t.prototype.Bo=function(t,i,n,s,h){var r;if(!this.Zn.As())return this.Zn.hh()&&this.Zn.Os(this.Zn.js(s)),!1;if(!this.Zn.Qn())return!1;if(this.Zn.Qs()){if(t.Uo(null!==this.xo?Yi.fu:Yi.du),null!==this.xo)this.Yo(s,h,!0,n),this.Zn.zs(this.xo,this.Zn.js(s));else if(this.ko){var e=s.subtract(this.ko);this.Fs.forEach((function(t){t.x=t.x+e.x,t.y=t.y+e.y})),this.ko=s,this.qo()}}else{var u=this.Ch(t,i,n),o=null==u?void 0:u.Mh();this.Zn.th(this.Zn.Xs()||!!u),this.ko=s,this.xo=null!==(r=null==o?void 0:o.wo)&&void 0!==r?r:this.xo,o&&this.Gn.Ho().Jo()}return!1},t.prototype.Lo=function(t,i,n,s,h){var r,e,u,o;if(this.Zn.As()){var l=this.Ch(t,i,n),a=this.Zn.Zs(null!==l&&!h.Fo);return this.Zn.Xs()&&!h.Fo&&(!0===this.Zn.K().editable?(t.Uo((null===(r=null==l?void 0:l.Mh())||void 0===r?void 0:r.Mo)||Yi.vu),this.xo=null!==(u=null===(e=null==l?void 0:l.Mh())||void 0===e?void 0:e.wo)&&void 0!==u?u:null):t.Uo((null===(o=null==l?void 0:l.Mh())||void 0===o?void 0:o.Mo)||Yi.pu)),a}return this.Zn.rh()&&this.Gn.Ho().Jo(),this.Yo(s,h,!1,n),this.Zn.Ws(this.Zn.js(s)),!1},t.prototype.Eo=function(t,i,n,s,h){if(this.No=this.Fs,this.Zn.As()){if(!0===this.Zn.K().editable){var r=this.Ch(t,i,n);return this.Zn.Gs(null!==r&&!h.Fo)}return!1}return this.Yo(s,h,!1,n),this.Zn.Os(this.Zn.js(s)),!1},t.prototype.qo=function(){var t=this;this.Zn.Vs(this.Fs.map((function(i){return t.Zn.js(i)})))},t.prototype.Ch=function(t,i,n){var s;return(null===(s=this.Kn)||void 0===s?void 0:s.lt)?this.Kn.lt(n.x,n.y,i):null},t.prototype.Vo=function(t){var i=this,n=E(this.Gn.$o(this.Zn)).li();return t.map((function(t){return i.Gn.Yt(t.y/n)}))},t.prototype.fs=function(t,i){if(this.ls=!1,!this.Gn.Rt().et()&&this.Ko()){this.Fs=[];for(var n=this.Zn.Ps(),s=0;s<n.length;s++){var h=this.Zn.Is(n[s]);if(!h)return;h.Mh=s,this.Fs.push(h)}}},t.prototype.Ko=function(){var t=this.Zn.Ht();return null!==t&&!t.et()},t.prototype.zo=function(t){for(;this.Co.length<=t;)this.Co.push(new Gi);return this.Co[t]},t.prototype.Yo=function(t,i,n,s){var h=this.Xo(),r=String(this.Zn.sh());if(!0===i.Zo&&!0===h&&this.Fs.length>0)if(n)if(1===this.xo)t.y=this.Fs[0].y;else if(0===this.xo)t.y=this.Fs[1].y;else if(2===this.xo){var e=this.Fs[0].y-this.Fs[1].y;t.y=this.Fs[2].y-e}else 3===this.xo&&(t.y=this.Fs[2].y);else!0===i.Zo&&!0===h&&this.Fs.length>0&&(t.y=this.Fs[0].y);"FibRetracement"===r&&!0===i.Zo&&2===this.Fs.length&&null!==this.xo&&2===this.No.length&&(t.y=this.No[this.xo].y),"Rectangle"===r&&!0===i.Zo&&2===this.Fs.length&&null!==this.xo&&2===this.No.length&&(0===this.xo||3===this.xo?t.y=this.No[0].y:1!==this.xo&&2!==this.xo||(t.y=this.No[1].y)),"PriceRange"===r&&!0===i.Zo&&2===this.Fs.length&&null!==this.xo&&2===this.No.length&&(0===this.xo||3===this.xo?t.y=this.No[0].y:1!==this.xo&&2!==this.xo||(t.y=this.No[1].y))},t.prototype.Xo=function(){var t=!1,i=String(this.Zn.sh());return"TrendLine"!==i&&"Ray"!==i&&"Arrow"!==i&&"ExtendedLine"!==i&&"ParallelChannel"!==i||(t=!0),t},t}(),en=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Go=new ii,s.Qo=new ri,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){this.Kn=null,this.ls=!1;var i=this.Zn.Ht(),n=this.Gn.Rt();if(i&&!i.et()&&!n.et()){var h=n.tl();if(null!==h){var r=this.Zn.Ps();if(!(r.length<2)){var e=this.Zn.K();if(!(Math.max(r[0].timestamp,r[1].timestamp)<h.from.vs)||e.line.extend.left||e.line.extend.right){if(t.prototype.fs.call(this),this.Fs.length<2)return;var u=new rt;if(this.Go._t({Sh:e.line,Ps:this.Fs}),u.st(this.Go),e.text.value){var o=this.Fs[0],l=this.Fs[1],a=o.x<l.x?o:l,f=a===o?l:o,c=Math.atan((f.y-a.y)/(f.x-a.x))/Math.PI*-180,v=e.text.box.alignment.horizontal,d="left"===v?a.clone():"right"===v?f.clone():new s((o.x+l.x)/2,(o.y+l.y)/2),_=Xt(e.text);_.box=U(U({},_.box),{angle:c}),this.Qo._t({wi:_,Ps:[d]}),u.st(this.Qo)}this.Oo(u),this.Kn=u}}}}},i}(rn),un=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="TrendLine",h._h([new en(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 2},i}(Kt),on=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Us="Arrow",i}return q(i,t),i}(un),ln=function(t){function i(i){var n=t.call(this)||this;return n.il=new Gt(Zt.ph),n.Ch=i||new Gt(Zt.mh),n.dt=null,n}return q(i,t),i.prototype._t=function(t){this.dt=t},i.prototype.lt=function(t,i){if(null===this.dt)return null;var n=this.dt.Sh.width||1,h=new s(t,i),r=Math.max(Qt,Math.ceil(n/2)),e=this.dt.Ps.length;if(1===e)return function(t,i,n){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)<=n*n}(h,this.dt.Ps[0],r)?this.Ch:null;for(var u=1;u<e;u++)if(d(this.dt.Ps[u-1],this.dt.Ps[u],h)._<=r)return this.Ch;return this.dt.m&&e>0&&d(this.dt.Ps[0],this.dt.Ps[e-1],h)._<=r?this.Ch:this.dt.m&&w(h,this.dt.Ps)?this.il:null},i.prototype.ft=function(t,i,n){var s,h;if(null!==this.dt&&this.dt.Ps&&this.dt.Ps.length){var r=this.dt.Ps.length,e=this.dt.Sh.style||0,u=this.dt.Sh.join||"round",o=this.dt.Sh.cap||"butt",l=this.dt.Sh.color||"white",a=this.dt.Sh.width||1;if(1===r)return this.nl(t,this.dt.Ps[0],r/2,l);t.beginPath(),t.lineCap=o,t.lineJoin=u,t.lineWidth=a,t.strokeStyle=l,g(t,e),t.moveTo(this.dt.Ps[0].x,this.dt.Ps[0].y);for(var f=0,c=this.dt.Ps;f<c.length;f++){var v=c[f];t.lineTo(v.x,v.y)}if(this.dt.m&&(t.fillStyle=this.dt.m.color,t.fill()),a>0&&t.stroke(),r>1){var d;if("butt"!==o&&(t.lineCap="butt"),1===(null===(s=this.dt.Sh.end)||void 0===s?void 0:s.left))T((d=this.sl(this.dt.Ps[1],this.dt.Ps[0],a,o))[0],d[1],t,a,1);if(1===(null===(h=this.dt.Sh.end)||void 0===h?void 0:h.right))T((d=this.sl(this.dt.Ps[r-2],this.dt.Ps[r-1],a,o))[0],d[1],t,a,1)}}},i.prototype.nl=function(t,i,n,s){0===n&&(t.beginPath(),t.fillStyle=s,t.arc(i.x,i.y,n,0,2*Math.PI,!0),t.fill(),t.closePath())},i.prototype.sl=function(t,i,n,s){var h=i.subtract(t),r=h.length();if("butt"===s||r<1)return[t,i];var e=r+n/2;return[t,h.scaled(e/r).add(t)]},i}(et),an=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.hl=new ln,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){if(t.prototype.fs.call(this),this.Kn=null,0!==this.Fs.length){for(var i=this.Zn.rl(),n=Math.max(1,this.Zn.el()),s=[this.Fs[0]],h=1;h<this.Fs.length;h++){for(var r=this.Fs[h].subtract(this.Fs[h-1]),e=r.length(),u=Math.min(5,Math.floor(e/n)),o=r.normalized().scaled(e/u),l=0;l<u-1;l++)s.push(this.Fs[h-1].add(o.scaled(l)));s.push(this.Fs[h])}var a=this.ul(s,n);this.hl._t({Sh:i.line,m:i.background,Ps:a});var f=new rt;f.st(this.hl),this.Kn=f}},i.prototype.ul=function(t,i){var n=new Array(t.length);if(1===t.length)return t;for(var h=0;h<t.length;h++){for(var r=new s(0,0),e=0;e<i;e++){var u=Math.max(h-e,0),o=Math.min(h+e,t.length-1);r=(r=r.add(t[u])).add(t[o])}n[h]=r.scaled(.5/i)}return n.push(t[t.length-1]),n},i}(rn),fn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Brush",h._h([new an(h,i)]),h}return q(i,t),i.prototype.Es=function(){return-1},i.prototype.el=function(){return 5},i.prototype.rl=function(){return this.K()},i.prototype.Os=function(i){if(!this.xs){if(this.Ts=null,this.Fs.length>0){var n=this.Fs[this.Fs.length-1],s=E(this.Is(n));if(E(this.Is(i)).subtract(s).length()<2)return}return t.prototype.Os.call(this,i)}},i.prototype.rh=function(){return!1},i.prototype.hh=function(){return!0},i}(Kt),cn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Go=new ii,s.Qo=new ri,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){this.Kn=null,this.ls=!1;var i=this.Zn.Ht(),n=this.Gn.Rt();if(i&&!i.et()&&!n.et()){var s=n.tl();if(null!==s){var h=this.Zn.Ps();if(!(h.length<2)){var r=this.Zn.K();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.vs)||r.line.extend.left||r.line.extend.right){if(t.prototype.fs.call(this),this.Fs.length<2)return;var e=new rt;if(this.Go._t({Sh:r.line,Ps:this.Fs}),e.st(this.Go),r.text.value){var u=this.Fs[1].clone(),o=Xt(r.text);o.box=U(U({},o.box),{angle:0}),this.Qo._t({wi:o,Ps:[u]}),e.st(this.Qo)}this.Oo(e),this.Kn=e}}}}},i}(rn),vn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Callout",h._h([new cn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 2},i}(Kt),dn=function(){function t(t,i){this.il=i||new Gt(Zt.ph),this.Ch=t||new Gt(Zt.mh),this.dt=null}return t.prototype._t=function(t){this.dt=t},t.prototype.lt=function(t,i,n){if(null===this.dt||this.dt.points.length<2)return null;var h=new s(t,i),r=this.dt.points,e=r[0],u=r[1],o=Math.sqrt(Math.pow(e.x-h.x,2)+Math.pow(e.y-h.y,2)),l=_n(e,u),a=this.ol(1);return o>=l+a-12&&o<=l+a||o<=24?this.Ch:null},t.prototype.ot=function(t,i,n,s){var h;if(!(this.ll()||null===this.dt||this.dt.points.length<2)){t.save();var r=this.ol(i),e=this.dt.points,u=e[0],o=e[1],l=this.al(u),a=l[0],f=l[1],c=this.dt.background,v=null===(h=this.dt.border)||void 0===h?void 0:h.color;this.fl(t,a,f,this.cl(u,o),null==c?void 0:c.color),this.vl(t,a,f,this.cl(u,o),r,v,void 0!==v),t.restore()}},t.prototype.ll=function(){var t,i,n,s;return null===this.dt||this.dt.points.length<2||((null===(i=null===(t=this.dt)||void 0===t?void 0:t.border)||void 0===i?void 0:i.width)||0)<=0&&!(null===(s=null===(n=this.dt)||void 0===n?void 0:n.background)||void 0===s?void 0:s.color)},t.prototype.ol=function(t){var i,n,s=(null===(n=null===(i=this.dt)||void 0===i?void 0:i.border)||void 0===n?void 0:n.width)||0;return s?Math.max(1,Math.floor(s*t)):0},t.prototype.al=function(t){return[t.x,t.y]},t.prototype.cl=function(t,i){return _n(t,i)},t.prototype.fl=function(t,i,n,s,h){void 0!==h&&(t.fillStyle=h,t.beginPath(),t.arc(i,n,s,0,2*Math.PI),t.fill())},t.prototype.vl=function(t,i,n,s,h,r,e){var u,o;e&&void 0!==r&&h>0&&(t.beginPath(),g(t,(null===(o=null===(u=this.dt)||void 0===u?void 0:u.border)||void 0===o?void 0:o.style)||0),t.arc(i,n,s,0,2*Math.PI),t.lineWidth=h,t.strokeStyle=r,t.stroke())},t}();function _n(t,i){var n=i.x-t.x,s=i.y-t.y;return Math.sqrt(n*n+s*s)}var wn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.dl=new dn,s.Qo=new ri,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){this.Kn=null,this.ls=!1;var i=this.Zn.Ht(),n=this.Gn.Rt();if(i&&!i.et()&&!n.et()){var s=n.tl();if(null!==s){var h=this.Zn.Ps();if(!(h.length<2)){var r=this.Zn.K();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.vs)||r.circle.extend.left||r.circle.extend.right){if(t.prototype.fs.call(this),this.Fs.length<2)return;var e=new rt;this.dl._t(U(U({},Xt(r.circle)),{points:this.Fs,hitTestBackground:!1})),e.st(this.dl);var u=this.Fs[0],o=this.Fs[1];if(r.text.value){var l=_n(u,o),a=u.x-l,f=u.x+l,c=u.y-l,v=u.y+l,d=u.clone(),_=r.text.font.size/3,w=0;switch(r.text.box.alignment.vertical){case"middle":d.y=(c+v)/2,w=_;break;case"top":d.y=c;break;case"bottom":d.y=v}switch(r.text.box.alignment.horizontal){case"center":d.x=(a+f)/2;break;case"left":d.x=a;break;case"right":d.x=f}var M=Xt(r.text);M.box=U(U({},M.box),{padding:{y:_,x:w}}),"middle"===r.text.box.alignment.vertical&&(M.box.maxHeight=v-c),this.Qo._t({wi:M,Ps:[d]}),e.st(this.Qo)}this._l(u,o,e),this.Kn=e}}}}},i.prototype._l=function(t,i,n){var s={Ps:[new Zi(t.x,t.y,0,!1),new Zi(i.x,i.y,1,!1)],do:[Yi.fu,Yi.mu]};n.st(this.Ro(s,0))},i}(rn),Mn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Circle",h._h([new wn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 2},i.prototype.zs=function(i,n){switch(i<2&&t.prototype.zs.call(this,i,n),i){case 2:this.Fs[1].price=n.price,this.Fs[0].timestamp=n.timestamp;break;case 3:this.Fs[0].price=n.price,this.Fs[1].timestamp=n.timestamp;break;case 4:this.Fs[0].timestamp=n.timestamp;break;case 5:this.Fs[1].timestamp=n.timestamp;break;case 6:this.Fs[0].price=n.price;break;case 7:this.Fs[1].price=n.price}},i.prototype.Rs=function(i){return i<2?t.prototype.Rs.call(this,i):this.wl(i)},i.prototype.wl=function(t){var i=this.Ps()[0],n=this.Ps()[1];return[{Nt:i.price,vs:i.timestamp},{Nt:n.price,vs:n.timestamp},{Nt:n.price,vs:i.timestamp},{Nt:i.price,vs:n.timestamp},{Nt:(n.price+i.price)/2,vs:i.timestamp},{Nt:(n.price+i.price)/2,vs:n.timestamp},{Nt:i.price,vs:(n.timestamp+i.timestamp)/2},{Nt:n.price,vs:(n.timestamp+i.timestamp)/2}][t]},i}(Kt),bn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Ml=new ii,s.bl=new ii,s.Kn=null,s.Ml.Nh(new Gt(Zt.mh)),s.bl.Nh(new Gt(Zt.mh)),s}return q(i,t),i.prototype.fs=function(i,n){this.Kn=null;var s=this.Zn.Ht(),h=this.Gn.Rt();if(s&&!s.et()&&!h.et()&&!(this.Zn.Ps().length<1)){t.prototype.fs.call(this);var r=this.Zn.K();if(!(this.Fs.length<1)){var e=this.Fs[0],u=new Zi(e.x,i,0),o=new Zi(e.x,0,1),l=new Zi(0,e.y,0),a=new Zi(n,e.y,1),f={ou:!1,lu:!1},c={ou:0,lu:0},v=new rt;this.Ml._t({Sh:U(U({},Xt(r.line)),{end:c,extend:f}),Ps:[u,o]}),this.bl._t({Sh:U(U({},Xt(r.line)),{end:c,extend:f}),Ps:[l,a]}),v.st(this.Ml),v.st(this.bl),this.Oo(v),this.Kn=v}}},i}(rn),mn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="CrossLine",h._h([new bn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 1},i.prototype._s=function(){return this.K().line.color},i.prototype.os=function(){return this.K().line.color},i}(Kt),pn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Us="ExtendedLine",i}return q(i,t),i}(un),gn=function(){function t(t,i){this.il=i||new Gt(Zt.ph),this.Ch=t||new Gt(Zt.mh),this.dt=null}return t.prototype._t=function(t){this.dt=t},t.prototype.lt=function(t,i,n){if(null===this.dt||this.dt.points.length<2)return null;var h=n.canvas.ownerDocument&&n.canvas.ownerDocument.defaultView&&n.canvas.ownerDocument.defaultView.devicePixelRatio||1,r=n.canvas.width,e=new s(t,i),u=this.ml(h),o=u[0],l=u[1],a=new s(l.x,o.y),f=new s(o.x,l.y),c=this.pl(e,o,a,r);if(null!==c)return c;var v=this.pl(e,f,l,r);if(null!==v)return v;var d=this.gl(e,o,l,r);return this.dt.hitTestBackground&&null!==d?d:null},t.prototype.ot=function(t,i,n,s){var h,r,e,u,o,l,a,f=(null===(r=null===(h=this.dt)||void 0===h?void 0:h.border)||void 0===r?void 0:r.width)||0,c=null===(u=null===(e=this.dt)||void 0===e?void 0:e.border)||void 0===u?void 0:u.color,v=null===(l=null===(o=this.dt)||void 0===o?void 0:o.background)||void 0===l?void 0:l.color;if(!(null===this.dt||this.dt.points.length<2||f<=0&&!v)){t.save();var d=f?Math.max(1,Math.floor(f*i)):0,_=(null===(a=this.dt.border)||void 0===a?void 0:a.style)||0,w=this.ml(i),M=w[0],b=w[1],m=this.dt.extend||{};si(t,M,b,v,c,d,_,"center",!!m.left,!!m.right,t.canvas.width),t.restore()}},t.prototype.ml=function(t){var i=E(this.dt).points,n=i[0],h=i[1],r=Math.min(n.x,h.x),e=Math.max(n.x,h.x),u=Math.min(n.y,h.y),o=Math.max(n.y,h.y),l=Math.round(r*t),a=Math.round(e*t),f=Math.round(u*t),c=Math.round(o*t);return[new s(l,f),new s(a,c)]},t.prototype.yl=function(t,i,n){var h,r,u=E(this.dt);if(e(t,i))return null;var o=Math.min(t.x,i.x),l=Math.max(t.x,i.x),a=(null===(h=u.extend)||void 0===h?void 0:h.left)?0:Math.max(o,0),f=(null===(r=u.extend)||void 0===r?void 0:r.right)?n:Math.min(l,n);return a>f||f<=0||a>=n?null:[new s(a,t.y),new s(f,i.y)]},t.prototype.pl=function(t,i,n,s){var h=this.yl(i,n,s);return null!==h&&d(h[0],h[1],t)._<=3?this.Ch:null},t.prototype.gl=function(t,i,n,s){var r=this.yl(i,n,s);return null!==r&&_(t,new h(r[0],r[1]))?this.il:null},t}(),yn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.kl=[],s.xl=[],s.Cl=[],s.Kn=null,s}return q(i,t),i.prototype.fs=function(){this.Kn=null,this.ls=!1;var i=this.Zn.Ht(),n=this.Gn.Rt();if(i&&!i.et()&&!n.et()){var s=n.tl();if(null!==s){var h=this.Zn.Ps();if(!(h.length<2)){var r=this.Zn.K();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.vs)||r.extend.left||r.extend.right){if(t.prototype.fs.call(this),this.Fs.length<2)return;for(var e=new rt,u=Math.min(this.Fs[0].x,this.Fs[1].x),o=Math.max(this.Fs[0].x,this.Fs[1].x),l=this.Nl(this.Zn.Ps()[0].price,this.Zn.Ps()[1].price,r.levels),a="",f=function(t,i,n){for(var s=0;s<t.length;s++)if(t[s][i]===n)return s;return-1},c=0,v=-1;c<l.length;c++,v++){if(r.levels[c].distanceFromCoeffEnabled){var d=f(r.levels,"coeff",r.levels[c].distanceFromCoeff);if(d>=0){var _=Number(l[d].Nt),w=Number(l[c].Nt),M=Math.abs(w-_);M>0&&(a=">>>>"+M+" from "+r.levels[d].coeff+" line")}}this.Cl[c]||(this.Cl.push(new ii),this.xl.push(new ri));var b=[new Zi(u,l[c].bi,0),new Zi(o,l[c].bi,0)];this.Cl[c]._t({Sh:U(U({},r.line),{extend:r.extend,color:r.levels[c].color}),Ps:b}),this.xl[c]._t({wi:{alignment:"right",value:"".concat(r.levels[c].coeff,"(").concat(l[c].Nt,")").concat(a),font:{color:r.levels[c].color,size:11,family:nt},box:{alignment:{horizontal:"right",vertical:"middle"}}},Ps:b}),a="",e.st(this.xl[c]),e.st(this.Cl[c]),v<0||(this.kl[v]||this.kl.push(new gn),this.kl[v]._t(U(U({},r.line),{extend:r.extend,background:{color:I(r.levels[c].color,r.levels[c].opacity)},points:[new Zi(u,l[c-1].bi,0),new Zi(o,l[c].bi,0)]})),e.st(this.kl[v]))}this.Oo(e),this.Kn=e}}}}},i.prototype.Nl=function(t,i,n){var s,h,r=(null===(h=null===(s=this.Zn.us())||void 0===s?void 0:s.Wt())||void 0===h?void 0:h.qt)||0,e=this.Zn.Ht(),u=i-t;return e&&r?n.map((function(t){var n=i-t.coeff*u;return{bi:e.jt(n,r),Nt:e.Di(n,r)}})):[]},i}(rn),kn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="FibRetracement",h._h([new yn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 2},i}(Kt),xn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Us="Highlighter",i}return q(i,t),i.prototype.rl=function(){var t=this.K();return{visible:t.visible,editable:t.editable,line:{width:20,cap:"round",join:"round",style:0,color:t.line.color,end:{left:0,right:0}}}},i}(fn),Cn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Go=new ii,s.Qo=new ri,s.Kn=null,s.Go.Nh(new Gt(Zt.mh)),s}return q(i,t),i.prototype.fs=function(i,n){this.Kn=null;var h=this.Zn.Ht(),r=this.Gn.Rt();if(h&&!h.et()&&!r.et()){var e=this.Zn.Ps();if(!(e.length<1)){var u=r.Hs(0),o=r.Hs(n),l=this.Zn.K(),a=l.line.extend||{},f=a.left,c=a.right;if(!(!f&&e[0].timestamp>o.vs||!c&&e[0].timestamp<u.vs)){if(t.prototype.fs.call(this),this.Fs.length<1)return;var v=this.Fs[0],d=new Zi(f?0:v.x,v.y,0),_=new Zi(c?n:v.x,v.y,1);if(Math.floor(d.x)===Math.floor(_.x)||Math.max(d.x,_.x)<=0||_.x<d.x)return;f&&c&&(v.x=n/2,v.ao=!0);var w=new rt;if(this.Go._t({Sh:U(U({},Xt(l.line)),{end:{ou:0,lu:0}}),Ps:[d,_]}),w.st(this.Go),l.text.value){var M=Math.atan((_.y-d.y)/(_.x-d.x))/Math.PI*-180,b=l.text.box.alignment.horizontal,m="left"===b?d.clone():"right"===b?_.clone():new s((d.x+_.x)/2,(d.y+_.y)/2),p=Xt(l.text);p.box=U(U({},p.box),{angle:M}),this.Qo._t({wi:p,Ps:[m]}),w.st(this.Qo)}this.Oo(w),this.Kn=w}}}},i}(rn),Nn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="HorizontalLine",h._h([new Cn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 1},i.prototype.Ki=function(){return[]},i.prototype.cs=function(){return[]},i.prototype.os=function(){return this.K().line.color},i}(Kt),Sn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Us="HorizontalRay",i}return q(i,t),i}(Nn),Tn=function(t){function i(i,n){var s=t.call(this)||this;return s.kh=1e3,s.xh=1e3,s.il=n||new Gt(Zt.ph),s.Ch=i||new Gt(Zt.mh),s.dt=null,s}return q(i,t),i.prototype._t=function(t){this.dt=t},i.prototype.lt=function(t,i){if(null===this.dt||this.dt.points.length<2)return null;var n=this.dt.points,h=n[0],r=n[1],e=new s(t,i),u=this.pl(e,h,r);if(null!==u)return u;if(4===this.dt.points.length){var o=this.dt.points,l=o[2],a=o[3],f=this.pl(e,l,a);if(null!==f)return f;if(this.dt.showMiddleLine){var c=h.add(l).scaled(.5),v=r.add(a).scaled(.5),d=this.pl(e,c,v);if(null!==d)return d}}return this.dt.hitTestBackground?this.gl(e):null},i.prototype.ft=function(t){var i,n,s,h,r,e;if(!(null===this.dt||this.dt.points.length<2)){g(t,(null===(i=this.dt.channelLine)||void 0===i?void 0:i.style)||0),t.strokeStyle=(null===(n=this.dt.channelLine)||void 0===n?void 0:n.color)||"transparent",t.lineWidth=(null===(s=this.dt.channelLine)||void 0===s?void 0:s.width)||0,t.lineCap="butt",this.xh=t.canvas.width,this.kh=t.canvas.height;var u=this.dt.points,o=u[0],l=u[1];if(this.Sl(t,o,l),4===this.dt.points.length){var a=this.dt.points,f=a[2],c=a[3];if(this.Sl(t,f,c),this.Tl(t,this.dt.points),this.dt.showMiddleLine){g(t,(null===(h=this.dt.middleLine)||void 0===h?void 0:h.style)||0),t.strokeStyle=(null===(r=this.dt.middleLine)||void 0===r?void 0:r.color)||"transparent",t.lineWidth=(null===(e=this.dt.middleLine)||void 0===e?void 0:e.width)||0;var v=o.add(f).scaled(.5),d=l.add(c).scaled(.5);this.Sl(t,v,d)}}}},i.prototype.Sl=function(t,i,n){var s=this.yl(i,n);null!==s&&C(t,s[0].x,s[0].y,s[1].x,s[1].y)},i.prototype.pl=function(t,i,n){var s=this.yl(i,n);return null!==s&&d(s[0],s[1],t)._<=3?this.Ch:null},i.prototype.yl=function(t,i){var n,s,h=E(this.dt);return N(t,i,this.xh,this.kh,!!(null===(n=h.extend)||void 0===n?void 0:n.left),!!(null===(s=h.extend)||void 0===s?void 0:s.right))},i.prototype.Tl=function(t,i){var n,h,r,u,o,l,a=E(this.dt),f=i[0],c=i[1],d=i[2],_=i[3],w=t.canvas.width,M=t.canvas.height;if(!e(f,c)&&!e(d,_)&&!(w<=0||M<=0||v(f,c,d)._<1e-6||v(f,c,_)._<1e-6)){var b=[new s(0,0),new s(w,0),new s(w,M),new s(0,M)];if(b=this.Fl(b,f,c,_),(null===(n=a.extend)||void 0===n?void 0:n.right)||(b=this.Fl(b,c,_,d)),b=this.Fl(b,_,d,f),(null===(h=a.extend)||void 0===h?void 0:h.left)||(b=this.Fl(b,d,f,c)),null!==b){t.beginPath(),t.moveTo(b[0].x,b[0].y);for(var m=1;m<b.length;m++)t.lineTo(b[m].x,b[m].y);t.fillStyle=(null===(u=null===(r=this.dt)||void 0===r?void 0:r.background)||void 0===u?void 0:u.color)||"transparent",(null===(l=null===(o=this.dt)||void 0===o?void 0:o.background)||void 0===l?void 0:l.color)&&t.fill()}}},i.prototype.gl=function(t){var i,n,s=E(this.dt);if(4!==s.points.length)return null;var h=s.points,r=h[0],e=h[1],u=h[2],o=(e.y-r.y)/(e.x-r.x),l=u.y+o*(t.x-u.x),a=r.y+o*(t.x-r.x),f=Math.max(a,l),c=Math.min(a,l),v=Math.max(r.x,e.x),d=Math.min(r.x,e.x);return!(null===(i=s.extend)||void 0===i?void 0:i.left)&&t.x<d||!(null===(n=s.extend)||void 0===n?void 0:n.right)&&t.x>v?null:t.y>=c&&t.y<=f?this.il:null},i.prototype.Fl=function(t,i,n,s){return null!==t?function(t,i){for(var n=[],s=0;s<t.length;++s){var h=t[s],r=t[(s+1)%t.length],e=u(h,r);if(l(h,i))b(n,h),l(r,i)||null!==(o=M(e,i.h))&&b(n,o);else if(l(r,i)){var o;null!==(o=M(e,i.h))&&b(n,o)}}return n.length>=3?n:null}(t,(h=u(i,n),e=s,new r(h,h.o*e.x+h.l*e.y+h.v>0))):null;var h,e},i}(et),Fn=[Yi.fu,Yi.fu,Yi.fu,Yi.fu,Yi.wu,Yi.wu],Ln=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Ll=new Tn,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){t.prototype.fs.call(this),this.Kn=null;var i=this.Zn.Ht();if(i&&!i.et()&&0!==this.Zn.Ps().length&&!(this.Fs.length<=1)){var n=this.Fs[0],s=this.Fs[1],h=null,r=null;if(3===this.Fs.length){var e=this.Fs[2].y-this.Fs[0].y;h=new Zi(n.x,n.y+e,2),r=new Zi(s.x,s.y+e,3)}var u=h&&r?[n,s,h,r]:[n,s],o=this.Zn.K();this.Ll._t(U(U({},Xt(o)),{points:u,hitTestBackground:!1}));var l=new rt;l.st(this.Ll);var a=[];if(this.Fs[0]&&a.push(new Zi(n.x,n.y,0)),this.Fs[1]&&a.push(new Zi(s.x,s.y,1)),h&&r){a.push(new Zi(h.x,h.y,2),new Zi(r.x,r.y,3));var f=h.add(r).scaled(.5);f.Mh=4,f.ao=!0,a.push(f);var c=a[0].add(a[1]).scaled(.5);c.ao=!0,c.Mh=5,a.push(c)}var v={Ps:a,do:Fn};l.st(this.Ro(v,0)),this.Kn=l}},i}(rn),En=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="ParallelChannel",h.bs.push(new qt(h,3)),h._h([new Ln(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 3},i.prototype.Os=function(i){2===this.Fs.length?t.prototype.Os.call(this,this.El(i)):t.prototype.Os.call(this,i)},i.prototype.Ps=function(){var i=t.prototype.Ps.call(this);return 3!==i.length||this.As()?i:[i[0],i[1],this.El(i[2])]},i.prototype.zs=function(i,n){if(!(this.Fs[0].timestamp===this.Fs[1].timestamp&&i>=4)){var s=E(this.Is(this.Fs[0])),h=E(this.Is(this.Fs[1])),r=E(this.Is(n)),e=this.Al()||0,u=E(this.Ht()),o=this.us(),l=A(null===o?void 0:o.Wt());if(0===i)t.prototype.zs.call(this,i,n),this.Fs[2].price=u.cn(r.y+e,l.qt);else if(1===i)t.prototype.zs.call(this,i,n);else if(2===i)t.prototype.zs.call(this,i,n),this.Fs[0].timestamp=n.timestamp,this.Fs[0].price=u.cn(r.y-e,l.qt);else if(3===i)this.Fs[1].timestamp=n.timestamp,this.Fs[1].price=u.cn(r.y-e,l.qt);else if(4===i){var a=h.subtract(s),f=(r.x-s.x)/a.x,c=r.y-s.addScaled(a,f).y;this.Fs[2].price=u.cn(s.y+c,l.qt)}else if(5===i){a=h.subtract(s),f=(r.x-s.x)/a.x,c=r.y-s.addScaled(a,f).y;this.Fs[0].price=u.cn(s.y+c,l.qt),this.Fs[1].price=u.cn(h.y+c,l.qt)}}},i.prototype.Rs=function(i){if(i<3)return t.prototype.Rs.call(this,i);var n=this.Is(this.Fs[0]),h=this.Is(this.Fs[1]),r=this.Is(this.Fs[2]);if(!n||!h||!r)return null;switch(i){case 3:var e=r.y-n.y,u=h.add(new s(0,e));return this.js(u);case 4:e=r.y-n.y,u=h.add(new s(0,e));var o=r.add(u).scaled(.5);return this.js(o);case 5:var l=n.add(h).scaled(.5);return this.js(l)}return null},i.prototype.ts=function(){return this.Bl()},i.prototype.cs=function(){return this.Bl().slice(0,2)},i.prototype.Al=function(){var t=this.Is(this.Fs[2]),i=this.Is(this.Fs[0]);return t&&i?t.y-i.y:null},i.prototype.Bl=function(){var t=this.Ps(),i=this.Fs[0]?this.Is(this.Fs[0]):null,n=this.Fs[1]?this.Is(this.Fs[1]):null,h=this.Fs[2]?this.Is(this.Fs[2]):null;if(i&&n&&h){var r=n.y-i.y,e=h.add(new s(0,r));t.push(E(this.js(e)))}return t},i.prototype.El=function(t){if(this.Fs.length<2||this.Fs[1].timestamp===this.Fs[0].timestamp)return t;var i=E(this.Is(t)),n=E(this.Is(this.Fs[1])),h=E(this.Is(this.Fs[0])),r=n.subtract(h),e=(i.x-h.x)/r.x,u=h.addScaled(r,e),o=i.y-u.y,l=h.add(new s(0,o));return E(this.js(l))},i}(Kt),An=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.hl=new ln,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){t.prototype.fs.call(this),this.Kn=null;var i=this.Zn.K();this.hl._t({Sh:Xt(i.line),Ps:this.Fs});var n=new rt;n.st(this.hl),this.Kn=n,this.Oo(n)},i}(rn),Bn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Path",h._h([new An(h,i)]),h}return q(i,t),i.prototype.Es=function(){return-1},i.prototype.Bs=function(){if(this.Fs.length>1){var t=this.Fs[this.Fs.length-1],i=this.Fs[this.Fs.length-2],n=E(this.Is(t)),s=E(this.Is(i));n.subtract(s).length()<10&&(this.Fs.pop(),this.xs=!0,this.ks=!0,this.Ts=null)}},i}(Kt),Dn=function(){function t(t,i){this.il=i||new Gt(Zt.ph),this.Ch=t||new Gt(Zt.mh),this.dt=null}return t.prototype._t=function(t){this.dt=t},t.prototype.lt=function(t,i,n){if(null===this.dt||this.dt.points.length<2)return null;var h=n.canvas.ownerDocument&&n.canvas.ownerDocument.defaultView&&n.canvas.ownerDocument.defaultView.devicePixelRatio||1,r=n.canvas.width,e=new s(t,i),u=this.ml(h),o=u[0],l=u[1],a=new s(l.x,o.y),f=new s(o.x,l.y),c=this.pl(e,o,a,r);if(null!==c)return c;var v=this.pl(e,f,l,r);if(null!==v)return v;if(d(a,l,e)._<=3)return this.Ch;if(d(o,f,e)._<=3)return this.Ch;var _=this.gl(e,o,l,r);return this.dt.hitTestBackground&&null!==_?_:null},t.prototype.ot=function(t,i,n,s){var h,r,e,u,o,l,a,f=(null===(r=null===(h=this.dt)||void 0===h?void 0:h.border)||void 0===r?void 0:r.width)||0,c=null===(u=null===(e=this.dt)||void 0===e?void 0:e.border)||void 0===u?void 0:u.color,v=null===(l=null===(o=this.dt)||void 0===o?void 0:o.background)||void 0===l?void 0:l.color;if(!(null===this.dt||this.dt.points.length<2||f<=0&&!v)){t.save();var d=f?Math.max(1,Math.floor(f*i)):0,_=10,w=(null===(a=this.dt.border)||void 0===a?void 0:a.style)||0,M=this.dt.points,b=M[0],m=M[1],p=this.dt.extend||{},y=p.left,k=p.right;if(void 0!==v&&(t.fillStyle=v,t.fillRect(b.x,b.y,m.x-b.x,m.y-b.y)),void 0!==c&&f>0){t.beginPath(),g(t,w||0),t.lineWidth=d,t.strokeStyle=c;var x=.5*d;t.moveTo(b.x-(y?x:0),b.y-x),t.lineTo(m.x+(k?x:0),b.y-x),t.moveTo(b.x-(y?x:0),m.y+x),t.lineTo(m.x+(k?x:0),m.y+x);var C=(b.x+m.x)/2;t.moveTo(C,b.y),t.lineTo(C,m.y);var N=0,S=Math.abs(b.y-m.y);b.y>=m.y&&S>_?(N=m.y+d,t.moveTo(C-_,N+_),t.lineTo(C,N),t.lineTo(C+_,N+_)):b.y<m.y&&S>_&&(N=m.y-d,t.moveTo(C-_,N-_),t.lineTo(C,N),t.lineTo(C+_,N-_)),t.stroke()}t.restore()}},t.prototype.ml=function(t){var i=E(this.dt).points,n=i[0],h=i[1],r=Math.min(n.x,h.x),e=Math.max(n.x,h.x),u=Math.min(n.y,h.y),o=Math.max(n.y,h.y),l=Math.round(r*t),a=Math.round(e*t),f=Math.round(u*t),c=Math.round(o*t);return[new s(l,f),new s(a,c)]},t.prototype.yl=function(t,i,n){var h,r,u=E(this.dt);if(e(t,i))return null;var o=Math.min(t.x,i.x),l=Math.max(t.x,i.x),a=(null===(h=u.extend)||void 0===h?void 0:h.left)?0:Math.max(o,0),f=(null===(r=u.extend)||void 0===r?void 0:r.right)?n:Math.min(l,n);return a>f||f<=0||a>=n?null:[new s(a,t.y),new s(f,i.y)]},t.prototype.pl=function(t,i,n,s){var h=this.yl(i,n,s);return null!==h&&d(h[0],h[1],t)._<=3?this.Ch:null},t.prototype.gl=function(t,i,n,s){var r=this.yl(i,n,s);return null!==r&&_(t,new h(r[0],r[1]))?this.il:null},t}(),Pn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Dl=new Dn,s.Qo=new ri,s.Pl=new ri,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){this.Kn=null,this.ls=!1;var i=this.Zn.Ht(),n=this.Gn.Rt();if(i&&!i.et()&&!n.et()){var s=n.tl();if(null!==s){var h=this.Zn.Ps();if(!(h.length<2)){var r=this.Zn.K();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.vs)||r.priceRange.extend.left||r.priceRange.extend.right){if(t.prototype.fs.call(this),this.Fs.length<2)return;var e=new rt;this.Dl._t(U(U({},Xt(r.priceRange)),{points:this.Fs,hitTestBackground:!1})),e.st(this.Dl);var u=this.Fs[0],o=this.Fs[1];if(r.text.value){var l=Math.min(u.x,o.x),a=Math.max(u.x,o.x),f=Math.min(u.y,o.y),c=Math.max(u.y,o.y),v=u.clone(),d=r.text.font.size/3,_=0;switch(r.text.box.alignment.vertical){case"middle":v.y=(f+c)/2,_=d;break;case"top":v.y=f;break;case"bottom":v.y=c}switch(r.text.box.alignment.horizontal){case"center":v.x=(l+a)/2;break;case"left":v.x=l;break;case"right":v.x=a}var w=Xt(r.text);w.box=U(U({},w.box),{padding:{y:d,x:_}}),"middle"===r.text.box.alignment.vertical&&(w.box.maxHeight=c-f),this.Qo._t({wi:w,Ps:[v]}),e.st(this.Qo)}var M=Math.min(u.x,o.x),b=Math.max(u.x,o.x),m=Math.min(u.y,o.y),p=Math.max(u.y,o.y),g=u.clone(),y=r.text.font.size/3,k=0,x=Xt(r.text);x.box.alignment.horizontal="center",x.box.alignment.vertical="top";var C=i.Wt();switch(o.y>=u.y?(x.box.alignment.vertical="bottom",null!==C&&(x.value=String(Number(i.Di(i.cn(o.y,C),C))-Number(i.Di(i.cn(u.y,C),C))))):u.y>o.y&&(x.box.alignment.vertical="top",null!==C&&(x.value="+"+String(Number(i.Di(i.cn(o.y,C),C))-Number(i.Di(i.cn(u.y,C),C))))),x.box.alignment.vertical){case"middle":g.y=(m+p)/2,k=y;break;case"top":g.y=m;break;case"bottom":g.y=p}switch(x.box.alignment.horizontal){case"center":g.x=(M+b)/2;break;case"left":g.x=M;break;case"right":g.x=b}x.box=U(U({},x.box),{padding:{y:y,x:k}}),x.font.size=28,x.font.color=r.text.font.color,x.font.bold=!0,x.box.offset={x:0,y:10},"middle"===x.box.alignment.vertical&&(x.box.maxHeight=p-m),this.Pl._t({wi:x,Ps:[g]}),e.st(this.Pl),this._l(u,o,e),this.Kn=e}}}}},i.prototype._l=function(t,i,n){var s=new Zi(t.x,i.y,2),h=new Zi(i.x,t.y,3),r=new Zi(t.x,.5*(t.y+i.y),4,!0),e=new Zi(i.x,.5*(t.y+i.y),5,!0),u=new Zi(.5*(t.x+i.x),t.y,6,!0),o=new Zi(.5*(t.x+i.x),i.y,7,!0),l=t.x-i.x,a=t.y-i.y,f=Math.sign(l*a),c={Ps:[t,i,s,h,r,e,u,o],do:[f<0?Yi.bu:Yi.mu,f<0?Yi.bu:Yi.mu,f>0?Yi.bu:Yi.mu,f>0?Yi.bu:Yi.mu,Yi.Mu,Yi.Mu,Yi.wu,Yi.wu]};n.st(this.Ro(c,0))},i}(rn),On=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="PriceRange",h._h([new Pn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 2},i.prototype.zs=function(i,n){switch(i<2&&t.prototype.zs.call(this,i,n),i){case 2:this.Fs[1].price=n.price,this.Fs[0].timestamp=n.timestamp;break;case 3:this.Fs[0].price=n.price,this.Fs[1].timestamp=n.timestamp;break;case 4:this.Fs[0].timestamp=n.timestamp;break;case 5:this.Fs[1].timestamp=n.timestamp;break;case 6:this.Fs[0].price=n.price;break;case 7:this.Fs[1].price=n.price}},i.prototype.Rs=function(i){return i<2?t.prototype.Rs.call(this,i):this.wl(i)},i.prototype.wl=function(t){var i=this.Ps()[0],n=this.Ps()[1];return[{Nt:i.price,vs:i.timestamp},{Nt:n.price,vs:n.timestamp},{Nt:n.price,vs:i.timestamp},{Nt:i.price,vs:n.timestamp},{Nt:(n.price+i.price)/2,vs:i.timestamp},{Nt:(n.price+i.price)/2,vs:n.timestamp},{Nt:i.price,vs:(n.timestamp+i.timestamp)/2},{Nt:n.price,vs:(n.timestamp+i.timestamp)/2}][t]},i}(Kt),Rn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Us="Ray",i}return q(i,t),i}(un),zn=function(){function t(t,i){this.il=i||new Gt(Zt.ph),this.Ch=t||new Gt(Zt.mh),this.dt=null}return t.prototype._t=function(t){this.dt=t},t.prototype.lt=function(t,i,n){if(null===this.dt||this.dt.points.length<2)return null;var h=n.canvas.ownerDocument&&n.canvas.ownerDocument.defaultView&&n.canvas.ownerDocument.defaultView.devicePixelRatio||1,r=n.canvas.width,e=new s(t,i),u=this.ml(h),o=u[0],l=u[1],a=new s(l.x,o.y),f=new s(o.x,l.y),c=this.pl(e,o,a,r);if(null!==c)return c;var v=this.pl(e,f,l,r);if(null!==v)return v;if(d(a,l,e)._<=3)return this.Ch;if(d(o,f,e)._<=3)return this.Ch;var _=this.gl(e,o,l,r);return this.dt.hitTestBackground&&null!==_?_:null},t.prototype.ot=function(t,i,n,s){var h,r,e,u,o,l,a,f=(null===(r=null===(h=this.dt)||void 0===h?void 0:h.border)||void 0===r?void 0:r.width)||0,c=null===(u=null===(e=this.dt)||void 0===e?void 0:e.border)||void 0===u?void 0:u.color,v=null===(l=null===(o=this.dt)||void 0===o?void 0:o.background)||void 0===l?void 0:l.color;if(!(null===this.dt||this.dt.points.length<2||f<=0&&!v)){t.save();var d=f?Math.max(1,Math.floor(f*i)):0,_=(null===(a=this.dt.border)||void 0===a?void 0:a.style)||0,w=this.ml(i),M=w[0],b=w[1],m=this.dt.extend||{};si(t,M,b,v,c,d,_,"center",!!m.left,!!m.right,t.canvas.width),t.restore()}},t.prototype.ml=function(t){var i=E(this.dt).points,n=i[0],h=i[1],r=Math.min(n.x,h.x),e=Math.max(n.x,h.x),u=Math.min(n.y,h.y),o=Math.max(n.y,h.y),l=Math.round(r*t),a=Math.round(e*t),f=Math.round(u*t),c=Math.round(o*t);return[new s(l,f),new s(a,c)]},t.prototype.yl=function(t,i,n){var h,r,u=E(this.dt);if(e(t,i))return null;var o=Math.min(t.x,i.x),l=Math.max(t.x,i.x),a=(null===(h=u.extend)||void 0===h?void 0:h.left)?0:Math.max(o,0),f=(null===(r=u.extend)||void 0===r?void 0:r.right)?n:Math.min(l,n);return a>f||f<=0||a>=n?null:[new s(a,t.y),new s(f,i.y)]},t.prototype.pl=function(t,i,n,s){var h=this.yl(i,n,s);return null!==h&&d(h[0],h[1],t)._<=3?this.Ch:null},t.prototype.gl=function(t,i,n,s){var r=this.yl(i,n,s);return null!==r&&_(t,new h(r[0],r[1]))?this.il:null},t}(),Vn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Ol=new zn,s.Qo=new ri,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){this.Kn=null,this.ls=!1;var i=this.Zn.Ht(),n=this.Gn.Rt();if(i&&!i.et()&&!n.et()){var s=n.tl();if(null!==s){var h=this.Zn.Ps();if(!(h.length<2)){var r=this.Zn.K();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.vs)||r.rectangle.extend.left||r.rectangle.extend.right){if(t.prototype.fs.call(this),this.Fs.length<2)return;var e=new rt;this.Ol._t(U(U({},Xt(r.rectangle)),{points:this.Fs,hitTestBackground:!1})),e.st(this.Ol);var u=this.Fs[0],o=this.Fs[1];if(r.text.value){var l=Math.min(u.x,o.x),a=Math.max(u.x,o.x),f=Math.min(u.y,o.y),c=Math.max(u.y,o.y),v=u.clone(),d=r.text.font.size/3,_=0;switch(r.text.box.alignment.vertical){case"middle":v.y=(f+c)/2,_=d;break;case"top":v.y=f;break;case"bottom":v.y=c}switch(r.text.box.alignment.horizontal){case"center":v.x=(l+a)/2;break;case"left":v.x=l;break;case"right":v.x=a}var w=Xt(r.text);w.box=U(U({},w.box),{padding:{y:d,x:_}}),"middle"===r.text.box.alignment.vertical&&(w.box.maxHeight=c-f),this.Qo._t({wi:w,Ps:[v]}),e.st(this.Qo)}this._l(u,o,e),this.Kn=e}}}}},i.prototype._l=function(t,i,n){var s=new Zi(t.x,i.y,2),h=new Zi(i.x,t.y,3),r=new Zi(t.x,.5*(t.y+i.y),4,!0),e=new Zi(i.x,.5*(t.y+i.y),5,!0),u=new Zi(.5*(t.x+i.x),t.y,6,!0),o=new Zi(.5*(t.x+i.x),i.y,7,!0),l=t.x-i.x,a=t.y-i.y,f=Math.sign(l*a),c={Ps:[t,i,s,h,r,e,u,o],do:[f<0?Yi.bu:Yi.mu,f<0?Yi.bu:Yi.mu,f>0?Yi.bu:Yi.mu,f>0?Yi.bu:Yi.mu,Yi.Mu,Yi.Mu,Yi.wu,Yi.wu]};n.st(this.Ro(c,0))},i}(rn),Wn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Rectangle",h._h([new Vn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 2},i.prototype.zs=function(i,n){switch(i<2&&t.prototype.zs.call(this,i,n),i){case 2:this.Fs[1].price=n.price,this.Fs[0].timestamp=n.timestamp;break;case 3:this.Fs[0].price=n.price,this.Fs[1].timestamp=n.timestamp;break;case 4:this.Fs[0].timestamp=n.timestamp;break;case 5:this.Fs[1].timestamp=n.timestamp;break;case 6:this.Fs[0].price=n.price;break;case 7:this.Fs[1].price=n.price}},i.prototype.Rs=function(i){return i<2?t.prototype.Rs.call(this,i):this.wl(i)},i.prototype.wl=function(t){var i=this.Ps()[0],n=this.Ps()[1];return[{Nt:i.price,vs:i.timestamp},{Nt:n.price,vs:n.timestamp},{Nt:n.price,vs:i.timestamp},{Nt:i.price,vs:n.timestamp},{Nt:(n.price+i.price)/2,vs:i.timestamp},{Nt:(n.price+i.price)/2,vs:n.timestamp},{Nt:i.price,vs:(n.timestamp+i.timestamp)/2},{Nt:n.price,vs:(n.timestamp+i.timestamp)/2}][t]},i}(Kt),In=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Qo=new ri,s.Kn=null,s}return q(i,t),i.prototype.fs=function(i,n){this.Kn=null;var s=this.Zn.Ht(),h=this.Gn.Rt();if(s&&!s.et()&&!h.et()&&(t.prototype.fs.call(this),!(this.Fs.length<1))){var r=Xt(this.Zn.K().text);r.box.alignment={vertical:"top",horizontal:"center"},r.alignment="center";var e=this.Fs[0].clone(),u=new rt;this.Qo._t({wi:r,Ps:[e]}),u.st(this.Qo),this.Oo(u),this.Kn=u}},i}(rn),jn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Text",h._h([new In(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 1},i}(Kt),Hn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.dt=null,i}return q(i,t),i.prototype._t=function(t){this.dt=t},i.prototype.lt=function(t,i){if(null===this.dt||this.dt.points.length<2)return null;var n=this.dt.points,h=n[0],r=n[1],e=new s(t,i);if(d(h,r,e)._<=Qt)return new Gt(Zt.mh);if(3!==this.dt.points.length)return null;var u=this.dt.points[2];return d(r,u,e)._<=Qt||d(u,h,e)._<=Qt?new Gt(Zt.mh):this.dt.hitTestBackground&&function(t,i,n,s){var h=i.add(n).scaled(.5).add(s).scaled(.5);return null===c(i,n,h,t)&&null===c(n,s,h,t)&&null===c(s,i,h,t)}(e,h,r,u)?new Gt(Zt.ph):null},i.prototype.ft=function(t){var i,n,s,h;if(!(null===this.dt||this.dt.points.length<2)){var r=this.dt.points,e=r[0],u=r[1],o=2===this.dt.points.length?u:this.dt.points[2];t.lineCap="butt",t.lineWidth=(null===(i=this.dt.border)||void 0===i?void 0:i.width)||0,t.strokeStyle=(null===(n=this.dt.border)||void 0===n?void 0:n.color)||"transparent",void 0!==(null===(s=this.dt.border)||void 0===s?void 0:s.style)&&g(t,this.dt.border.style),t.beginPath(),t.fillStyle=(null===(h=this.dt.background)||void 0===h?void 0:h.color)||"transparent",t.moveTo(e.x,e.y),t.lineTo(u.x,u.y),t.lineTo(o.x,o.y),t.lineTo(e.x,e.y),t.fill(),t.stroke()}},i}(et),qn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Rl=new Hn,s.Kn=null,s}return q(i,t),i.prototype.fs=function(){var i=this.Zn.K();t.prototype.fs.call(this),this.Kn=null,this.Rl._t(U(U({},i.triangle),{points:this.Fs,hitTestBackground:!1}));var n=new rt;n.st(this.Rl),this.Oo(n),this.Kn=n},i}(rn),Un=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="Triangle",h._h([new qn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 3},i}(Kt),Yn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Go=new ii,s.Qo=new ri,s.Kn=null,s.Go.Nh(new Gt(Zt.mh)),s}return q(i,t),i.prototype.fs=function(i,n){this.Kn=null;var h=this.Zn.Ht(),r=this.Gn.Rt();if(h&&!h.et()&&!r.et()){var e=this.Zn.Ps();if(!(e.length<1)){var u=r.Hs(0),o=r.Hs(n),l=this.Zn.K();if(!(e[0].timestamp>o.vs||e[0].timestamp<u.vs)){if(t.prototype.fs.call(this),this.Fs.length<1)return;var a=this.Fs[0],f=new Zi(a.x,i,0),c=new Zi(a.x,0,1);a.y=i/2,a.ao=!0;var v=new rt;if(this.Go._t({Sh:U(U({},Xt(l.line)),{end:{ou:0,lu:0},extend:{ou:!1,lu:!1}}),Ps:[f,c]}),v.st(this.Go),l.text.value){var d=Math.atan((c.y-f.y)/(c.x-f.x))/Math.PI*-180,_=l.text.box.alignment.horizontal,w="left"===_?f.clone():"right"===_?c.clone():new s((f.x+c.x)/2,(f.y+c.y)/2),M=Xt(l.text);M.box=U(U({},M.box),{angle:d}),this.Qo._t({wi:M,Ps:[w]}),v.st(this.Qo)}this.Oo(v),this.Kn=v}}}},i}(rn),Jn={FibRetracement:kn,ParallelChannel:En,HorizontalLine:Nn,VerticalLine:function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Us="VerticalLine",h._h([new Yn(h,i)]),h}return q(i,t),i.prototype.Es=function(){return 1},i.prototype.Cn=function(){return[]},i.prototype.ts=function(){return[]},i.prototype._s=function(){return this.K().line.color},i}(Kt),Highlighter:xn,CrossLine:mn,TrendLine:un,Callout:vn,Rectangle:Wn,Circle:Mn,PriceRange:On,Triangle:Un,Brush:fn,Path:Bn,Text:jn,Ray:Rn,Arrow:on,ExtendedLine:pn,HorizontalRay:Sn},$n=function(){function t(t){this.zl=null,this.Vl=null,this.Wl=null,this.Gn=t}return t.prototype.Il=function(t,i){this.Vl=i||{},this.Wl=t,this.Gn.Ie().forEach((function(t){t instanceof Kt&&(t.Gs(!1),t.Zs(!1),t.th(!1),t.nh(!1))})),this.Gn.eo()},t.prototype.jl=function(){return null!==this.Wl},t.prototype.So=function(t,i,n,s){var h;if(this.Wl&&this.Vl&&(s.Fo=!0,6===n)){var r=(null===(h=t.qs().Ie()[0].Ht())||void 0===h?void 0:h.qi())||t.qs().ri().Hl(),e=$(Q(It[this.Wl]),this.Vl||{});this.zl=new Jn[this.Wl](this.Gn,e,[]),t.qs().He(this.zl,r),this.Wl=null,this.Vl=null}},t}(),Kn=function(){function t(t){this.ql=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Ul(t):t<999995?i+this.Ul(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Ul(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Ul(t/1e9)+"B")},t.prototype.Ul=function(t){var i=Math.pow(10,this.ql);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.ql).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Xn(t,i,n,s){if(0!==i.length){var h=i[s.from].bt,r=i[s.from].gt;t.moveTo(h,r);for(var e=s.from+1;e<s.to;++e){var u=i[e];if(1===n){var o=i[e-1].gt,l=u.bt;t.lineTo(l,o)}t.lineTo(u.bt,u.gt)}}}var Zn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.dt=null,i}return q(i,t),i.prototype._t=function(t){this.dt=t},i.prototype.ft=function(t){if(null!==this.dt&&0!==this.dt.Mt.length&&null!==this.dt.wt){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.dt.Qt,g(t,this.dt.ti),t.lineWidth=1,t.beginPath(),1===this.dt.Mt.length){var i=this.dt.Mt[0],n=this.dt.Yl/2;t.moveTo(i.bt-n,this.dt.Jl),t.lineTo(i.bt-n,i.gt),t.lineTo(i.bt+n,i.gt),t.lineTo(i.bt+n,this.dt.Jl)}else t.moveTo(this.dt.Mt[this.dt.wt.from].bt,this.dt.Jl),t.lineTo(this.dt.Mt[this.dt.wt.from].bt,this.dt.Mt[this.dt.wt.from].gt),Xn(t,this.dt.Mt,this.dt.$l,this.dt.wt),this.dt.wt.to>this.dt.wt.from&&(t.lineTo(this.dt.Mt[this.dt.wt.to-1].bt,this.dt.Jl),t.lineTo(this.dt.Mt[this.dt.wt.from].bt,this.dt.Jl));t.closePath(),t.fillStyle=this.Kl(t),t.fill()}},i}(et),Gn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return q(i,t),i.prototype.Kl=function(t){var i=this.dt,n=t.createLinearGradient(0,0,0,i.Xl);return n.addColorStop(0,i.Zl),n.addColorStop(1,i.Gl),n},i}(Zn),Qn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.dt=null,i}return q(i,t),i.prototype._t=function(t){this.dt=t},i.prototype.ft=function(t){if(null!==this.dt&&0!==this.dt.Mt.length&&null!==this.dt.wt)if(t.lineCap="butt",t.lineWidth=this.dt.Qt,g(t,this.dt.ti),t.strokeStyle=this.Ql(t),t.lineJoin="round",1===this.dt.Mt.length){t.beginPath();var i=this.dt.Mt[0];t.moveTo(i.bt-this.dt.Yl/2,i.gt),t.lineTo(i.bt+this.dt.Yl/2,i.gt),void 0!==i.j&&(t.strokeStyle=i.j),t.stroke()}else this.ta(t,this.dt)},i.prototype.ta=function(t,i){t.beginPath(),Xn(t,i.Mt,i.$l,i.wt),t.stroke()},i}(et),ts=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return q(i,t),i.prototype.ta=function(t,i){var n,s,h=i.Mt,r=i.wt,e=i.$l,u=i.xt;if(0!==h.length&&null!==r){t.beginPath();var o=h[r.from];t.moveTo(o.bt,o.gt);var l=null!==(n=o.j)&&void 0!==n?n:u;t.strokeStyle=l;for(var a=function(i){t.stroke(),t.beginPath(),t.strokeStyle=i,l=i},f=r.from+1;f<r.to;++f){var c=h[f],v=h[f-1],d=null!==(s=c.j)&&void 0!==s?s:u;1===e&&(t.lineTo(c.bt,v.gt),d!==l&&(a(d),t.moveTo(c.bt,v.gt))),t.lineTo(c.bt,c.gt),1!==e&&d!==l&&(a(d),t.moveTo(c.bt,c.gt))}t.stroke()}},i.prototype.Ql=function(){return this.dt.xt},i}(Qn);function is(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(t[u],i)?(s=u+1,r-=e+1):r=e}return s}function ns(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(i,t[u])?r=e:(s=u+1,r-=e+1)}return s}function ss(t,i){return t.Ct<i}function hs(t,i){return t<i.Ct}function rs(t,i,n){var s=i.ou(),h=i.lu(),r=is(t,s,ss),e=ns(t,h,hs);if(!n)return{from:r,to:e};var u=r,o=e;return r>0&&r<t.length&&t[r].Ct>=s&&(u=r-1),e>0&&e<t.length&&t[e-1].Ct<=h&&(o=e+1),{from:u,to:o}}var es=function(){function t(t,i,n){this.ls=!0,this.ia=!0,this.na=!0,this.sa=[],this.ha=null,this.ra=t,this.Gn=i,this.ea=n}return t.prototype.At=function(t){this.ls=!0,"data"===t&&(this.ia=!0),"options"===t&&(this.na=!0)},t.prototype.ua=function(){this.ia&&(this.oa(),this.ia=!1),this.ls&&(this.la(),this.ls=!1),this.na&&(this.aa(),this.na=!1)},t.prototype.fa=function(){this.ha=null},t.prototype.la=function(){var t=this.ra.Ht(),i=this.Gn.Rt();if(this.fa(),!i.et()&&!t.et()){var n=i.es();if(null!==n&&0!==this.ra.En().ca()){var s=this.ra.Wt();null!==s&&(this.ha=rs(this.sa,n,this.ea),this.va(t,i,s.qt))}}},t}(),us=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return q(i,t),i.prototype.va=function(t,i,n){i.da(this.sa,it(this.ha)),t.Be(this.sa,n,it(this.ha))},i.prototype._a=function(t,i){return{Ct:t,Nt:i,bt:NaN,gt:NaN}},i.prototype.aa=function(){},i.prototype.oa=function(){var t=this,i=this.ra.wa();this.sa=this.ra.En().Ma().map((function(n){var s=n.qt[3];return t.ba(n.ma,s,i)}))},i}(es),os=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ni=new rt,s.pa=new Gn,s.ga=new ts,s.ni.ut([s.pa,s.ga]),s}return q(i,t),i.prototype.Dt=function(t,i){if(!this.ra.Vt())return null;var n=this.ra.K();return this.ua(),this.pa._t({$l:n.lineType,Mt:this.sa,ti:n.lineStyle,Qt:n.lineWidth,Zl:n.topColor,Gl:n.bottomColor,Jl:t,Xl:t,wt:this.ha,Yl:this.Gn.Rt().ya()}),this.ga._t({$l:n.lineType,Mt:this.sa,xt:n.lineColor,ti:n.lineStyle,Qt:n.lineWidth,wt:this.ha,Yl:this.Gn.Rt().ya()}),this.ni},i.prototype.ba=function(t,i){return this._a(t,i)},i}(us),ls=function(){function t(){this.$t=null,this.ka=0,this.xa=0}return t.prototype._t=function(t){this.$t=t},t.prototype.ot=function(t,i,n,s){if(null!==this.$t&&0!==this.$t.En.length&&null!==this.$t.wt){if(this.ka=this.Ca(i),this.ka>=2)Math.max(1,Math.floor(i))%2!=this.ka%2&&this.ka--;this.xa=this.$t.Na?Math.min(this.ka,Math.floor(i)):this.ka;for(var h=null,r=this.xa<=this.ka&&this.$t.ya>=Math.floor(1.5*i),e=this.$t.wt.from;e<this.$t.wt.to;++e){var u=this.$t.En[e];h!==u.j&&(t.fillStyle=u.j,h=u.j);var o=Math.floor(.5*this.xa),l=Math.round(u.bt*i),a=l-o,f=this.xa,c=a+f-1,v=Math.min(u.Re,u.ze),d=Math.max(u.Re,u.ze),_=Math.round(v*i)-o,w=Math.round(d*i)+o,M=Math.max(w-_,this.xa);t.fillRect(a,_,f,M);var b=Math.ceil(1.5*this.ka);if(r){if(this.$t.Sa){var m=l-b,p=Math.max(_,Math.round(u.Oe*i)-o),g=p+f-1;g>_+M-1&&(p=(g=_+M-1)-f+1),t.fillRect(m,p,a-m,g-p+1)}var y=l+b,k=Math.max(_,Math.round(u.Ve*i)-o),x=k+f-1;x>_+M-1&&(k=(x=_+M-1)-f+1),t.fillRect(c+1,k,y-c,x-k+1)}}}},t.prototype.Ca=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(E(this.$t).ya,t)))},t}(),as=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return q(i,t),i.prototype.va=function(t,i,n){i.da(this.sa,it(this.ha)),t.Pe(this.sa,n,it(this.ha))},i.prototype.Ta=function(t,i,n){return{Ct:t,open:i.qt[0],high:i.qt[1],low:i.qt[2],close:i.qt[3],bt:NaN,Oe:NaN,Re:NaN,ze:NaN,Ve:NaN}},i.prototype.oa=function(){var t=this,i=this.ra.wa();this.sa=this.ra.En().Ma().map((function(n){return t.ba(n.ma,n,i)}))},i}(es),fs=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ni=new ls,i}return q(i,t),i.prototype.Dt=function(t,i){if(!this.ra.Vt())return null;var n=this.ra.K();this.ua();var s={En:this.sa,ya:this.Gn.Rt().ya(),Sa:n.openVisible,Na:n.thinBars,wt:this.ha};return this.ni._t(s),this.ni},i.prototype.aa=function(){var t=this;this.sa.forEach((function(i){i.j=t.ra.wa().La(i.Ct).Fa}))},i.prototype.ba=function(t,i,n){return U(U({},this.Ta(t,i,n)),{j:n.La(t).Fa})},i}(as),cs=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return q(i,t),i.prototype.Kl=function(t){var i=this.dt,n=t.createLinearGradient(0,0,0,i.Xl),s=Si(i.Jl/i.Xl,0,1);return n.addColorStop(0,i.Ea),n.addColorStop(s,i.Aa),n.addColorStop(s,i.Ba),n.addColorStop(1,i.Da),n},i}(Zn),vs=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return q(i,t),i.prototype.Ql=function(t){var i=this.dt,n=t.createLinearGradient(0,0,0,i.Xl),s=Si(i.Jl/i.Xl,0,1);return n.addColorStop(0,i.Zl),n.addColorStop(s,i.Zl),n.addColorStop(s,i.Gl),n.addColorStop(1,i.Gl),n},i}(Qn),ds=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Pa=new cs,s.Oa=new vs,s.St=new rt,s.St.ut([s.Pa,s.Oa]),s}return q(i,t),i.prototype.Dt=function(t,i){if(!this.ra.Vt())return null;var n=this.ra.Wt();if(null===n)return null;var s=this.ra.K();this.ua();var h=this.ra.Ht().jt(s.baseValue.price,n.qt),r=this.Gn.Rt().ya();return this.Pa._t({Mt:this.sa,Ea:s.topFillColor1,Aa:s.topFillColor2,Ba:s.bottomFillColor1,Da:s.bottomFillColor2,Qt:s.lineWidth,ti:s.lineStyle,$l:0,Jl:h,Xl:t,wt:this.ha,Yl:r}),this.Oa._t({Mt:this.sa,Zl:s.topLineColor,Gl:s.bottomLineColor,Qt:s.lineWidth,ti:s.lineStyle,$l:0,Jl:h,Xl:t,wt:this.ha,Yl:r}),this.St},i.prototype.ba=function(t,i){return this._a(t,i)},i}(us),_s=function(){function t(){this.$t=null,this.ka=0}return t.prototype._t=function(t){this.$t=t},t.prototype.ot=function(t,i,n,s){if(null!==this.$t&&0!==this.$t.En.length&&null!==this.$t.wt){if(this.ka=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),h=Math.floor(t*i),r=Math.min(s,h);return Math.max(Math.floor(i),r)}(this.$t.ya,i),this.ka>=2)Math.floor(i)%2!=this.ka%2&&this.ka--;var h=this.$t.En;this.$t.Ra&&this.za(t,h,this.$t.wt,i),this.$t.Va&&this.vl(t,h,this.$t.wt,this.$t.ya,i);var r=this.Wa(i);(!this.$t.Va||this.ka>2*r)&&this.Ia(t,h,this.$t.wt,i)}},t.prototype.za=function(t,i,n,s){if(null!==this.$t){var h="",r=Math.min(Math.floor(s),Math.floor(this.$t.ya*s));r=Math.max(Math.floor(s),Math.min(r,this.ka));for(var e=Math.floor(.5*r),u=null,o=n.from;o<n.to;o++){var l=i[o];l.ja!==h&&(t.fillStyle=l.ja,h=l.ja);var a=Math.round(Math.min(l.Oe,l.Ve)*s),f=Math.round(Math.max(l.Oe,l.Ve)*s),c=Math.round(l.Re*s),v=Math.round(l.ze*s),d=Math.round(s*l.bt)-e,_=d+r-1;null!==u&&(d=Math.max(u+1,d),d=Math.min(d,_));var w=_-d+1;t.fillRect(d,c,w,a-c),t.fillRect(d,f+1,w,v-f),u=_}}},t.prototype.Wa=function(t){var i=Math.floor(1*t);this.ka<=2*i&&(i=Math.floor(.5*(this.ka-1)));var n=Math.max(Math.floor(t),i);return this.ka<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.vl=function(t,i,n,s,h){if(null!==this.$t)for(var r="",e=this.Wa(h),u=null,o=n.from;o<n.to;o++){var l=i[o];l.Ut!==r&&(t.fillStyle=l.Ut,r=l.Ut);var a=Math.round(l.bt*h)-Math.floor(.5*this.ka),f=a+this.ka-1,c=Math.round(Math.min(l.Oe,l.Ve)*h),v=Math.round(Math.max(l.Oe,l.Ve)*h);if(null!==u&&(a=Math.max(u+1,a),a=Math.min(a,f)),this.$t.ya*h>2*e)vt(t,a,c,f-a+1,v-c+1,e);else{var d=f-a+1;t.fillRect(a,c,d,v-c+1)}u=f}},t.prototype.Ia=function(t,i,n,s){if(null!==this.$t)for(var h="",r=this.Wa(s),e=n.from;e<n.to;e++){var u=i[e],o=Math.round(Math.min(u.Oe,u.Ve)*s),l=Math.round(Math.max(u.Oe,u.Ve)*s),a=Math.round(u.bt*s)-Math.floor(.5*this.ka),f=a+this.ka-1;if(u.j!==h){var c=u.j;t.fillStyle=c,h=c}this.$t.Va&&(a+=r,o+=r,f-=r,l-=r),o>l||t.fillRect(a,o,f-a+1,l-o+1)}},t}(),ws=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ni=new _s,i}return q(i,t),i.prototype.Dt=function(t,i){if(!this.ra.Vt())return null;var n=this.ra.K();this.ua();var s={En:this.sa,ya:this.Gn.Rt().ya(),Ra:n.wickVisible,Va:n.borderVisible,wt:this.ha};return this.ni._t(s),this.ni},i.prototype.aa=function(){var t=this;this.sa.forEach((function(i){var n=t.ra.wa().La(i.Ct);i.j=n.Fa,i.ja=n.Ha,i.Ut=n.qa}))},i.prototype.ba=function(t,i,n){var s=n.La(t);return U(U({},this.Ta(t,i,n)),{j:s.Fa,ja:s.Ha,Ut:s.qa})},i}(as),Ms=function(){function t(){this.$t=null,this.Ua=[]}return t.prototype._t=function(t){this.$t=t,this.Ua=[]},t.prototype.ot=function(t,i,n,s){if(null!==this.$t&&0!==this.$t.Mt.length&&null!==this.$t.wt){this.Ua.length||this.Ya(i);for(var h=Math.max(1,Math.floor(i)),r=Math.round(this.$t.Ja*i)-Math.floor(h/2),e=r+h,u=this.$t.wt.from;u<this.$t.wt.to;u++){var o=this.$t.Mt[u],l=this.Ua[u-this.$t.wt.from],a=Math.round(o.gt*i);t.fillStyle=o.j;var f=void 0,c=void 0;a<=r?(f=a,c=e):(f=r,c=a-Math.floor(h/2)+h),t.fillRect(l.ou,f,l.lu-l.ou+1,c-f)}}},t.prototype.Ya=function(t){if(null!==this.$t&&0!==this.$t.Mt.length&&null!==this.$t.wt){var i=Math.ceil(this.$t.ya*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.$t.ya*t)-i;this.Ua=new Array(this.$t.wt.to-this.$t.wt.from);for(var s=this.$t.wt.from;s<this.$t.wt.to;s++){var h,r=this.$t.Mt[s],e=Math.round(r.bt*t),u=void 0,o=void 0;if(n%2)u=e-(h=(n-1)/2),o=e+h;else u=e-(h=n/2),o=e+h-1;this.Ua[s-this.$t.wt.from]={ou:u,lu:o,$a:e,Ka:r.bt*t,Ct:r.Ct}}for(s=this.$t.wt.from+1;s<this.$t.wt.to;s++){var l=this.Ua[s-this.$t.wt.from],a=this.Ua[s-this.$t.wt.from-1];l.Ct===a.Ct+1&&(l.ou-a.lu!==i+1&&(a.$a>a.Ka?a.lu=l.ou-i-1:l.ou=a.lu+i+1))}var f=Math.ceil(this.$t.ya*t);for(s=this.$t.wt.from;s<this.$t.wt.to;s++){(l=this.Ua[s-this.$t.wt.from]).lu<l.ou&&(l.lu=l.ou);var c=l.lu-l.ou+1;f=Math.min(c,f)}if(i>0&&f<4)for(s=this.$t.wt.from;s<this.$t.wt.to;s++){(c=(l=this.Ua[s-this.$t.wt.from]).lu-l.ou+1)>f&&(l.$a>l.Ka?l.lu-=1:l.ou+=1)}}else this.Ua=[]},t}();function bs(t){return{Mt:[],ya:t,Ja:NaN,wt:null}}function ms(t,i,n){return{Ct:t,Nt:i,bt:NaN,gt:NaN,j:n}}var ps=function(t){function i(i,n){var s=t.call(this,i,n,!1)||this;return s.St=new rt,s.Xa=bs(0),s.ni=new Ms,s}return q(i,t),i.prototype.Dt=function(t,i){return this.ra.Vt()?(this.ua(),this.St):null},i.prototype.oa=function(){var t=this.Gn.Rt().ya();this.Xa=bs(t);for(var i=0,n=0,s=this.ra.K().color,h=0,r=this.ra.En().Ma();h<r.length;h++){var e=r[h],u=e.qt[3],o=void 0!==e.j?e.j:s,l=ms(e.ma,u,o);++i<this.Xa.Mt.length?this.Xa.Mt[i]=l:this.Xa.Mt.push(l),this.sa[n++]={Ct:e.ma,bt:0}}this.ni._t(this.Xa),this.St.ut([this.ni])},i.prototype.aa=function(){},i.prototype.fa=function(){t.prototype.fa.call(this),this.Xa.wt=null},i.prototype.va=function(t,i,n){if(null!==this.ha){var s=i.ya(),h=E(i.es()),r=t.jt(this.ra.K().base,n);i.da(this.Xa.Mt),t.Be(this.Xa.Mt,n),this.Xa.Ja=r,this.Xa.wt=rs(this.Xa.Mt,h,!1),this.Xa.ya=s,this.ni._t(this.Xa)}},i}(es),gs=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ga=new ts,s}return q(i,t),i.prototype.Dt=function(t,i){if(!this.ra.Vt())return null;var n=this.ra.K();this.ua();var s={Mt:this.sa,xt:n.color,ti:n.lineStyle,$l:n.lineType,Qt:n.lineWidth,wt:this.ha,Yl:this.Gn.Rt().ya()};return this.ga._t(s),this.ga},i.prototype.aa=function(){var t=this;this.sa.forEach((function(i){i.j=t.ra.wa().La(i.Ct).Fa}))},i.prototype.ba=function(t,i,n){var s=this._a(t,i);return s.j=n.La(t).Fa,s},i}(us),ys=/[2-9]/g,ks=function(){function t(t){void 0===t&&(t=50),this.Za=new Map,this.Ga=0,this.Qa=Array.from(new Array(t))}return t.prototype.tf=function(){this.Za.clear(),this.Qa.fill(void 0)},t.prototype.Mi=function(t,i,n){var s=n||ys,h=String(i).replace(s,"0"),r=this.Za.get(h);if(void 0===r){if(0===(r=t.measureText(h).width)&&0!==i.length)return 0;var e=this.Qa[this.Ga];void 0!==e&&this.Za.delete(e),this.Qa[this.Ga]=h,this.Ga=(this.Ga+1)%this.Qa.length,this.Za.set(h,r)}return r},t}(),xs=function(){function t(t){this.if=null,this.P=null,this.nf="right",this.yu=0,this.sf=t}return t.prototype.hf=function(t,i,n,s){this.if=t,this.P=i,this.yu=n,this.nf=s},t.prototype.ot=function(t,i){null!==this.P&&null!==this.if&&this.if.ot(t,this.P,this.sf,this.yu,this.nf,i)},t}(),Cs=function(){function t(t,i,n){this.rf=t,this.sf=new ks(50),this.ef=i,this.$=n,this.X=-1,this.ni=new xs(this.sf)}return t.prototype.Dt=function(t,i){var n=this.$.$o(this.ef);if(null===n)return null;var s=n.zu(this.ef)?n.io():this.ef.Ht();if(null===s)return null;var h=n.Yu(s);if("overlay"===h)return null;var r=this.$.uf();return r.V!==this.X&&(this.X=r.V,this.sf.tf()),this.ni.hf(this.rf.Li(),r,i,h),this.ni},t}(),Ns=function(){function t(){this.$t=null}return t.prototype._t=function(t){this.$t=t},t.prototype.ot=function(t,i,n,s){if(null!==this.$t&&!1!==this.$t.Vt){var h=Math.round(this.$t.gt*i);if(!(h<0||h>Math.ceil(this.$t.li*i))){var r=0;!0===this.$t.lf&&(r=this.$t.af);var e=Math.ceil(this.$t.oi*i);t.lineCap="butt",t.strokeStyle=this.$t.j,t.lineWidth=Math.floor(this.$t.Qt*i),g(t,this.$t.ti),k(t,h,r,e)}}},t}(),Ss=function(){function t(t){this.ff={oi:0,li:0,gt:0,j:"rgba(0, 0, 0, 0)",Qt:1,ti:0,Vt:!1,lf:!1,af:0},this.Go=new Ns,this.Lt=!0,this.ra=t,this.Gn=t.ri(),this.Go._t(this.ff)}return t.prototype.At=function(){this.Lt=!0},t.prototype.Dt=function(t,i){return this.ra.Vt()?(this.Lt&&(this.fs(t,i),this.Lt=!1),this.Go):null},t}(),Ts=function(t){function i(i){return t.call(this,i)||this}return q(i,t),i.prototype.fs=function(t,i){this.ff.Vt=!1;var n=this.ra.Ht(),s=n.Me().Me;if(2===s||3===s){var h=this.ra.K();if(h.baseLineVisible&&this.ra.Vt()){var r=this.ra.Wt();null!==r&&(this.ff.Vt=!0,this.ff.gt=n.jt(r.qt,r.qt),this.ff.oi=i,this.ff.li=t,this.ff.j=h.baseLineColor,this.ff.Qt=h.baseLineWidth,this.ff.ti=h.baseLineStyle)}}},i}(Ss),Fs=function(){function t(){this.$t=null}return t.prototype._t=function(t){this.$t=t},t.prototype.Mh=function(){return this.$t},t.prototype.ot=function(t,i,n,s){var h=this.$t;if(null!==h){t.save();var r=Math.max(1,Math.floor(i)),e=r%2/2,u=Math.round(h.Ka.x*i)+e,o=h.Ka.y*i;t.fillStyle=h.cf,t.beginPath();var l=Math.max(2,1.5*h.vf)*i;t.arc(u,o,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=h.df,t.beginPath(),t.arc(u,o,h.kt*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=h._f,t.beginPath(),t.arc(u,o,h.kt*i+r/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),Ls=[{wf:0,Mf:.25,bf:4,mf:10,pf:.25,gf:0,yf:.4,kf:.8},{wf:.25,Mf:.525,bf:10,mf:14,pf:0,gf:0,yf:.8,kf:0},{wf:.525,Mf:1,bf:14,mf:14,pf:0,gf:0,yf:0,kf:0}];function Es(t,i,n,s){return I(t,n+(s-n)*i)}function As(t,i){for(var n,s=t%2600/2600,h=0,r=Ls;h<r.length;h++){var e=r[h];if(s>=e.wf&&s<=e.Mf){n=e;break}}F(void 0!==n,"Last price animation internal logic error");var u,o,l,a=(s-n.wf)/(n.Mf-n.wf);return{df:Es(i,a,n.pf,n.gf),_f:Es(i,a,n.yf,n.kf),kt:(u=a,o=n.bf,l=n.mf,o+(l-o)*u)}}var Bs=function(){function t(t){this.ni=new Fs,this.Lt=!0,this.xf=!0,this.Cf=performance.now(),this.Nf=this.Cf-1,this.Sf=t}return t.prototype.Tf=function(){this.Nf=this.Cf-1,this.At()},t.prototype.Ff=function(){if(this.At(),2===this.Sf.K().lastPriceAnimation){var t=performance.now(),i=this.Nf-t;if(i>0)return void(i<650&&(this.Nf+=2600));this.Cf=t,this.Nf=t+2600}},t.prototype.At=function(){this.Lt=!0},t.prototype.Lf=function(){this.xf=!0},t.prototype.Vt=function(){return 0!==this.Sf.K().lastPriceAnimation},t.prototype.Ef=function(){switch(this.Sf.K().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Nf}},t.prototype.Dt=function(t,i){return this.Lt?(this.Pt(t,i),this.Lt=!1,this.xf=!1):this.xf&&(this.Af(),this.xf=!1),this.ni},t.prototype.Pt=function(t,i){this.ni._t(null);var n=this.Sf.ri().Rt(),h=n.es(),r=this.Sf.Wt();if(null!==h&&null!==r){var e=this.Sf.Bf(!0);if(!e.Df&&h.Pf(e.ma)){var u=new s(n.Jt(e.ma),this.Sf.Ht().jt(e.Nt,r.qt)),o=e.j,l=this.Sf.K().lineWidth,a=As(this.Of(),o);this.ni._t({cf:o,vf:l,df:a.df,_f:a._f,kt:a.kt,Ka:u})}}},t.prototype.Af=function(){var t=this.ni.Mh();if(null!==t){var i=As(this.Of(),t.cf);t.df=i.df,t._f=i._f,t.kt=i.kt}},t.prototype.Of=function(){return this.Ef()?performance.now()-this.Cf:2599},t}();function Ds(t,i){return Ei(Math.min(Math.max(t,12),30)*i)}function Ps(t,i){switch(t){case"arrowDown":case"arrowUp":case"triangle":return Ds(i,1);case"circle":return Ds(i,.8);case"square":return Ds(i,.7)}}function Os(t){return Li(Ds(t,1))}function Rs(t){return Math.max(Ds(t,.1),3)}function zs(t,i,n,s,h){var r=(Ps("arrowUp",h)-1)/2,e=(Ei(h/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,s),i.lineTo(n,s-r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s+r),i.lineTo(n-e,s+r),i.lineTo(n-e,s)):(i.moveTo(n-r,s),i.lineTo(n,s+r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s-r),i.lineTo(n-e,s-r),i.lineTo(n-e,s)),i.fill()}var Vs=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.$t=null,i.sf=new ks,i.X=-1,i.Z="",i.Rf="",i}return q(i,t),i.prototype._t=function(t){this.$t=t},i.prototype.hf=function(t,i){this.X===t&&this.Z===i||(this.X=t,this.Z=i,this.Rf=st(t,i),this.sf.tf())},i.prototype.lt=function(t,i){return null},i.prototype.ft=function(t,i,n){if(null!==this.$t&&null!==this.$t.wt){t.textBaseline="middle",t.font=this.Rf;for(var s=this.$t.wt.from;s<this.$t.wt.to;s++){var h=this.$t.Mt[s];void 0!==h.wi&&(h.wi.oi=this.sf.Mi(t,h.wi.zf),h.wi.li=this.X),Ws(h,t)}}},i}(et);function Ws(t,i){var n,s,h=t.Vf||("bottom"===t.Wf?180:"right"===t.Wf?90:"left"===t.Wf?-90:0);i.strokeStyle=(null===(n=t.If)||void 0===n?void 0:n.color)||"transparent",i.lineWidth=(null===(s=t.If)||void 0===s?void 0:s.width)||1,i.fillStyle=t.j,void 0!==t.wi&&function(t,i,n,s){t.fillText(i,n,s)}(i,t.wi.zf,t.bt-t.wi.oi/2,t.wi.gt),h&&(i.save(),i.translate(t.bt,t.gt),i.rotate(h*(Math.PI/180)),i.translate(-t.bt,-t.gt)),function(t,i){if(0===t.ca)return;switch(t.jf){case"triangle":return void function(t,i,n,s){var h=s/2;t.beginPath(),t.moveTo(i,n-h),t.lineTo(i+h,n+h),t.lineTo(i-h,n+h),t.closePath(),t.fill(),t.stroke()}(i,t.bt,t.gt,t.ca);case"arrowDown":return void zs(!1,i,t.bt,t.gt,t.ca);case"arrowUp":return void zs(!0,i,t.bt,t.gt,t.ca);case"circle":return void function(t,i,n,s){var h=(Ps("circle",s)-1)/2;t.beginPath(),t.arc(i,n,h,0,2*Math.PI,!1),t.fill()}(i,t.bt,t.gt,t.ca);case"square":return void function(t,i,n,s){var h=Ps("square",s),r=(h-1)/2,e=i-r,u=n-r;t.fillRect(e,u,h,h)}(i,t.bt,t.gt,t.ca)}t.jf}(t,i),h&&i.restore()}function Is(t,i,n,s,h,r,e,u,o){var l=K(n)?n:n.close,a=K(n)?n:n.high,f=K(n)?n:n.low,c=K(i.size)?Math.max(i.size,0):1,v=Os(u.ya())*c,d=v/2;switch(t.ca=v,i.position){case"price":var _=i.price||l,w=i.anchor||"center",M="top"===w?1:"bottom"===w?-1:0,b="left"===w?1:"right"===w?-1:0;return t.gt=e.jt(_,o)+d*M,t.bt=t.bt+d*b,void(void 0!==t.wi&&(t.wi.gt=t.gt+(d+r+.6*h)*M||1));case"inBar":return t.gt=e.jt(l,o),void(void 0!==t.wi&&(t.wi.gt=t.gt+d+r+.6*h));case"aboveBar":return t.gt=e.jt(a,o)-d-s.Hf,void 0!==t.wi&&(t.wi.gt=t.gt-d-.6*h,s.Hf+=1.2*h),void(s.Hf+=v+r);case"belowBar":return t.gt=e.jt(f,o)+d+s.qf,void 0!==t.wi&&(t.wi.gt=t.gt+d+r+.6*h,s.qf+=1.2*h),void(s.qf+=v+r)}i.position}var js=function(){function t(t,i){this.Lt=!0,this.Uf=!0,this.Yf=!0,this.Jf=null,this.ni=new Vs,this.Sf=t,this.Ri=i,this.$t={Mt:[],wt:null}}return t.prototype.At=function(t){this.Lt=!0,this.Yf=!0,"data"===t&&(this.Uf=!0)},t.prototype.Dt=function(t,i,n){if(!this.Sf.Vt())return null;this.Lt&&this.ua();var s=this.Ri.K().layout;return this.ni.hf(s.fontSize,s.fontFamily),this.ni._t(this.$t),this.ni},t.prototype.$f=function(){if(this.Yf){if(this.Sf.Kf().length>0){var t=this.Ri.Rt().ya(),i=Rs(t),n=1.5*Os(t)+2*i;this.Jf={above:n,below:n}}else this.Jf=null;this.Yf=!1}return this.Jf},t.prototype.ua=function(){var t=this.Sf.Ht(),i=this.Ri.Rt(),n=this.Sf.Kf();this.Uf&&(this.$t.Mt=n.map((function(t){return{Ct:t.time,bt:0,gt:0,ca:0,jf:t.shape,j:t.color,Xf:t.Xf,Zf:t.id,wi:void 0}})),this.Uf=!1);var s=this.Ri.K().layout;this.$t.wt=null;var h=i.es();if(null!==h){var r=this.Sf.Wt();if(null!==r&&0!==this.$t.Mt.length){var e=NaN,u=Rs(i.ya()),o={Hf:u,qf:u};this.$t.wt=rs(this.$t.Mt,h,!0);for(var l=this.$t.wt.from;l<this.$t.wt.to;l++){var a=n[l];a.time!==e&&(o.Hf=u,o.qf=u,e=a.time);var f=this.$t.Mt[l];f.bt=i.Jt(a.time),void 0!==a.text&&a.text.length>0&&(f.wi={zf:a.text,gt:0,oi:0,li:0});var c=this.Sf.Gf(a.time);null!==c&&Is(f,a,c,o,s.fontSize,u,t,i,r.qt)}this.Lt=!1}}},t}(),Hs=function(t){function i(i){return t.call(this,i)||this}return q(i,t),i.prototype.fs=function(t,i){var n=this.ff;n.Vt=!1;var s=this.ra.K();if(s.priceLineVisible&&this.ra.Vt()){var h=this.ra.Bf(0===s.priceLineSource);h.Df||(n.Vt=!0,n.gt=h.bi,n.j=this.ra.fh(h.j),n.oi=i,n.li=t,n.Qt=s.priceLineWidth,n.ti=s.priceLineStyle)}},i}(Ss),qs=function(t){function i(i){var n=t.call(this)||this;return n.si=i,n}return q(i,t),i.prototype.Ei=function(t,i,n){t.Vt=!1,i.Vt=!1;var s=this.si;if(s.Vt()){var h=s.K(),r=h.lastValueVisible,e=""!==s.Qf(),u=0===h.seriesLastValueMode,o=s.Bf(!1);if(!o.Df){r&&(t.wi=this.tc(o,r,u),t.Vt=0!==t.wi.length),(e||u)&&(i.wi=this.nc(o,r,e,u),i.Vt=i.wi.length>0);var l=s.fh(o.j),a=j(l);n.m=a.m,n.j=a.p,n.bi=o.bi,i.Ut=s.ri().Yt(o.bi/s.Ht().li()),t.Ut=l}}},i.prototype.nc=function(t,i,n,s){var h="",r=this.si.Qf();return n&&0!==r.length&&(h+="".concat(r," ")),i&&s&&(h+=this.si.Ht().pe()?t.sc:t.hc),h.trim()},i.prototype.tc=function(t,i,n){return i?n?this.si.Ht().pe()?t.hc:t.sc:t.wi:""},i}(bt),Us=function(){function t(t,i){this.Kr=t,this.rc=i||null}return t.prototype.Le=function(){return this.Kr},t.prototype.au=function(){return this.rc},t.prototype.Lr=function(){return null===this.Kr?null:{priceRange:this.Kr.Lr(),margins:this.rc||void 0}},t.Er=function(i){return null===i?null:new t(Ni.Er(i.priceRange),i.margins)},t}(),Ys=function(t){function i(i,n){var s=t.call(this,i)||this;return s.ec=n,s}return q(i,t),i.prototype.uc=function(){var t=this.ec.K();return this.oc(t.rayStart)},i.prototype.fs=function(t,i){var n=this.ff;n.Vt=!1;var s=this.ec.K();if(this.ra.Vt()&&s.lineVisible){var h=this.ec.lc();if(null!==h){var r=this.uc();null!==r&&(n.Vt=!0,n.gt=h,n.j=s.color,n.oi=i,n.li=t,n.Qt=s.lineWidth,n.ti=s.lineStyle,n.lf=s.ray,n.af=r)}}},i.prototype.oc=function(t){var i=this.ra.ri().Rt(),n=i.ac({vs:t},!0);return i.et()||null===n?null:i.Jt(n)},i}(Ss),Js=function(t){function i(i,n){var s=t.call(this)||this;return s.Sf=i,s.ec=n,s}return q(i,t),i.prototype.Ei=function(t,i,n){t.Vt=!1,i.Vt=!1;var s=this.ec.K(),h=s.axisLabelVisible,r=""!==s.title,e=this.Sf;if(h&&e.Vt()){var u=this.ec.lc();if(null!==u){r&&(i.wi=s.title,i.Vt=!0),i.Ut=e.ri().Yt(u/e.Ht().li()),t.wi=e.Ht().nu(s.price),t.Vt=!0;var o=j(s.color);n.m=o.m,n.j=o.p,n.bi=u}}},i}(bt),$s=function(){function t(t,i){this.Sf=t,this.un=i,this.fc=new Ys(t,this),this.rf=new Js(t,this),this.cc=new Cs(this.rf,t,t.ri())}return t.prototype.$s=function(t){$(this.un,t),this.At(),this.Sf.ri().eo()},t.prototype.K=function(){return this.un},t.prototype.xn=function(){return[this.fc,this.cc]},t.prototype.vc=function(){return this.rf},t.prototype.At=function(){this.fc.At(),this.rf.At()},t.prototype.lc=function(){var t=this.Sf,i=t.Ht();if(t.ri().Rt().et()||i.et())return null;var n=t.Wt();return null===n?null:i.jt(this.un.price,n.qt)},t}(),Ks={Fa:"",qa:"",Ha:""},Xs=function(){function t(t){this.Sf=t}return t.prototype.La=function(t,i){var n=this.Sf.dc(),s=this.Sf.K();switch(n){case"Line":return this._c(s,t,i);case"Area":return this.wc(s);case"Baseline":return this.Mc(s,t,i);case"Bar":return this.bc(s,t,i);case"Candlestick":return this.mc(s,t,i);case"Histogram":return this.gc(s,t,i)}throw new Error("Unknown chart style")},t.prototype.bc=function(t,i,n){var s=U({},Ks),h=t.upColor,r=t.downColor,e=h,u=r,o=E(this.yc(i,n)),l=A(o.qt[0])<=A(o.qt[3]);return void 0!==o.j?(s.Fa=o.j,s.qa=o.j):(s.Fa=l?h:r,s.qa=l?e:u),s},t.prototype.mc=function(t,i,n){var s,h,r,e=U({},Ks),u=t.upColor,o=t.downColor,l=t.borderUpColor,a=t.borderDownColor,f=t.wickUpColor,c=t.wickDownColor,v=E(this.yc(i,n)),d=A(v.qt[0])<=A(v.qt[3]);return e.Fa=null!==(s=v.j)&&void 0!==s?s:d?u:o,e.qa=null!==(h=v.Ut)&&void 0!==h?h:d?l:a,e.Ha=null!==(r=v.ja)&&void 0!==r?r:d?f:c,e},t.prototype.wc=function(t){return U(U({},Ks),{Fa:t.lineColor})},t.prototype.Mc=function(t,i,n){var s=E(this.yc(i,n)).qt[3]>=t.baseValue.price;return U(U({},Ks),{Fa:s?t.topLineColor:t.bottomLineColor})},t.prototype._c=function(t,i,n){var s,h=E(this.yc(i,n));return U(U({},Ks),{Fa:null!==(s=h.j)&&void 0!==s?s:t.color})},t.prototype.gc=function(t,i,n){var s=U({},Ks),h=E(this.yc(i,n));return s.Fa=void 0!==h.j?h.j:t.color,s},t.prototype.yc=function(t,i){return void 0!==i?i.qt:this.Sf.En().kc(t)},t}(),Zs=30,Gs=function(){function t(){this.xc=[],this.Cc=new Map,this.Nc=new Map}return t.prototype.Sc=function(){return this.ca()>0?this.xc[this.xc.length-1]:null},t.prototype.Tc=function(){return this.ca()>0?this.Fc(0):null},t.prototype.Ln=function(){return this.ca()>0?this.Fc(this.xc.length-1):null},t.prototype.ca=function(){return this.xc.length},t.prototype.et=function(){return 0===this.ca()},t.prototype.Pf=function(t){return null!==this.Lc(t,0)},t.prototype.kc=function(t){return this.Ec(t)},t.prototype.Ec=function(t,i){void 0===i&&(i=0);var n=this.Lc(t,i);return null===n?null:U(U({},this.Ac(n)),{ma:this.Fc(n)})},t.prototype.Ma=function(){return this.xc},t.prototype.Bc=function(t,i,n){if(this.et())return null;for(var s=null,h=0,r=n;h<r.length;h++){var e=r[h];s=Qs(s,this.Dc(t,i,e))}return s},t.prototype._t=function(t){this.Nc.clear(),this.Cc.clear(),this.xc=t},t.prototype.Fc=function(t){return this.xc[t].ma},t.prototype.Ac=function(t){return this.xc[t]},t.prototype.Lc=function(t,i){var n=this.Pc(t);if(null===n&&0!==i)switch(i){case-1:return this.Oc(t);case 1:return this.Rc(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.Oc=function(t){var i=this.zc(t);return i>0&&(i-=1),i!==this.xc.length&&this.Fc(i)<t?i:null},t.prototype.Rc=function(t){var i=this.Vc(t);return i!==this.xc.length&&t<this.Fc(i)?i:null},t.prototype.Pc=function(t){var i=this.zc(t);return i===this.xc.length||t<this.xc[i].ma?null:i},t.prototype.zc=function(t){return is(this.xc,t,(function(t,i){return t.ma<i}))},t.prototype.Vc=function(t){return ns(this.xc,t,(function(t,i){return i.ma>t}))},t.prototype.Wc=function(t,i,n){for(var s=null,h=t;h<i;h++){var r=this.xc[h].qt[n];Number.isNaN(r)||(null===s?s={t:r,i:r}:(r<s.t&&(s.t=r),r>s.i&&(s.i=r)))}return s},t.prototype.Dc=function(t,i,n){if(this.et())return null;var s=null,h=E(this.Tc()),r=E(this.Ln()),e=Math.max(t,h),u=Math.min(i,r),o=Math.ceil(e/Zs)*Zs,l=Math.max(o,Math.floor(u/Zs)*Zs),a=this.zc(e),f=this.Vc(Math.min(u,o,i));s=Qs(s,this.Wc(a,f,n));var c=this.Cc.get(n);void 0===c&&(c=new Map,this.Cc.set(n,c));for(var v=Math.max(o+1,e);v<l;v+=Zs){var d=Math.floor(v/Zs),_=c.get(d);if(void 0===_){var w=this.zc(d*Zs),M=this.Vc((d+1)*Zs-1);_=this.Wc(w,M,n),c.set(d,_)}s=Qs(s,_)}a=this.zc(l),f=this.Vc(u);return s=Qs(s,this.Wc(a,f,n))},t}();function Qs(t,i){return null===t?i:null===i?t:{t:Math.min(t.t,i.t),i:Math.max(t.i,i.i)}}var th=function(t){function i(i,n,s){var h=t.call(this,i)||this;h.$t=new Gs,h.fc=new Hs(h),h.Ic=[],h.jc=new Ts(h),h.Hc=null,h.qc=null,h.Uc=[],h.Yc=[],h.Jc=null,h.un=n,h.$c=s;var r=new qs(h);return h.tn=[r],h.cc=new Cs(r,h,i),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.Hc=new Bs(h)),h.Kc(),h.Xc(),h}return q(i,t),i.prototype.D=function(){null!==this.Jc&&clearTimeout(this.Jc)},i.prototype.fh=function(t){return this.un.priceLineColor||t},i.prototype.Bf=function(t){var i={Df:!0},n=this.Ht();if(this.ri().Rt().et()||n.et()||this.$t.et())return i;var s,h,r=this.ri().Rt().es(),e=this.Wt();if(null===r||null===e)return i;if(t){var u=this.$t.Sc();if(null===u)return i;s=u,h=u.ma}else{var o=this.$t.Ec(r.lu(),-1);if(null===o)return i;if(null===(s=this.$t.kc(o.ma)))return i;h=o.ma}var l=s.qt[3],a=this.wa().La(h,{qt:s}),f=n.jt(l,e.qt);return{Df:!1,Nt:l,wi:n.Di(l,e.qt),sc:n.nu(l),hc:n.hu(l,e.qt),j:a.Fa,bi:f,ma:h}},i.prototype.wa=function(){return null!==this.qc||(this.qc=new Xs(this)),this.qc},i.prototype.K=function(){return this.un},i.prototype.$s=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.un.priceScaleId&&this.ri().Zc(this,i),$(this.un,t),null!==this.Ii&&void 0!==t.scaleMargins&&this.Ii.$s({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&(this.Kc(),this.ri().Gc()),this.ri().Ds(this),this.ri().Qc(),this._n.At("options")},i.prototype._t=function(t,i){this.$t._t(t),this.tv(),this._n.At("data"),this.ln.At("data"),null!==this.Hc&&(i&&i.iv?this.Hc.Ff():0===t.length&&this.Hc.Tf());var n=this.ri().$o(this);this.ri().nv(n),this.ri().Ds(this),this.ri().Qc(),this.ri().eo()},i.prototype.sv=function(t){this.Uc=t.map((function(t){return U({},t)})),this.tv();var i=this.ri().$o(this);this.ln.At("data"),this.ri().nv(i),this.ri().Ds(this),this.ri().Qc(),this.ri().eo()},i.prototype.Kf=function(){return this.Yc},i.prototype.hv=function(t){var i=new $s(this,t);return this.Ic.push(i),this.ri().Ds(this),i},i.prototype.rv=function(t){var i=this.Ic.indexOf(t);-1!==i&&this.Ic.splice(i,1),this.ri().Ds(this)},i.prototype.dc=function(){return this.$c},i.prototype.Wt=function(){var t=this.ev();return null===t?null:{qt:t.qt[3],Ye:t.Ct}},i.prototype.ev=function(){var t=this.ri().Rt().es();if(null===t)return null;var i=t.ou();return this.$t.Ec(i,1)},i.prototype.En=function(){return this.$t},i.prototype.Gf=function(t){var i=this.$t.kc(t);return null===i?null:"Bar"===this.$c||"Candlestick"===this.$c?{open:i.qt[0],high:i.qt[1],low:i.qt[2],close:i.qt[3]}:i.qt[3]},i.prototype.uv=function(t){var i=this,n=this.Hc;return null!==n&&n.Vt()?(null===this.Jc&&n.Ef()&&(this.Jc=setTimeout((function(){i.Jc=null,i.ri().ov()}),0)),n.Lf(),[n]):[]},i.prototype.xn=function(){var t=[];this.lv()||t.push(this.jc);for(var i=0,n=this.Ic;i<n.length;i++){var s=n[i];t.push.apply(t,s.xn())}return t.push(this._n,this.fc,this.cc,this.ln),t},i.prototype.Cn=function(t,i){if(i!==this.Ii&&!this.lv())return[];for(var n=Y([],this.tn,!0),s=0,h=this.Ic;s<h.length;s++){var r=h[s];n.push(r.vc())}return n},i.prototype.uh=function(t,i){var n=this;if(void 0!==this.un.autoscaleInfoProvider){var s=this.un.autoscaleInfoProvider((function(){var s=n.av(t,i);return null===s?null:s.Lr()}));return Us.Er(s)}return this.av(t,i)},i.prototype.eh=function(){return this.un.priceFormat.minMove},i.prototype.oh=function(){return this.ah},i.prototype.Sn=function(){var t;this._n.At(),this.ln.At();for(var i=0,n=this.tn;i<n.length;i++){n[i].At()}for(var s=0,h=this.Ic;s<h.length;s++){h[s].At()}this.fc.At(),this.jc.At(),null===(t=this.Hc)||void 0===t||t.At()},i.prototype.Ht=function(){return E(t.prototype.Ht.call(this))},i.prototype.zt=function(t){if(!(("Line"===this.$c||"Area"===this.$c||"Baseline"===this.$c)&&this.un.crosshairMarkerVisible))return null;var i=this.$t.kc(t);return null===i?null:{Nt:i.qt[3],kt:this.fv(),Ut:this.cv(),It:this.vv(t)}},i.prototype.Qf=function(){return this.un.title},i.prototype.Vt=function(){return this.un.visible},i.prototype.lv=function(){return!St(this.Ht().qi())},i.prototype.av=function(t,i){if(!X(t)||!X(i)||this.$t.et())return null;var n="Line"===this.$c||"Area"===this.$c||"Baseline"===this.$c||"Histogram"===this.$c?[3]:[2,1],s=this.$t.Bc(t,i,n),h=null!==s?new Ni(s.t,s.i):null;if("Histogram"===this.dc()){var r=this.un.base,e=new Ni(r,r);h=null!==h?h.Jn(e):e}return new Us(h,this.ln.$f())},i.prototype.fv=function(){switch(this.$c){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerRadius}return 0},i.prototype.cv=function(){switch(this.$c){case"Line":case"Area":case"Baseline":var t=this.un.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},i.prototype.vv=function(t){switch(this.$c){case"Line":case"Area":case"Baseline":var i=this.un.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.wa().La(t).Fa},i.prototype.Kc=function(){switch(this.un.priceFormat.type){case"custom":this.ah={format:this.un.priceFormat.formatter};break;case"volume":this.ah=new Kn(this.un.priceFormat.precision);break;case"percent":this.ah=new Ci(this.un.priceFormat.precision);break;default:var t=Math.pow(10,this.un.priceFormat.precision);this.ah=new xi(t,this.un.priceFormat.minMove*t)}null!==this.Ii&&this.Ii._e()},i.prototype.tv=function(){var t=this,i=this.ri().Rt();if(i.et()||0===this.$t.ca())this.Yc=[];else{var n=E(this.$t.Tc());this.Yc=this.Uc.map((function(s,h){var r=E(i.ac(s.time,!0)),e=r<n?1:-1;return{time:E(t.$t.Ec(r,e)).ma,position:s.position,shape:s.shape,color:s.color,id:s.id,Xf:h,text:s.text,size:s.size}}))}},i.prototype.Xc=function(){switch(this.ln=new js(this,this.ri()),this.$c){case"Bar":this._n=new fs(this,this.ri());break;case"Candlestick":this._n=new ws(this,this.ri());break;case"Line":this._n=new gs(this,this.ri());break;case"Area":this._n=new os(this,this.ri());break;case"Baseline":this._n=new ds(this,this.ri());break;case"Histogram":this._n=new ps(this,this.ri());break;default:throw Error("Unknown chart style assigned: "+this.$c)}},i}($t),ih=function(){function t(t){this.dv=!0,this.un=t}return t.prototype.Jo=function(){this.dv=!0},t.prototype.jo=function(){this.dv=!1},t.prototype._v=function(t,i,n){var s=t;if(0===this.un.mode)return s;if(!this.dv)return t;var h=n.fn(),r=h.Wt();if(null===r)return s;var e=h.jt(t,r),u=n.Ie().filter((function(t){return t instanceof th})).reduce((function(t,s){if(n.zu(s)||!s.Vt())return t;var h=s.Ht(),r=s.En();if(h.et()||!r.Pf(i))return t;var e=r.kc(i);if(null===e)return t;var u=A(s.Wt());return t.concat([h.jt(e.qt[3],u.qt)],[h.jt(e.qt[2],u.qt)],[h.jt(e.qt[1],u.qt)],[h.jt(e.qt[0],u.qt)])}),[]);if(0===u.length)return s;u.sort((function(t,i){return Math.abs(t-e)-Math.abs(i-e)}));var o=u[0];return Math.abs(o-e)<this.un.magnetThreshold&&(s=h.cn(o,r)),s},t}(),nh=function(t){return t.getUTCFullYear()};function sh(t,i,n){return i.replace(/yyyy/g,function(t){return ki(nh(t),4)}(t)).replace(/yy/g,function(t){return ki(nh(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return ki(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return ki(function(t){return t.getUTCDate()}(t),2)}(t))}var hh=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.wv=t,this.Mv=i}return t.prototype.bv=function(t){return sh(t,this.wv,this.Mv)},t}(),rh=function(){function t(t){this.mv=t||"%h:%m:%s"}return t.prototype.bv=function(t){return this.mv.replace("%h",ki(t.getUTCHours(),2)).replace("%m",ki(t.getUTCMinutes(),2)).replace("%s",ki(t.getUTCSeconds(),2))},t}(),eh={pv:"yyyy-MM-dd",gv:"%h:%m:%s",yv:" ",kv:"default"},uh=function(){function t(t){void 0===t&&(t={});var i=U(U({},eh),t);this.xv=new hh(i.pv,i.kv),this.Cv=new rh(i.gv),this.Nv=i.yv}return t.prototype.bv=function(t){return"".concat(this.xv.bv(t)).concat(this.Nv).concat(this.Cv.bv(t))},t}();var oh=function(){function t(t,i){void 0===i&&(i=50),this.Sv=0,this.Tv=1,this.Fv=1,this.Za=new Map,this.Lv=new Map,this.Ev=t,this.Av=i}return t.prototype.bv=function(t){var i=void 0===t.Bv?new Date(1e3*t.vs).getTime():new Date(Date.UTC(t.Bv.year,t.Bv.month-1,t.Bv.day)).getTime(),n=this.Za.get(i);if(void 0!==n)return n.Dv;if(this.Sv===this.Av){var s=this.Lv.get(this.Fv);this.Lv.delete(this.Fv),this.Za.delete(L(s)),this.Fv++,this.Sv--}var h=this.Ev(t);return this.Za.set(i,{Dv:h,Pv:this.Tv}),this.Lv.set(this.Tv,i),this.Sv++,this.Tv++,h},t}(),lh=function(){function t(t,i){F(t<=i,"right should be >= left"),this.Ov=t,this.Rv=i}return t.prototype.ou=function(){return this.Ov},t.prototype.lu=function(){return this.Rv},t.prototype.zv=function(){return this.Rv-this.Ov+1},t.prototype.Pf=function(t){return this.Ov<=t&&t<=this.Rv},t.prototype.yr=function(t){return this.Ov===t.ou()&&this.Rv===t.lu()},t}();function ah(t,i){return null===t||null===i?t===i:t.yr(i)}var fh,ch=function(){function t(){this.Vv=new Map,this.Za=null}return t.prototype.Wv=function(t,i){this.Iv(i),this.Za=null;for(var n=i;n<t.length;++n){var s=t[n],h=this.Vv.get(s.jv);void 0===h&&(h=[],this.Vv.set(s.jv,h)),h.push({ma:n,Ct:s.Ct,Hv:s.jv})}},t.prototype.qv=function(t,i){var n=Math.ceil(i/t);return null!==this.Za&&this.Za.Uv===n||(this.Za={dr:this.Yv(n),Uv:n}),this.Za.dr},t.prototype.Iv=function(t){if(0!==t){var i=[];this.Vv.forEach((function(n,s){t<=n[0].ma?i.push(s):n.splice(is(n,t,(function(i){return i.ma<t})),1/0)}));for(var n=0,s=i;n<s.length;n++){var h=s[n];this.Vv.delete(h)}}else this.Vv.clear()},t.prototype.Yv=function(t){for(var i=[],n=0,s=Array.from(this.Vv.keys()).sort((function(t,i){return i-t}));n<s.length;n++){var h=s[n];if(this.Vv.get(h)){var r=i;i=[];for(var e=r.length,u=0,o=L(this.Vv.get(h)),l=o.length,a=1/0,f=-1/0,c=0;c<l;c++){for(var v=o[c],d=v.ma;u<e;){var _=r[u],w=_.ma;if(!(w<d)){a=w;break}u++,i.push(_),f=w,a=1/0}a-d>=t&&d-f>=t&&(i.push(v),f=d)}for(;u<e;u++)i.push(r[u])}}return i},t}(),vh=function(){function t(t){this.Jv=t}return t.prototype.$v=function(){return null===this.Jv?null:new lh(Math.floor(this.Jv.ou()),Math.ceil(this.Jv.lu()))},t.prototype.Kv=function(){return this.Jv},t.Xv=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(fh||(fh={}));var dh=function(){function t(t,i,n){this.yu=0,this.Zv=null,this.Gv=[],this.oe=null,this.ue=null,this.Qv=new ch,this.td=new Map,this.nd=vh.Xv(),this.sd=!0,this.hd=new J,this.rd=new J,this.ed=new J,this.ud=null,this.od=null,this.ld=[],this.un=i,this.fe=n,this.ad=i.rightOffset,this.fd=i.barSpacing,this.Ri=t,this.vd()}return t.prototype.K=function(){return this.un},t.prototype.dd=function(t){$(this.fe,t),this._d(),this.vd()},t.prototype.$s=function(t,i){var n;$(this.un,t),this.un.fixLeftEdge&&this.wd(),this.un.fixRightEdge&&this.Md(),void 0!==t.barSpacing&&this.Ri.qn(t.barSpacing),void 0!==t.rightOffset&&this.Ri.Un(t.rightOffset),void 0!==t.minBarSpacing&&this.Ri.qn(null!==(n=t.barSpacing)&&void 0!==n?n:this.fd),this._d(),this.vd(),this.ed.A()},t.prototype.vn=function(t){var i;return(null===(i=this.Gv[t])||void 0===i?void 0:i.Ct)||null},t.prototype.zi=function(t){var i,n,s,h,r=Math.floor(t),e=Math.ceil(t),u=null===(i=this.Gv[r])||void 0===i?void 0:i.Ct.vs,o=null===(n=this.Gv[e])||void 0===n?void 0:n.Ct.vs,l=null===(s=this.Gv[0])||void 0===s?void 0:s.Ct.vs,a=null===(h=this.Gv[this.Gv.length-1])||void 0===h?void 0:h.Ct.vs,f=this.Gv[1].Ct.vs-this.Gv[0].Ct.vs;return t>=this.Gv.length-1?{vs:a+f*(t-this.Gv.length+1)}:t<0?{vs:l-f*-t}:u&&o?{vs:u+(o-u)*(t-r)}:null},t.prototype.ac=function(t,i){if(this.Gv.length<1)return null;if(t.vs>this.Gv[this.Gv.length-1].Ct.vs)return i?this.Gv.length-1:null;var n=is(this.Gv,t.vs,(function(t,i){return t.Ct.vs<i}));return t.vs<this.Gv[n].Ct.vs?i?n:null:n},t.prototype.et=function(){return 0===this.yu||0===this.Gv.length||null===this.Zv},t.prototype.es=function(){return this.bd(),this.nd.$v()},t.prototype.md=function(){return this.bd(),this.nd.Kv()},t.prototype.tl=function(){var t=this.es();if(null===t)return null;var i={from:t.ou(),to:t.lu()};return this.pd(i)},t.prototype.pd=function(t){var i=Math.round(t.from),n=Math.round(t.to),s=E(this.gd()),h=E(this.yd());return{from:E(this.vn(Math.max(s,i))),to:E(this.vn(Math.min(h,n)))}},t.prototype.kd=function(t){return{from:E(this.ac(t.from,!0)),to:E(this.ac(t.to,!0))}},t.prototype.oi=function(){return this.yu},t.prototype.Ou=function(t){if(isFinite(t)&&!(t<=0)&&this.yu!==t){if(this.un.lockVisibleTimeRangeOnResize&&this.yu){var i=this.fd*t/this.yu;this.fd=i}if(this.un.fixLeftEdge){var n=this.es();if(null!==n)if(n.ou()<=0){var s=this.yu-t;this.ad-=Math.round(s/this.fd)+1}}this.yu=t,this.sd=!0,this.xd(),this.Cd()}},t.prototype.Jt=function(t){if(this.et()||!X(t))return 0;var i=this.Nd()+this.ad-t;return this.yu-(i+.5)*this.fd-1},t.prototype.da=function(t,i){for(var n=this.Nd(),s=void 0===i?0:i.from,h=void 0===i?t.length:i.to,r=s;r<h;r++){var e=t[r].Ct,u=n+this.ad-e,o=this.yu-(u+.5)*this.fd-1;t[r].bt=o}},t.prototype.Vi=function(t){var i=this.ac(t,!0),n=this.Gv[i].Ct.vs,s=this.Jt(i);if(n===t.vs)return s;if(0===i||i===this.Gv.length-1){var h=this.Gv[1].Ct.vs-this.Gv[0].Ct.vs;return s+(t.vs-n)/h*this.ya()}return s},t.prototype.Sd=function(t){return Math.ceil(this.Td(t))},t.prototype.Hs=function(t){var i=this.Gv[1].Ct.vs-this.Gv[0].Ct.vs,n=this.Sd(t);if(n>=this.Gv.length){var s=i*(n-this.Gv.length+1);return{vs:this.Gv[this.Gv.length-1].Ct.vs+s}}if(n<0){s=i*-n;return{vs:this.Gv[0].Ct.vs-s}}return this.Gv[n].Ct},t.prototype.Un=function(t){this.sd=!0,this.ad=t,this.Cd(),this.Ri.Fd(),this.Ri.eo()},t.prototype.ya=function(){return this.fd},t.prototype.qn=function(t){this.Ld(t),this.Cd(),this.Ri.Fd(),this.Ri.eo()},t.prototype.Ed=function(){return this.ad},t.prototype.dr=function(){if(this.et())return null;if(null!==this.od)return this.od;for(var t=this.fd,i=5*(this.Ri.K().layout.fontSize+4),n=Math.round(i/t),s=E(this.es()),h=Math.max(s.ou(),s.ou()-n),r=Math.max(s.lu(),s.lu()-n),e=this.Qv.qv(t,i),u=this.gd()+n,o=this.yd()-n,l=this.Ad(),a=this.un.fixLeftEdge||l,f=this.un.fixRightEdge||l,c=0,v=0,d=e;v<d.length;v++){var _=d[v];if(h<=_.ma&&_.ma<=r){var w=void 0;c<this.ld.length?((w=this.ld[c]).ur=this.Jt(_.ma),w.qr=this.Bd(_.Ct,_.Hv),w.Hv=_.Hv):(w={Dd:!1,ur:this.Jt(_.ma),qr:this.Bd(_.Ct,_.Hv),Hv:_.Hv},this.ld.push(w)),this.fd>i/2&&!l?w.Dd=!1:w.Dd=a&&_.ma<=u||f&&_.ma>=o,c++}}return this.ld.length=c,this.od=this.ld,this.ld},t.prototype.Pd=function(){this.sd=!0,this.qn(this.un.barSpacing),this.Un(this.un.rightOffset)},t.prototype.Od=function(t){this.sd=!0,this.Zv=t,this.Cd(),this.wd()},t.prototype.Rd=function(t,i){var n=this.Td(t),s=this.ya(),h=s+i*(s/10);this.qn(h),this.un.rightBarStaysOnScroll||this.Un(this.Ed()+(n-this.Td(t)))},t.prototype.Ke=function(t){this.oe&&this.tu(),null===this.ue&&null===this.ud&&(this.et()||(this.ue=t,this.zd()))},t.prototype.Xe=function(t){if(null!==this.ud){var i=Si(this.yu-t,0,this.yu),n=Si(this.yu-E(this.ue),0,this.yu);0!==i&&0!==n&&this.qn(this.ud.ya*i/n)}},t.prototype.Ze=function(){null!==this.ue&&(this.ue=null,this.Vd())},t.prototype.Ge=function(t){null===this.oe&&null===this.ud&&(this.et()||(this.oe=t,this.zd()))},t.prototype.Qe=function(t){if(null!==this.oe){var i=(this.oe-t)/this.ya();this.ad=E(this.ud).Ed+i,this.sd=!0,this.Cd()}},t.prototype.tu=function(){null!==this.oe&&(this.oe=null,this.Vd())},t.prototype.Wd=function(){this.Id(this.un.rightOffset)},t.prototype.Id=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.ad,h=performance.now(),r=function(){var e=(performance.now()-h)/i,u=e>=1,o=u?t:s+(t-s)*e;n.Un(o),u||setTimeout(r,20)};r()},t.prototype.At=function(t,i){this.sd=!0,this.Gv=t,this.Qv.Wv(t,i),this.Cd()},t.prototype.jd=function(){return this.hd},t.prototype.Hd=function(){return this.rd},t.prototype.qd=function(){return this.ed},t.prototype.Nd=function(){return this.Zv||0},t.prototype.Ud=function(t){var i=t.zv();this.Ld(this.yu/i),this.ad=t.lu()-this.Nd(),this.Cd(),this.sd=!0,this.Ri.Fd(),this.Ri.eo()},t.prototype.Yd=function(){var t=this.gd(),i=this.yd();null!==t&&null!==i&&this.Ud(new lh(t,i+this.un.rightOffset))},t.prototype.Jd=function(t){var i=new lh(t.from,t.to);this.Ud(i)},t.prototype.Wi=function(t){return void 0!==this.fe.timeFormatter?this.fe.timeFormatter(t.Bv||t.vs):this.$d.bv(new Date(1e3*t.vs))},t.prototype.Ad=function(){var t=this.Ri.K(),i=t.handleScroll,n=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||n.axisDoubleClickReset||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)},t.prototype.gd=function(){return 0===this.Gv.length?null:0},t.prototype.yd=function(){return 0===this.Gv.length?null:this.Gv.length-1},t.prototype.Kd=function(t){return(this.yu-1-t)/this.fd},t.prototype.Td=function(t){var i=this.Kd(t),n=this.Nd()+this.ad-i;return Math.round(1e6*n)/1e6},t.prototype.Ld=function(t){var i=this.fd;this.fd=t,this.xd(),i!==this.fd&&(this.sd=!0,this.Xd())},t.prototype.bd=function(){if(this.sd)if(this.sd=!1,this.et())this.Zd(vh.Xv());else{var t=this.Nd(),i=this.yu/this.fd,n=this.ad+t,s=new lh(n-i+1,n);this.Zd(new vh(s))}},t.prototype.xd=function(){var t=this.Gd();if(this.fd<t&&(this.fd=t,this.sd=!0),0!==this.yu){var i=.5*this.yu;this.fd>i&&(this.fd=i,this.sd=!0)}},t.prototype.Gd=function(){return this.un.fixLeftEdge&&this.un.fixRightEdge&&0!==this.Gv.length?this.yu/this.Gv.length:this.un.minBarSpacing},t.prototype.Cd=function(){var t=this.Qd();this.ad>t&&(this.ad=t,this.sd=!0);var i=this.t_();null!==i&&this.ad<i&&(this.ad=i,this.sd=!0)},t.prototype.t_=function(){var t=this.gd(),i=this.Zv;return null===t||null===i?null:t-i-1+(this.un.fixLeftEdge?this.yu/this.fd:Math.min(2,this.Gv.length))},t.prototype.Qd=function(){return this.un.fixRightEdge?0:this.yu/this.fd-Math.min(2,this.Gv.length)},t.prototype.zd=function(){this.ud={ya:this.ya(),Ed:this.Ed()}},t.prototype.Vd=function(){this.ud=null},t.prototype.Bd=function(t,i){var n=this,s=this.td.get(i);return void 0===s&&(s=new oh((function(t){return n.i_(t,i)})),this.td.set(i,s)),s.bv(t)},t.prototype.i_=function(t,i){var n,s=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(i,this.un.timeVisible,this.un.secondsVisible);return void 0!==this.un.tickMarkFormatter?this.un.tickMarkFormatter(null!==(n=t.Bv)&&void 0!==n?n:t.vs,s,this.fe.locale):function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var h=void 0===t.Bv?new Date(1e3*t.vs):new Date(Date.UTC(t.Bv.year,t.Bv.month-1,t.Bv.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(n,s)}(t,s,this.fe.locale)},t.prototype.Zd=function(t){var i=this.nd;this.nd=t,ah(i.$v(),this.nd.$v())||this.hd.A(),ah(i.Kv(),this.nd.Kv())||this.rd.A(),this.Xd()},t.prototype.Xd=function(){this.od=null},t.prototype._d=function(){this.Xd(),this.td.clear()},t.prototype.vd=function(){var t=this.fe.dateFormat;this.un.timeVisible?this.$d=new uh({pv:t,gv:this.un.secondsVisible?"%h:%m:%s":"%h:%m",yv:"   ",kv:this.fe.locale}):this.$d=new hh(t,this.fe.locale)},t.prototype.wd=function(){if(this.un.fixLeftEdge){var t=this.gd();if(null!==t){var i=this.es();if(null!==i){var n=i.ou()-t;if(n<0){var s=this.ad-n-1;this.Un(s)}this.xd()}}}},t.prototype.Md=function(){this.Cd(),this.xd()},t}();var _h,wh=function(t){function i(i){var n=t.call(this)||this;return n.n_=new Map,n.$t=i,n}return q(i,t),i.prototype.ft=function(t){},i.prototype.vt=function(t){if(this.$t.Vt){t.save();for(var i=0,n=0,s=this.$t.Zh;n<s.length;n++){if(0!==(o=s[n]).wi.length){t.font=o.W;var h=this.s_(t,o.wi);h>this.$t.oi?o.Rd=this.$t.oi/h:o.Rd=1,i+=o.h_*o.Rd}}var r=0;switch(this.$t.r_){case"top":r=0;break;case"center":r=Math.max((this.$t.li-i)/2,0);break;case"bottom":r=Math.max(this.$t.li-i,0)}t.fillStyle=this.$t.j;for(var e=0,u=this.$t.Zh;e<u.length;e++){var o=u[e];t.save();var l=0;switch(this.$t.e_){case"left":t.textAlign="left",l=o.h_/2;break;case"center":t.textAlign="center",l=this.$t.oi/2;break;case"right":t.textAlign="right",l=this.$t.oi-1-o.h_/2}t.translate(l,r),t.textBaseline="top",t.font=o.W,t.scale(o.Rd,o.Rd),t.fillText(o.wi,0,o.u_),t.restore(),r+=o.h_*o.Rd}t.restore()}},i.prototype.s_=function(t,i){var n=this.o_(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},i.prototype.o_=function(t){var i=this.n_.get(t);return void 0===i&&(i=new Map,this.n_.set(t,i)),i},i}(et),Mh=function(){function t(t){this.Lt=!0,this.ii={Vt:!1,j:"",li:0,oi:0,Zh:[],r_:"center",e_:"center"},this.ni=new wh(this.ii),this.si=t}return t.prototype.At=function(){this.Lt=!0},t.prototype.Dt=function(t,i){return this.Lt&&(this.Pt(t,i),this.Lt=!1),this.ni},t.prototype.Pt=function(t,i){var n=this.si.K(),s=this.ii;s.Vt=n.visible,s.Vt&&(s.j=n.color,s.oi=i,s.li=t,s.e_=n.horzAlign,s.r_=n.vertAlign,s.Zh=[{wi:n.text,W:st(n.fontSize,n.fontFamily,n.fontStyle),h_:1.2*n.fontSize,u_:0,Rd:0}])},t}(),bh=function(t){function i(i,n){var s=t.call(this)||this;return s.un=n,s._n=new Mh(s),s}return q(i,t),i.prototype.Cn=function(){return[]},i.prototype.xn=function(){return[this._n]},i.prototype.K=function(){return this.un},i.prototype.Sn=function(){this._n.At()},i}(Ct);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(_h||(_h={}));var mh,ph,gh,yh,kh,xh,Ch=function(){function t(t,i){this.l_=[],this.a_=[],this.yu=0,this.f_=null,this.c_=null,this.v_=new J,this.d_=new J,this.__=new J,this.w_=new J,this.M_=null,this.b_=t,this.un=i,this.m_=new ht(this),this.Cu=new dh(this,i.timeScale,this.un.localization),this.Et=new Nt(this,i.crosshair),this.p_=new ih(i.crosshair),this.g_=new bh(this,i.watermark),this.y_=new $n(this),this.k_(),this.l_[0].Pu(2e3),this.x_=this.C_(0),this.N_=this.C_(1)}return t.prototype.Gc=function(){this.S_(new Tt(3))},t.prototype.eo=function(){this.S_(new Tt(2))},t.prototype.ov=function(){this.S_(new Tt(1))},t.prototype.Ds=function(t){var i=this.T_(t);this.S_(i)},t.prototype.F_=function(){return this.c_},t.prototype.Ie=function(){for(var t=[],i=0,n=this.l_;i<n.length;i++)for(var s=0,h=n[i].Ie();s<h.length;s++){var r=h[s];t.push(r)}return t},t.prototype.L_=function(t){var i=this.c_;this.c_=t,null!==i&&this.Ds(i.E_),null!==t&&this.Ds(t.E_)},t.prototype.K=function(){return this.un},t.prototype.$s=function(t){$(this.un,t),this.l_.forEach((function(i){return i.Eu(t)})),void 0!==t.timeScale&&this.Cu.$s(t.timeScale),void 0!==t.localization&&this.Cu.dd(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.v_.A(),this.x_=this.C_(0),this.N_=this.C_(1),this.Gc()},t.prototype.A_=function(t,i){if("left"!==t)if("right"!==t){var n=this.B_(t);null!==n&&(n.Ht.$s(i),this.v_.A())}else this.$s({rightPriceScale:i});else this.$s({leftPriceScale:i})},t.prototype.B_=function(t){for(var i=0,n=this.l_;i<n.length;i++){var s=n[i],h=s.Au(t);if(null!==h)return{hi:s,Ht:h}}return null},t.prototype.Rt=function(){return this.Cu},t.prototype.D_=function(){return this.l_.length>0?this.l_[0]:null},t.prototype.Js=function(){return this.l_},t.prototype.P_=function(){return this.g_},t.prototype.O_=function(){return this.y_},t.prototype.To=function(){return this.Et},t.prototype.Ho=function(){return this.p_},t.prototype.R_=function(){return this.d_},t.prototype.z_=function(){return this.__},t.prototype.V_=function(){return this.w_},t.prototype.W_=function(t,i){t.Ne(i),this.Fd()},t.prototype.Ou=function(t){this.yu=t,this.Cu.Ou(this.yu),this.l_.forEach((function(i){return i.Ou(t)})),this.Fd()},t.prototype.k_=function(t){var i=new Xi(this.Cu,this);void 0!==t?this.l_.splice(t,0,i):this.l_.push(i);var n=void 0===t?this.l_.length-1:t,s=new Tt(3);return s.Pn(n,{On:0,Rn:!0}),this.S_(s),i},t.prototype.$u=function(t,i,n){t.$u(i,n)},t.prototype.Ku=function(t,i,n){t.Ku(i,n),this.Qc(),this.S_(this.I_(t,2))},t.prototype.Xu=function(t,i){t.Xu(i),this.S_(this.I_(t,2))},t.prototype.Zu=function(t,i,n){i.me()||t.Zu(i,n)},t.prototype.Gu=function(t,i,n){i.me()||(t.Gu(i,n),this.Qc(),this.S_(this.I_(t,2)))},t.prototype.Qu=function(t,i){i.me()||(t.Qu(i),this.S_(this.I_(t,2)))},t.prototype.so=function(t,i){t.so(i),this.S_(this.I_(t,2))},t.prototype.j_=function(t){this.Cu.Ke(t)},t.prototype.H_=function(t,i){var n=this.Rt();if(!n.et()&&0!==i){var s=n.oi();t=Math.max(1,Math.min(t,s)),n.Rd(t,i),this.Fd()}},t.prototype.q_=function(t){this.U_(0),this.Y_(t),this.J_()},t.prototype.K_=function(t){this.Cu.Xe(t),this.Fd()},t.prototype.X_=function(){this.Cu.Ze(),this.eo()},t.prototype.U_=function(t){this.f_=t,this.Cu.Ge(t)},t.prototype.Y_=function(t){var i=!1;return null!==this.f_&&Math.abs(t-this.f_)>20&&(this.f_=null,i=!0),this.Cu.Qe(t),this.Fd(),i},t.prototype.J_=function(){this.Cu.tu(),this.eo(),this.f_=null},t.prototype.Bt=function(){return this.a_},t.prototype.Z_=function(t,i,n){this.Et.wn(t,i);var h=NaN,r=this.Cu.Sd(t),e=this.Cu.es();null!==e&&(r=Math.min(Math.max(e.ou(),r),e.lu()));var u=n.fn(),o=u.Wt();null!==o&&(h=u.cn(i,o)),h=this.p_._v(h,r,n),this.Et.pn(r,h,n),this.ov(),this.d_.A(this.Et.Ot(),new s(t,i))},t.prototype.G_=function(){this.To().yn(),this.ov(),this.d_.A(null,null)},t.prototype.Qc=function(){var t=this.Et.hi();if(null!==t){var i=this.Et.bn(),n=this.Et.mn();this.Z_(i,n,t)}this.Et.Sn()},t.prototype.Q_=function(t,i,n,h){this.Et.wn(t,i);var r=NaN,e=this.Cu.Sd(t),u=this.Cu.es();null!==u&&(e=Math.min(Math.max(u.ou(),e),u.lu()));var o=h.fn(),l=o.Wt();null!==l&&(r=o.cn(i,l)),r=this.p_._v(r,e,h),this.Et.pn(e,r,h),this.ov(),n&&this.d_.A(this.Et.Ot(),new s(t,i))},t.prototype.tw=function(t,i,n){var s=this.Cu.vn(0);void 0!==i&&void 0!==n&&this.Cu.At(i,n);var h=this.Cu.vn(0),r=this.Cu.Nd(),e=this.Cu.es();if(null!==e&&null!==s&&null!==h){var u=e.Pf(r),o=s.vs>h.vs,l=null!==t&&t>r&&!o,a=u&&this.Cu.K().shiftVisibleRangeOnNewBar;if(l&&!a){var f=t-r;this.Cu.Un(this.Cu.Ed()-f)}}this.Cu.Od(t)},t.prototype.nv=function(t){null!==t&&t.ro()},t.prototype.$o=function(t){var i=this.l_.find((function(i){return i.je().includes(t)}));return void 0===i?null:i},t.prototype.Fd=function(){this.g_.Sn(),this.l_.forEach((function(t){return t.ro()})),this.Qc()},t.prototype.iw=function(t){this.__.A(t)},t.prototype.Io=function(t,i){this.w_.A(t,i)},t.prototype.D=function(){this.l_.forEach((function(t){return t.D()})),this.l_.length=0,this.un.localization.priceFormatter=void 0,this.un.localization.timeFormatter=void 0},t.prototype.nw=function(){return this.m_},t.prototype.uf=function(){return this.m_.K()},t.prototype.Bu=function(){return this.v_},t.prototype.sw=function(t,i){var n=this.l_[0],s=this.hw(i,t,n);return this.a_.push(s),1===this.a_.length?this.Gc():this.eo(),s},t.prototype.rw=function(t){var i=this.$o(t),n=this.a_.indexOf(t);F(-1!==n,"Series not found"),this.a_.splice(n,1),E(i).Ue(t),t.D&&t.D()},t.prototype.ew=function(t,i,n){var s=new Jn[t](this,i,n);return this.l_[0].He(s,this.Hl()),s},t.prototype.Zc=function(t,i){var n=E(this.$o(t));n.Ue(t);var s=this.B_(i);if(null===s){var h=t.Yi();n.He(t,i,h)}else{h=s.hi===n?t.Yi():void 0;s.hi.He(t,i,h)}},t.prototype.Yd=function(){var t=new Tt(2);t.Wn(),this.S_(t)},t.prototype.uw=function(t){var i=new Tt(2);i.jn(t),this.S_(i)},t.prototype.Hn=function(){var t=new Tt(2);t.Hn(),this.S_(t)},t.prototype.qn=function(t){var i=new Tt(2);i.qn(t),this.S_(i)},t.prototype.Un=function(t){var i=new Tt(2);i.Un(t),this.S_(i)},t.prototype.Hl=function(){return this.un.rightPriceScale.visible?"right":"left"},t.prototype.ow=function(){return this.N_},t.prototype.lw=function(){return this.x_},t.prototype.Yt=function(t){var i=this.N_,n=this.x_;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.M_||this.M_.Zl!==n||this.M_.Gl!==i)this.M_={Zl:n,Gl:i,aw:new Map};else{var s=this.M_.aw.get(t);if(void 0!==s)return s}var h=function(t,i,n){var s=W(t),h=s[0],r=s[1],e=s[2],u=s[3],o=W(i),l=o[0],a=o[1],f=o[2],c=o[3],v=[D(h+n*(l-h)),D(r+n*(a-r)),D(e+n*(f-e)),P(u+n*(c-u))];return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(v[3],")")}(n,i,t/100);return this.M_.aw.set(t,h),h},t.prototype.I_=function(t,i){var n=new Tt(i);if(null!==t){var s=this.l_.indexOf(t);n.Pn(s,{On:i})}return n},t.prototype.T_=function(t,i){return void 0===i&&(i=2),this.I_(this.$o(t),i)},t.prototype.S_=function(t){this.b_&&this.b_(t),this.l_.forEach((function(t){return t.oo()._r().At()}))},t.prototype.hw=function(t,i,n){var s=new th(this,t,i),h=void 0!==t.priceScaleId?t.priceScaleId:this.Hl();return n.He(s,h),St(h)||s.$s(t),s},t.prototype.C_=function(t){var i=this.un.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}();function Nh(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function Sh(t){return!K(t)&&!Z(t)}function Th(t){return K(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(mh||(mh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(ph||(ph={})),function(t){t.Top="top",t.Middle="middle",t.Bottom="bottom"}(gh||(gh={})),function(t){t.Left="left",t.Center="center",t.Right="right"}(yh||(yh={})),function(t){t.Start="start",t.Center="center",t.End="end",t.Left="left",t.Right="right"}(kh||(kh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(xh||(xh={}));var Fh={allowDownsampling:!0};var Lh=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}(),Eh=function(){function t(t,i){this.Zt=t,this.Gt=i}return t.prototype.yr=function(t){return this.Zt===t.Zt&&this.Gt===t.Gt},t}();function Ah(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function Bh(t){var i=E(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function Dh(t,i){var n=t.createElement("canvas"),s=Ah(n);return n.style.width="".concat(i.Zt,"px"),n.style.height="".concat(i.Gt,"px"),n.width=i.Zt*s,n.height=i.Gt*s,n}function Ph(t,i){var n=E(t.ownerDocument).createElement("canvas");t.appendChild(n);var s=function(t,i){return void 0===i&&(i=Fh),new Lh(t,i)}(n,{allowDownsampling:!1});return s.resizeCanvas({width:i.Zt,height:i.Gt}),s}function Oh(t,i){return t.fw-i.fw}function Rh(t,i,n){var s=(t.fw-i.fw)/(t.Ct-i.Ct);return Math.sign(s)*Math.min(Math.abs(s),n)}var zh=function(){function t(t,i,n,s){this.cw=null,this.dw=null,this._w=null,this.ww=null,this.Mw=null,this.bw=0,this.mw=0,this.pw=!1,this.gw=t,this.yw=i,this.kw=n,this.wr=s}return t.prototype.xw=function(t,i){if(null!==this.cw){if(this.cw.Ct===i)return void(this.cw.fw=t);if(Math.abs(this.cw.fw-t)<this.wr)return}this.ww=this._w,this._w=this.dw,this.dw=this.cw,this.cw={Ct:i,fw:t}},t.prototype.wf=function(t,i){if(null!==this.cw&&null!==this.dw&&!(i-this.cw.Ct>50)){var n=0,s=Rh(this.cw,this.dw,this.yw),h=Oh(this.cw,this.dw),r=[s],e=[h];if(n+=h,null!==this._w){var u=Rh(this.dw,this._w,this.yw);if(Math.sign(u)===Math.sign(s)){var o=Oh(this.dw,this._w);if(r.push(u),e.push(o),n+=o,null!==this.ww){var l=Rh(this._w,this.ww,this.yw);if(Math.sign(l)===Math.sign(s)){var a=Oh(this._w,this.ww);r.push(l),e.push(a),n+=a}}}}for(var f,c,v,d=0,_=0;_<r.length;++_)d+=e[_]/n*r[_];if(!(Math.abs(d)<this.gw))this.Mw={fw:t,Ct:i},this.mw=d,this.bw=(f=Math.abs(d),c=this.kw,v=Math.log(c),Math.log(1*v/-f)/v)}},t.prototype.Cw=function(t){var i=E(this.Mw),n=t-i.Ct;return i.fw+this.mw*(Math.pow(this.kw,n)-1)/Math.log(this.kw)},t.prototype.As=function(t){return null===this.Mw||this.Nw(t)===this.bw},t.prototype.Sw=function(){return this.pw},t.prototype.Tw=function(){this.pw=!0},t.prototype.Nw=function(t){var i=t-E(this.Mw).Ct;return Math.min(i,this.bw)},t}(),Vh="undefined"!=typeof window;function Wh(){return!!Vh&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Ih(){return!!Vh&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function jh(t){Vh&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}var Hh=function(){function t(t,i,n){var s=this;this.Fw=0,this.Lw=null,this.Ew={bt:Number.NEGATIVE_INFINITY,gt:Number.POSITIVE_INFINITY},this.Aw=0,this.Bw=null,this.Dw={bt:Number.NEGATIVE_INFINITY,gt:Number.POSITIVE_INFINITY},this.Pw=null,this.Ow=!1,this.Rw=null,this.zw=null,this.Vw=!1,this.Ww=!1,this.Iw=!1,this.jw=null,this.Hw=null,this.qw=null,this.Uw=null,this.Yw=null,this.Jw=null,this.$w=null,this.Kw=0,this.Xw=!1,this.Zw=!1,this.Gw=!1,this.Qw=0,this.tM=null,this.iM=!Ih(),this.nM=function(t){s.sM(t)},this.hM=function(t){if(s.rM(t)){var i=s.eM(t);if(++s.Aw,s.Bw&&s.Aw>1)s.oM(Yh(t),s.Dw).uM<30&&!s.Iw&&s.lM(i,s.fM.aM),s.cM()}else{i=s.eM(t);if(++s.Fw,s.Lw&&s.Fw>1)s.oM(Yh(t),s.Ew).uM<5&&!s.Ww&&s.vM(i,s.fM.dM),s._M()}},this.wM=t,this.fM=i,this.un=n,this.MM()}return t.prototype.D=function(){null!==this.jw&&(this.jw(),this.jw=null),null!==this.Hw&&(this.Hw(),this.Hw=null),null!==this.Uw&&(this.Uw(),this.Uw=null),null!==this.Yw&&(this.Yw(),this.Yw=null),null!==this.Jw&&(this.Jw(),this.Jw=null),null!==this.qw&&(this.qw(),this.qw=null),this.bM(),this._M()},t.prototype.mM=function(t){var i=this;this.Uw&&this.Uw();var n=this.pM.bind(this);if(this.Uw=function(){i.wM.removeEventListener("mousemove",n)},this.wM.addEventListener("mousemove",n),!this.rM(t)){var s=this.eM(t);this.vM(s,this.fM.gM),this.iM=!0}},t.prototype._M=function(){null!==this.Lw&&clearTimeout(this.Lw),this.Fw=0,this.Lw=null,this.Ew={bt:Number.NEGATIVE_INFINITY,gt:Number.POSITIVE_INFINITY}},t.prototype.cM=function(){null!==this.Bw&&clearTimeout(this.Bw),this.Aw=0,this.Bw=null,this.Dw={bt:Number.NEGATIVE_INFINITY,gt:Number.POSITIVE_INFINITY}},t.prototype.pM=function(t){if(!this.Gw&&null===this.zw&&!this.rM(t)){var i=this.eM(t);this.vM(i,this.fM.yM),this.iM=!0}},t.prototype.kM=function(t){var i=$h(t.changedTouches,E(this.tM));if(null!==i&&(this.Qw=Jh(t),null===this.$w&&!this.Zw)){this.Xw=!0;var n=this.oM(Yh(i),E(this.zw)),s=n.xM,h=n.CM,r=n.uM;if(this.Vw||!(r<5)){if(!this.Vw){var e=.5*s,u=h>=e&&!this.un.NM(),o=e>h&&!this.un.SM();u||o||(this.Zw=!0),this.Vw=!0,this.Iw=!0,this.bM(),this.cM()}if(!this.Zw){var l=this.eM(t,i);this.lM(l,this.fM.TM),Uh(t)}}}},t.prototype.FM=function(t){if(0===t.button&&(this.oM(Yh(t),E(this.Rw)).uM>=5&&(this.Ww=!0,this._M()),this.Ww)){var i=this.eM(t);this.vM(i,this.fM.LM)}},t.prototype.oM=function(t,i){var n=Math.abs(i.bt-t.bt),s=Math.abs(i.gt-t.gt);return{xM:n,CM:s,uM:n+s}},t.prototype.EM=function(t){var i=$h(t.changedTouches,E(this.tM));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.tM=null,this.Qw=Jh(t),this.bM(),this.zw=null,this.Jw&&(this.Jw(),this.Jw=null);var n=this.eM(t,i);if(this.lM(n,this.fM.AM),++this.Aw,this.Bw&&this.Aw>1)this.oM(Yh(i),this.Dw).uM<30&&!this.Iw&&this.lM(n,this.fM.aM),this.cM();else this.Iw||(this.lM(n,this.fM.BM),this.fM.BM&&Uh(t));0===this.Aw&&Uh(t),0===t.touches.length&&this.Ow&&(this.Ow=!1,Uh(t))}},t.prototype.sM=function(t){if(0===t.button){var i=this.eM(t);if(this.Rw=null,this.Gw=!1,this.Yw&&(this.Yw(),this.Yw=null),Wh())this.wM.ownerDocument.documentElement.removeEventListener("mouseleave",this.nM);if(!this.rM(t))if(this.vM(i,this.fM.DM),++this.Fw,this.Lw&&this.Fw>1)this.oM(Yh(t),this.Ew).uM<5&&!this.Ww&&this.vM(i,this.fM.dM),this._M();else this.Ww||this.vM(i,this.fM.PM)}},t.prototype.bM=function(){null!==this.Pw&&(clearTimeout(this.Pw),this.Pw=null)},t.prototype.OM=function(t){if(null===this.tM){var i=t.changedTouches[0];this.tM=i.identifier,this.Qw=Jh(t);var n=this.wM.ownerDocument.documentElement;this.Iw=!1,this.Vw=!1,this.Zw=!1,this.zw=Yh(i),this.Jw&&(this.Jw(),this.Jw=null);var s=this.kM.bind(this),h=this.EM.bind(this);this.Jw=function(){n.removeEventListener("touchmove",s),n.removeEventListener("touchend",h)},n.addEventListener("touchmove",s,{passive:!1}),n.addEventListener("touchend",h,{passive:!1}),this.bM(),this.Pw=setTimeout(this.RM.bind(this,t),240);var r=this.eM(t,i);this.lM(r,this.fM.zM),this.Bw||(this.Aw=0,this.Bw=setTimeout(this.cM.bind(this),500),this.Dw=Yh(i))}},t.prototype.VM=function(t){if(0===t.button){var i=this.wM.ownerDocument.documentElement;Wh()&&i.addEventListener("mouseleave",this.nM),this.Ww=!1,this.Rw=Yh(t),this.Yw&&(this.Yw(),this.Yw=null);var n=this.FM.bind(this),s=this.sM.bind(this);if(this.Yw=function(){i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",s)},i.addEventListener("mousemove",n),i.addEventListener("mouseup",s),this.Gw=!0,!this.rM(t)){var h=this.eM(t);this.vM(h,this.fM.WM),this.Lw||(this.Fw=0,this.Lw=setTimeout(this._M.bind(this),500),this.Ew=Yh(t))}}},t.prototype.MM=function(){var t=this;this.wM.addEventListener("mouseenter",this.mM.bind(this)),this.wM.addEventListener("touchcancel",this.bM.bind(this));var i=this.wM.ownerDocument,n=function(i){t.fM.IM&&(i.target&&t.wM.contains(i.target)||t.fM.IM())};this.Hw=function(){i.removeEventListener("touchstart",n)},this.jw=function(){i.removeEventListener("mousedown",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),Ih()&&(this.qw=function(){t.wM.removeEventListener("dblclick",t.hM)},this.wM.addEventListener("dblclick",this.hM)),this.wM.addEventListener("mouseleave",this.jM.bind(this)),this.wM.addEventListener("touchstart",this.OM.bind(this),{passive:!0}),jh(this.wM),this.wM.addEventListener("mousedown",this.VM.bind(this)),this.HM(),this.wM.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.HM=function(){var t=this;void 0===this.fM.qM&&void 0===this.fM.UM&&void 0===this.fM.YM||(this.wM.addEventListener("touchstart",(function(i){return t.JM(i.touches)}),{passive:!0}),this.wM.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.$w&&void 0!==t.fM.UM){var n=qh(i.touches[0],i.touches[1])/t.Kw;t.fM.UM(t.$w,n),Uh(i)}}),{passive:!1}),this.wM.addEventListener("touchend",(function(i){t.JM(i.touches)})))},t.prototype.JM=function(t){1===t.length&&(this.Xw=!1),2!==t.length||this.Xw||this.Ow?this.$M():this.KM(t)},t.prototype.KM=function(t){var i=this.wM.getBoundingClientRect()||{left:0,top:0};this.$w={bt:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,gt:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Kw=qh(t[0],t[1]),void 0!==this.fM.qM&&this.fM.qM(),this.bM()},t.prototype.$M=function(){null!==this.$w&&(this.$w=null,void 0!==this.fM.YM&&this.fM.YM())},t.prototype.jM=function(t){if(this.Uw&&this.Uw(),!this.rM(t)&&this.iM){var i=this.eM(t);this.vM(i,this.fM.XM),this.iM=!Ih()}},t.prototype.RM=function(t){var i=$h(t.touches,E(this.tM));if(null!==i){var n=this.eM(t,i);this.lM(n,this.fM.ZM),this.Iw=!0,this.Ow=!0}},t.prototype.rM=function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Jh(t)<this.Qw+500},t.prototype.lM=function(t,i){i&&i.call(this.fM,t)},t.prototype.vM=function(t,i){i&&i.call(this.fM,t)},t.prototype.eM=function(t,i){var n=i||t,s=this.wM.getBoundingClientRect()||{left:0,top:0};return{GM:n.clientX,QM:n.clientY,tb:n.pageX,ib:n.pageY,nb:n.screenX,sb:n.screenY,hb:n.clientX-s.left,rb:n.clientY-s.top,eb:t.ctrlKey,ub:t.altKey,Zo:t.shiftKey,ob:t.metaKey,lb:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,ab:t.type,fb:n.target,cb:t.view,_b:function(){"touchstart"!==t.type&&Uh(t)}}},t}();function qh(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function Uh(t){t.cancelable&&t.preventDefault()}function Yh(t){return{bt:t.pageX,gt:t.pageY}}function Jh(t){return t.timeStamp||performance.now()}function $h(t,i){for(var n=0;n<t.length;++n)if(t[n].identifier===i)return t[n];return null}var Kh=function(){function t(t,i,n,s){this.sf=new ks(200),this.X=0,this.wb="",this.Rf="",this.Qa=[],this.Mb=new Map,this.X=t,this.wb=i,this.Rf=st(t,n,s)}return t.prototype.D=function(){this.sf.tf(),this.Qa=[],this.Mb.clear()},t.prototype.bb=function(t,i,n,s,h){var r=this.mb(t,i);if("left"!==h){var e=Ah(t.canvas);n-=Math.floor(r.pb*e)}s-=Math.floor(r.li/2),t.drawImage(r.gb,n,s,r.oi,r.li)},t.prototype.mb=function(t,i){var n,s=this;if(this.Mb.has(i))n=L(this.Mb.get(i));else{if(this.Qa.length>=200){var h=L(this.Qa.shift());this.Mb.delete(h)}var r=Ah(t.canvas),e=Math.ceil(this.X/4.5),u=Math.round(this.X/10),o=Math.ceil(this.sf.Mi(t,i)),l=Li(Math.round(o+2*e)),a=Li(this.X+2*e),f=Dh(document,new Eh(l,a));n={wi:i,pb:Math.round(Math.max(1,o)),oi:Math.ceil(l*r),li:Math.ceil(a*r),gb:f},0!==o&&(this.Qa.push(n.wi),this.Mb.set(n.wi,n)),dt(t=Bh(n.gb),r,(function(){t.font=s.Rf,t.fillStyle=s.wb,t.fillText(i,0,a-e-u)}))}return n},t}(),Xh=function(){function t(t,i,n,s){var h=this;this.Ai=null,this.yb=null,this.kb=!1,this.xb=new ks(50),this.Cb=new Kh(11,"#000"),this.wb=null,this.Rf=null,this.Nb=0,this.Sb=!1,this.Tb=function(){h.Fb(h.m_.K()),h.Sb||h.Xi.Lb().ri().eo()},this.Eb=function(){h.Sb||h.Xi.Lb().ri().eo()},this.Xi=t,this.un=i,this.m_=n,this.Ab="left"===s,this.Bb=document.createElement("div"),this.Bb.style.height="100%",this.Bb.style.overflow="hidden",this.Bb.style.width="25px",this.Bb.style.left="0",this.Bb.style.position="relative",this.Db=Ph(this.Bb,new Eh(16,16)),this.Db.subscribeCanvasConfigured(this.Tb);var r=this.Db.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Pb=Ph(this.Bb,new Eh(16,16)),this.Pb.subscribeCanvasConfigured(this.Eb);var e=this.Pb.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0";var u={WM:this.Ob.bind(this),zM:this.Ob.bind(this),LM:this.Rb.bind(this),TM:this.Rb.bind(this),IM:this.zb.bind(this),DM:this.Vb.bind(this),AM:this.Vb.bind(this),dM:this.Wb.bind(this),aM:this.Wb.bind(this),gM:this.Ib.bind(this),XM:this.jb.bind(this)};this.Hb=new Hh(this.Pb.canvas,u,{NM:function(){return!1},SM:function(){return!0}})}return t.prototype.D=function(){this.Hb.D(),this.Pb.unsubscribeCanvasConfigured(this.Eb),this.Pb.destroy(),this.Db.unsubscribeCanvasConfigured(this.Tb),this.Db.destroy(),null!==this.Ai&&this.Ai.$e().L(this),this.Ai=null,this.Cb.D()},t.prototype.qb=function(){return this.Bb},t.prototype.xt=function(){return E(this.Ai).K().borderColor},t.prototype.Ub=function(){return this.un.textColor},t.prototype.V=function(){return this.un.fontSize},t.prototype.Yb=function(){return st(this.V(),this.un.fontFamily)},t.prototype.Jb=function(){var t=this.m_.K(),i=this.wb!==t.j,n=this.Rf!==t.W;return(i||n)&&(this.Fb(t),this.wb=t.j),n&&(this.xb.tf(),this.Rf=t.W),t},t.prototype.$b=function(){if(null===this.Ai)return 0;var t=0,i=this.Jb(),n=Bh(this.Db.canvas),s=this.Ai.dr();n.font=this.Yb(),s.length>0&&(t=Math.max(this.xb.Mi(n,s[0].qr),this.xb.Mi(n,s[s.length-1].qr)));for(var h=this.Kb(),r=h.length;r--;){var e=this.xb.Mi(n,h[r].wi());e>t&&(t=e)}var u=this.Ai.Wt();if(null!==u&&null!==this.yb){var o=this.Ai.cn(1,u),l=this.Ai.cn(this.yb.Gt-2,u);t=Math.max(t,this.xb.Mi(n,this.Ai.Di(Math.floor(Math.min(o,l))+.11111111111111,u)),this.xb.Mi(n,this.Ai.Di(Math.ceil(Math.max(o,l))-.11111111111111,u)))}var a=t||34,f=Math.ceil(i.O+i.R+i.q+i.U+a);return f+=f%2},t.prototype.Xb=function(t){if(t.Zt<0||t.Gt<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.yb&&this.yb.yr(t)||(this.yb=t,this.Sb=!0,this.Db.resizeCanvas({width:t.Zt,height:t.Gt}),this.Pb.resizeCanvas({width:t.Zt,height:t.Gt}),this.Sb=!1,this.Bb.style.width=t.Zt+"px",this.Bb.style.height=t.Gt+"px",this.Bb.style.minWidth=t.Zt+"px")},t.prototype.Zb=function(){return E(this.yb).Zt},t.prototype.$i=function(t){this.Ai!==t&&(null!==this.Ai&&this.Ai.$e().L(this),this.Ai=t,t.$e().C(this.ne.bind(this),this))},t.prototype.Ht=function(){return this.Ai},t.prototype.tf=function(){var t=this.Xi.qs();this.Xi.Lb().ri().so(t,E(this.Ht()))},t.prototype.Gb=function(t){if(null!==this.yb){if(1!==t){var i=Bh(this.Db.canvas);this.Qb(),this.fl(i,this.Db.pixelRatio),this.vl(i,this.Db.pixelRatio),this.tm(i,this.Db.pixelRatio),this.im(i,this.Db.pixelRatio)}var n=Bh(this.Pb.canvas),s=this.yb.Zt,h=this.yb.Gt;dt(n,this.Pb.pixelRatio,(function(){n.clearRect(0,0,s,h)})),this.nm(n,this.Pb.pixelRatio)}},t.prototype.sm=function(){return this.Db.canvas},t.prototype.At=function(){var t;null===(t=this.Ai)||void 0===t||t.dr()},t.prototype.Ob=function(t){if(null!==this.Ai&&!this.Ai.et()&&this.Xi.Lb().K().handleScale.axisPressedMouseMove.price){var i=this.Xi.Lb().ri(),n=this.Xi.qs();this.kb=!0,i.$u(n,this.Ai,t.rb)}},t.prototype.Rb=function(t){if(null!==this.Ai&&this.Xi.Lb().K().handleScale.axisPressedMouseMove.price){var i=this.Xi.Lb().ri(),n=this.Xi.qs(),s=this.Ai;i.Ku(n,s,t.rb)}},t.prototype.zb=function(){if(null!==this.Ai&&this.Xi.Lb().K().handleScale.axisPressedMouseMove.price){var t=this.Xi.Lb().ri(),i=this.Xi.qs(),n=this.Ai;this.kb&&(this.kb=!1,t.Xu(i,n))}},t.prototype.Vb=function(t){if(null!==this.Ai&&this.Xi.Lb().K().handleScale.axisPressedMouseMove.price){var i=this.Xi.Lb().ri(),n=this.Xi.qs();this.kb=!1,i.Xu(n,this.Ai)}},t.prototype.Wb=function(t){this.Xi.Lb().K().handleScale.axisDoubleClickReset&&this.tf()},t.prototype.Ib=function(t){null!==this.Ai&&(!this.Xi.Lb().ri().K().handleScale.axisPressedMouseMove.price||this.Ai.pe()||this.Ai.ge()||this.hm(1))},t.prototype.jb=function(t){this.hm(0)},t.prototype.Kb=function(){var t=this,i=[],n=null===this.Ai?void 0:this.Ai;return function(s){for(var h=0;h<s.length;++h)for(var r=s[h].Cn(t.Xi.qs(),n),e=0;e<r.length;e++)i.push(r[e])}(this.Xi.qs().je()),i},t.prototype.fl=function(t,i){var n=this;if(null!==this.yb){var s=this.yb.Zt,h=this.yb.Gt;dt(t,i,(function(){var i=n.Xi.qs().ri(),r=i.lw(),e=i.ow();r===e?_t(t,0,0,s,h,r):wt(t,0,0,s,h,r,e)}))}},t.prototype.vl=function(t,i){if(null!==this.yb&&null!==this.Ai&&this.Ai.K().borderVisible){t.save(),t.fillStyle=this.xt();var n,s=Math.max(1,Math.floor(this.Jb().O*i));n=this.Ab?Math.floor(this.yb.Zt*i)-s:0,t.fillRect(n,0,s,Math.ceil(this.yb.Gt*i)),t.restore()}},t.prototype.tm=function(t,i){if(null!==this.yb&&null!==this.Ai){var n=this.Ai.dr();t.save(),t.strokeStyle=this.xt(),t.font=this.Yb(),t.fillStyle=this.xt();var s=this.Jb(),h=this.Ai.K().borderVisible&&this.Ai.K().drawTicks,r=this.Ab?Math.floor((this.yb.Zt-s.R)*i-s.O*i):Math.floor(s.O*i),e=this.Ab?Math.round(r-s.q*i):Math.round(r+s.R*i+s.q*i),u=this.Ab?"right":"left",o=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(h){var a=Math.round(s.R*i);t.beginPath();for(var f=0,c=n;f<c.length;f++){var v=c[f];t.rect(r,Math.round(v.ur*i)-l,a,o)}t.fill()}t.fillStyle=this.Ub();for(var d=0,_=n;d<_.length;d++){v=_[d];this.Cb.bb(t,v.qr,e,Math.round(v.ur*i),u)}t.restore()}},t.prototype.Qb=function(){if(null!==this.yb&&null!==this.Ai){var t=this.yb.Gt/2,i=[],n=this.Ai.je().slice(),s=this.Xi.qs(),h=this.Jb();this.Ai===s.io()&&this.Xi.qs().je().forEach((function(t){s.zu(t)&&n.push(t)}));var r=this.Ai.Ie()[0],e=this.Ai;n.forEach((function(n){var h=n.Cn(s,e);h.forEach((function(t){t.Si(null),t.Ti()&&i.push(t)})),r===n&&h.length>0&&(t=h[0].bi())}));var u=i.filter((function(i){return i.bi()<=t})),o=i.filter((function(i){return i.bi()>t}));if(u.sort((function(t,i){return i.bi()-t.bi()})),u.length&&o.length&&o.push(u[0]),o.sort((function(t,i){return t.bi()-i.bi()})),i.forEach((function(t){return t.Si(t.bi())})),this.Ai.K().alignLabels){for(var l=1;l<u.length;l++){var a=u[l],f=(v=u[l-1]).li(h,!1);a.bi()>(d=v.Ni())-f&&a.Si(d-f)}for(var c=1;c<o.length;c++){var v,d;a=o[c],f=(v=o[c-1]).li(h,!0);a.bi()<(d=v.Ni())+f&&a.Si(d+f)}}}},t.prototype.im=function(t,i){var n=this;if(null!==this.yb){t.save();var s=this.yb,h=this.Kb(),r=this.Jb(),e=this.Ab?"right":"left";h.forEach((function(h){if(h.Fi()){var u=h.Dt(E(n.Ai));t.save(),u.ot(t,r,n.xb,s.Zt,e,i),t.restore()}})),t.restore()}},t.prototype.nm=function(t,i){var n=this;if(null!==this.yb&&null!==this.Ai){t.save();var s=this.yb,h=this.Xi.Lb().ri(),r=[],e=this.Xi.qs(),u=h.To().Cn(e,this.Ai);u.length&&r.push(u);var o=this.Jb(),l=this.Ab?"right":"left";r.forEach((function(h){h.forEach((function(h){t.save(),h.Dt(E(n.Ai)).ot(t,o,n.xb,s.Zt,l,i),t.restore()}))})),t.restore()}},t.prototype.hm=function(t){this.Bb.style.cursor=1===t?"ns-resize":"default"},t.prototype.ne=function(){var t=this.$b();this.Nb<t&&this.Xi.Lb().ri().Gc(),this.Nb=t},t.prototype.Fb=function(t){this.Cb.D(),this.Cb=new Kh(t.V,t.j,t.I)},t}();function Zh(t,i,n,s,h){t.ct&&t.ct(i,n,s,h)}function Gh(t,i,n,s,h){t.ot(i,n,s,h)}function Qh(t,i){return t.xn(i)}function tr(t,i){return void 0!==t.uv?t.uv(i):[]}var ir=function(){function t(t,i){var n=this;this.yb=new Eh(0,0),this.rm=null,this.um=null,this.om=null,this.lm=!1,this.am=new J,this.fm=0,this.vm=!1,this.dm=null,this._m=!1,this.wm=null,this.Mm=null,this.Sb=!1,this.Tb=function(){n.Sb||null===n.bm||n.Ri().eo()},this.Eb=function(){n.Sb||null===n.bm||n.Ri().eo()},this.pm=t,this.bm=i,this.bm.uo().C(this.gm.bind(this),this,!0),this.ym=document.createElement("td"),this.ym.style.padding="0",this.ym.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.km=document.createElement("td"),this.km.style.padding="0",this.xm=document.createElement("td"),this.xm.style.padding="0",this.ym.appendChild(s),this.Db=Ph(s,new Eh(16,16)),this.Db.subscribeCanvasConfigured(this.Tb);var h=this.Db.canvas;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Pb=Ph(s,new Eh(16,16)),this.Pb.subscribeCanvasConfigured(this.Eb);var r=this.Pb.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Cm=document.createElement("tr"),this.Cm.appendChild(this.km),this.Cm.appendChild(this.ym),this.Cm.appendChild(this.xm),this.Nm(),this.Hb=new Hh(this.Pb.canvas,this,{NM:function(){return null===n.dm&&!n.pm.K().handleScroll.vertTouchDrag},SM:function(){return null===n.dm&&!n.pm.K().handleScroll.horzTouchDrag}})}return t.prototype.D=function(){null!==this.rm&&this.rm.D(),null!==this.um&&this.um.D(),this.Pb.unsubscribeCanvasConfigured(this.Eb),this.Pb.destroy(),this.Db.unsubscribeCanvasConfigured(this.Tb),this.Db.destroy(),null!==this.bm&&this.bm.uo().L(this),this.Hb.D()},t.prototype.qs=function(){return E(this.bm)},t.prototype.Sm=function(i){null!==this.bm&&this.bm.uo().L(this),this.bm=i,null!==this.bm&&this.bm.uo().C(t.prototype.gm.bind(this),this,!0),this.Nm()},t.prototype.Uo=function(t){var i=t.toString();this.ym.style.cursor!==i&&(this.ym.style.cursor=i)},t.prototype.Lb=function(){return this.pm},t.prototype.qb=function(){return this.Cm},t.prototype.Nm=function(){if(null!==this.bm&&(this.Tm(),0!==this.Ri().Bt().length)){if(null!==this.rm){var t=this.bm.Ju();this.rm.$i(E(t))}if(null!==this.um){var i=this.bm.Ys();this.um.$i(E(i))}}},t.prototype.Fm=function(){null!==this.rm&&this.rm.At(),null!==this.um&&this.um.At()},t.prototype.Du=function(){return null!==this.bm?this.bm.Du():0},t.prototype.Pu=function(t){this.bm&&this.bm.Pu(t)},t.prototype.gM=function(t){if(this.bm){this.Lm();var i=t.hb,n=t.rb;this.Em(i,n)}},t.prototype.WM=function(t){this.Lm(),this.Am(),this.Em(t.hb,t.rb),this.Bm(6,t)},t.prototype.yM=function(t){if(this.bm){var i=t.hb,n=t.rb;this.Dm()&&this.Pm(),this.Em(i,n),this.Bm(9,t)}},t.prototype.PM=function(t){if(null!==this.bm){this.Lm(),this.Bm(3,t);var i=t.hb,n=t.rb;if(this.am.B()){var h=this.Ri().To().Ot();this.am.A(h,new s(i,n))}this.Om()}},t.prototype.dM=function(t){if(null!==this.bm){this.Lm(),this.Bm(4,t);var i=this.qs().Uu();if(i.length>0){var n=i[0];if(n.ih())n.nh(!1);else{var s=Q(i[0].dh());this.Ri().iw(s)}}}},t.prototype.LM=function(t){this.Rm(t)},t.prototype.DM=function(t){null!==this.bm&&(this.Lm(),this.Bm(10,t),this.vm=!1,this.zm(t))},t.prototype.ZM=function(t){if(this.vm=!0,null===this.dm){var i=new s(t.hb,t.rb);this.Vm(i,i)}},t.prototype.XM=function(t){null!==this.bm&&(this.Lm(),this.bm.ri().L_(null),this.Pm())},t.prototype.Wm=function(){return this.am},t.prototype.qM=function(){this.fm=1,this.Im()},t.prototype.UM=function(t,i){if(this.pm.K().handleScale.pinch){var n=5*(i-this.fm);this.fm=i,this.Ri().H_(t.bt,n)}},t.prototype.zM=function(t){if(this.vm=!1,this._m=null!==this.dm,this.Am(),this.Bm(6,t),null!==this.dm){var i=this.Ri().To();this.wm=new s(i.ai(),i.fi()),this.dm=new s(t.hb,t.rb)}},t.prototype.TM=function(t){if(null!==this.bm){var i=t.hb,n=t.rb;if(null!==this.dm){this._m=!1;var s=E(this.wm),h=s.x+(i-this.dm.x),r=s.y+(n-this.dm.y);this.Em(h,r)}else this.Dm()||this.Em(i,n);this.Rm(t)}},t.prototype.AM=function(t){0===this.Lb().K().trackingMode.exitMode&&(this._m=!0),this.Bm(10,t),this.Om(),this.zm(t)},t.prototype.jm=function(t,i){E("left"===i?this.rm:this.um).Xb(new Eh(t,this.yb.Gt))},t.prototype.Hm=function(){return this.yb},t.prototype.Xb=function(t){if(t.Zt<0||t.Gt<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.yb.yr(t)||(this.yb=t,this.Sb=!0,this.Db.resizeCanvas({width:t.Zt,height:t.Gt}),this.Pb.resizeCanvas({width:t.Zt,height:t.Gt}),this.Sb=!1,this.ym.style.width=t.Zt+"px",this.ym.style.height=t.Gt+"px")},t.prototype.qm=function(){var t=E(this.bm);t.ju(t.Ju()),t.ju(t.Ys());for(var i=0,n=t.Ie();i<n.length;i++){var s=n[i];if(t.zu(s)){var h=s.Ht();null!==h&&t.ju(h),s.Sn()}}},t.prototype.sm=function(){return this.Db.canvas},t.prototype.Gb=function(t){if(0!==t&&null!==this.bm){if(t>1&&this.qm(),null!==this.rm&&this.rm.Gb(t),null!==this.um&&this.um.Gb(t),1!==t){var i=Bh(this.Db.canvas);i.save(),this.fl(i,this.Db.pixelRatio),this.bm&&(this.Um(i,this.Db.pixelRatio),this.Ym(i,this.Db.pixelRatio),this.Jm(i,this.Db.pixelRatio,Qh)),i.restore()}var n=Bh(this.Pb.canvas);n.clearRect(0,0,Math.ceil(this.yb.Zt*this.Pb.pixelRatio),Math.ceil(this.yb.Gt*this.Pb.pixelRatio)),this.Jm(n,this.Db.pixelRatio,tr),this.$m(n,this.Pb.pixelRatio)}},t.prototype.Km=function(){return this.rm},t.prototype.Xm=function(){return this.um},t.prototype.Zm=function(t,i){this.Ri().Z_(this.Gm(t),this.Qm(i),E(this.bm))},t.prototype.tp=function(t,i,n){if(this.bm)if(n){var s=t,h=i;this.ip(s,h)}else this.bm.ri().L_(null),this.Pm()},t.prototype.np=function(){this.Pm()},t.prototype.Bm=function(t,i){var n=this;if(null!==this.bm){this.Uo(Yi.cu);var s=Bh(this.sm());this.Ri().O_().So(this,s,t,i);for(var h=this.bm.je(),r=h.length-1;r>=0;r--){var e=this.Ri().$o(h[r]);if(null!==e)h[r].xn(e).forEach((function(h){void 0!==h.So&&h.So(n,s,t,i)}))}}},t.prototype.gm=function(){null!==this.bm&&this.bm.uo().L(this),this.bm=null},t.prototype.fl=function(t,i){var n=this;dt(t,i,(function(){var i=n.Ri(),s=i.lw(),h=i.ow();s===h?_t(t,0,0,n.yb.Zt,n.yb.Gt,h):wt(t,0,0,n.yb.Zt,n.yb.Gt,s,h)}))},t.prototype.Um=function(t,i){var n=E(this.bm),s=n.oo()._r().Dt(n.li(),n.oi());null!==s&&(t.save(),s.ot(t,i,!1),t.restore())},t.prototype.Ym=function(t,i){var n=this.Ri().P_();this.sp(t,i,Qh,Zh,n),this.sp(t,i,Qh,Gh,n)},t.prototype.$m=function(t,i){this.sp(t,i,Qh,Gh,this.Ri().To())},t.prototype.Jm=function(t,i,n){for(var s=E(this.bm).je(),h=0,r=s;h<r.length;h++){var e=r[h];this.sp(t,i,n,Zh,e)}for(var u=0,o=s;u<o.length;u++){e=o[u];this.sp(t,i,n,Gh,e)}},t.prototype.sp=function(t,i,n,s,h){for(var r=E(this.bm),e=n(h,r),u=r.li(),o=r.oi(),l=r.ri().F_(),a=null!==l&&l.E_===h,f=null!==l&&a&&void 0!==l.hp?l.hp.rp:void 0,c=0,v=e;c<v.length;c++){var d=v[c].Dt(u,o);null!==d&&(t.save(),s(d,t,i,a,f),t.restore())}},t.prototype.Tm=function(){if(null!==this.bm){var t=this.pm,i=this.bm.Ju().K().visible,n=this.bm.Ys().K().visible;i||null===this.rm||(this.km.removeChild(this.rm.qb()),this.rm.D(),this.rm=null),n||null===this.um||(this.xm.removeChild(this.um.qb()),this.um.D(),this.um=null);var s=t.ri().nw();i&&null===this.rm&&(this.rm=new Xh(this,t.K().layout,s,"left"),this.km.appendChild(this.rm.qb())),n&&null===this.um&&(this.um=new Xh(this,t.K().layout,s,"right"),this.xm.appendChild(this.um.qb()))}},t.prototype.Dm=function(){return null===this.dm},t.prototype.ep=function(t){return t.lb&&this.vm||null!==this.dm},t.prototype.Gm=function(t){return Math.max(0,Math.min(t,this.yb.Zt-1))},t.prototype.Qm=function(t){return Math.max(0,Math.min(t,this.yb.Gt-1))},t.prototype.Em=function(t,i){this.Ri().Z_(this.Gm(t),this.Qm(i),E(this.bm))},t.prototype.Pm=function(){this.Ri().G_()},t.prototype.ip=function(t,i){this.Ri().Q_(this.Gm(t),this.Qm(i),!1,E(this.bm))},t.prototype.Om=function(){this._m&&(this.dm=null,this.Pm())},t.prototype.Vm=function(t,i){this.dm=t,this._m=!1,this.Em(i.x,i.y);var n=this.Ri().To();this.wm=new s(n.ai(),n.fi())},t.prototype.Ri=function(){return this.pm.ri()},t.prototype.up=function(){var t=this.Ri(),i=this.qs(),n=i.fn();t.Qu(i,n),t.J_(),this.om=null,this.lm=!1},t.prototype.zm=function(t){var i=this;if(this.lm){var n=performance.now();if(null!==this.Mm&&this.Mm.wf(t.hb,n),null===this.Mm||this.Mm.As(n))this.up();else{var s=this.Ri(),h=s.Rt(),r=this.Mm,e=function(){if(!r.Sw()){var t=performance.now(),n=r.As(t);if(!r.Sw()){var u=h.Ed();s.Y_(r.Cw(t)),u===h.Ed()&&(n=!0,i.Mm=null)}n?i.up():requestAnimationFrame(e)}};requestAnimationFrame(e)}}},t.prototype.Lm=function(){this.dm=null},t.prototype.Am=function(){if(this.bm){if(this.Im(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)E(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.bm.fn().et()&&this.Ri().Rt().et()}},t.prototype.Rm=function(t){if(null!==this.bm){var i=this.Ri(),n=t.hb,h=t.rb;if(null!==this.dm){this._m=!1;var r=E(this.wm),e=r.x+(n-this.dm.x),u=r.y+(h-this.dm.y);this.Em(e,u)}else this.Em(n,h);if(null===this.om&&this.Bm(11,t),!i.Rt().et()&&!t.Fo){var o=this.pm.K(),l=o.handleScroll,a=o.kineticScroll;if(l.pressedMouseMove&&!t.lb||(l.horzTouchDrag||l.vertTouchDrag)&&t.lb){var f=this.bm.fn(),c=performance.now();null!==this.om||this.ep(t)||(this.om=new s(t.GM,t.QM),this.om.vs=c,this.om.hb=t.hb,this.om.rb=t.rb),null!==this.Mm&&this.Mm.xw(t.hb,c),null===this.om||this.lm||this.om.x===t.GM&&this.om.y===t.QM||(null===this.Mm&&(t.lb&&a.touch||!t.lb&&a.mouse)&&(this.Mm=new zh(.2,7,.997,15),this.Mm.xw(this.om.hb,this.om.vs),this.Mm.xw(t.hb,c)),f.et()||i.Zu(this.bm,f,t.rb),i.U_(t.hb),this.lm=!0),this.lm&&(f.et()||i.Gu(this.bm,f,t.rb),i.Y_(t.hb))}}}},t.prototype.Im=function(){var t=performance.now(),i=null===this.Mm||this.Mm.As(t);null!==this.Mm&&(i||this.up()),null!==this.Mm&&(this.Mm.Tw(),this.Mm=null)},t}(),nr=function(){function t(t,i,n,s,h){var r=this;this.Lt=!0,this.yb=new Eh(0,0),this.Tb=function(){return r.Gb(3)},this.Ab="left"===t,this.m_=n.nw,this.un=i,this.op=s,this.lp=h,this.Bb=document.createElement("div"),this.Bb.style.width="25px",this.Bb.style.height="100%",this.Bb.style.overflow="hidden",this.Db=Ph(this.Bb,new Eh(16,16)),this.Db.subscribeCanvasConfigured(this.Tb)}return t.prototype.D=function(){this.Db.unsubscribeCanvasConfigured(this.Tb),this.Db.destroy()},t.prototype.qb=function(){return this.Bb},t.prototype.Hm=function(){return this.yb},t.prototype.Xb=function(t){if(t.Zt<0||t.Gt<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.yb.yr(t)||(this.yb=t,this.Db.resizeCanvas({width:t.Zt,height:t.Gt}),this.Bb.style.width="".concat(t.Zt,"px"),this.Bb.style.minWidth="".concat(t.Zt,"px"),this.Bb.style.height="".concat(t.Gt,"px"),this.Lt=!0)},t.prototype.Gb=function(t){if((!(t<3)||this.Lt)&&0!==this.yb.Zt&&0!==this.yb.Gt){this.Lt=!1;var i=Bh(this.Db.canvas);this.fl(i,this.Db.pixelRatio),this.vl(i,this.Db.pixelRatio)}},t.prototype.sm=function(){return this.Db.canvas},t.prototype.vl=function(t,i){if(this.op()){var n=this.yb.Zt;t.save(),t.fillStyle=this.un.timeScale.borderColor;var s=Math.floor(this.m_.K().O*i),h=this.Ab?Math.round(n*i)-s:0;t.fillRect(h,0,s,s),t.restore()}},t.prototype.fl=function(t,i){var n=this;dt(t,i,(function(){_t(t,0,0,n.yb.Zt,n.yb.Gt,n.lp())}))},t}();function sr(t,i){return t.Hv>i.Hv?t:i}var hr=function(){function t(t){var i=this;this.ap=null,this.fp=null,this.P=null,this.cp=!1,this.yb=new Eh(0,0),this.vp=new J,this.xb=new ks(5),this.Sb=!1,this.Tb=function(){i.Sb||i.pm.ri().eo()},this.Eb=function(){i.Sb||i.pm.ri().eo()},this.pm=t,this.un=t.K().layout,this.dp=document.createElement("tr"),this._p=document.createElement("td"),this._p.style.padding="0",this.wp=document.createElement("td"),this.wp.style.padding="0",this.Bb=document.createElement("td"),this.Bb.style.height="25px",this.Bb.style.padding="0",this.Mp=document.createElement("div"),this.Mp.style.width="100%",this.Mp.style.height="100%",this.Mp.style.position="relative",this.Mp.style.overflow="hidden",this.Bb.appendChild(this.Mp),this.Db=Ph(this.Mp,new Eh(16,16)),this.Db.subscribeCanvasConfigured(this.Tb);var n=this.Db.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Pb=Ph(this.Mp,new Eh(16,16)),this.Pb.subscribeCanvasConfigured(this.Eb);var s=this.Pb.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.dp.appendChild(this._p),this.dp.appendChild(this.Bb),this.dp.appendChild(this.wp),this.bp(),this.pm.ri().Bu().C(this.bp.bind(this),this),this.Hb=new Hh(this.Pb.canvas,this,{NM:function(){return!0},SM:function(){return!1}})}return t.prototype.D=function(){this.Hb.D(),null!==this.ap&&this.ap.D(),null!==this.fp&&this.fp.D(),this.Pb.unsubscribeCanvasConfigured(this.Eb),this.Pb.destroy(),this.Db.unsubscribeCanvasConfigured(this.Tb),this.Db.destroy()},t.prototype.qb=function(){return this.dp},t.prototype.mp=function(){return this.ap},t.prototype.pp=function(){return this.fp},t.prototype.WM=function(t){if(!this.cp){this.cp=!0;var i=this.pm.ri();!i.Rt().et()&&this.pm.K().handleScale.axisPressedMouseMove.time&&i.j_(t.hb)}},t.prototype.zM=function(t){this.WM(t)},t.prototype.IM=function(){var t=this.pm.ri();!t.Rt().et()&&this.cp&&(this.cp=!1,this.pm.K().handleScale.axisPressedMouseMove.time&&t.X_())},t.prototype.LM=function(t){var i=this.pm.ri();!i.Rt().et()&&this.pm.K().handleScale.axisPressedMouseMove.time&&i.K_(t.hb)},t.prototype.TM=function(t){this.LM(t)},t.prototype.DM=function(){this.cp=!1;var t=this.pm.ri();t.Rt().et()&&!this.pm.K().handleScale.axisPressedMouseMove.time||t.X_()},t.prototype.AM=function(){this.DM()},t.prototype.dM=function(){this.pm.K().handleScale.axisDoubleClickReset&&this.pm.ri().Hn()},t.prototype.aM=function(){this.dM()},t.prototype.gM=function(){this.pm.ri().K().handleScale.axisPressedMouseMove.time&&this.hm(1)},t.prototype.XM=function(){this.hm(0)},t.prototype.Hm=function(){return this.yb},t.prototype.gp=function(){return this.vp},t.prototype.yp=function(t,i,n){this.yb&&this.yb.yr(t)||(this.yb=t,this.Sb=!0,this.Db.resizeCanvas({width:t.Zt,height:t.Gt}),this.Pb.resizeCanvas({width:t.Zt,height:t.Gt}),this.Sb=!1,this.Bb.style.width=t.Zt+"px",this.Bb.style.height=t.Gt+"px",this.vp.A(t)),null!==this.ap&&this.ap.Xb(new Eh(i,t.Gt)),null!==this.fp&&this.fp.Xb(new Eh(n,t.Gt))},t.prototype.kp=function(){var t=this.xp();return Math.ceil(t.O+t.R+t.V+t.Y+t.H)},t.prototype.At=function(){this.pm.ri().Rt().dr()},t.prototype.sm=function(){return this.Db.canvas},t.prototype.Gb=function(t){if(0!==t){if(1!==t){var i=Bh(this.Db.canvas);this.fl(i,this.Db.pixelRatio),this.vl(i,this.Db.pixelRatio),this.tm(i,this.Db.pixelRatio),this.Cp(this.pm.ri().Ie(),i,this.Db.pixelRatio),null!==this.ap&&this.ap.Gb(t),null!==this.fp&&this.fp.Gb(t)}var n=Bh(this.Pb.canvas),s=this.Pb.pixelRatio;n.clearRect(0,0,Math.ceil(this.yb.Zt*s),Math.ceil(this.yb.Gt*s)),this.Cp([this.pm.ri().To()],n,s)}},t.prototype.fl=function(t,i){var n=this;dt(t,i,(function(){_t(t,0,0,n.yb.Zt,n.yb.Gt,n.pm.ri().ow())}))},t.prototype.vl=function(t,i){if(this.pm.K().timeScale.borderVisible){t.save(),t.fillStyle=this.Np();var n=Math.max(1,Math.floor(this.xp().O*i));t.fillRect(0,0,Math.ceil(this.yb.Zt*i),n),t.restore()}},t.prototype.tm=function(t,i){var n=this,s=this.pm.ri().Rt().dr();if(s&&0!==s.length){var h=s.reduce(sr,s[0]).Hv;h>30&&h<50&&(h=30),t.save(),t.strokeStyle=this.Np();var r=this.xp(),e=r.O+r.R+r.Y+r.V-r.J;t.textAlign="center",t.fillStyle=this.Np();var u=Math.floor(this.xp().O*i),o=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(this.pm.ri().Rt().K().borderVisible){t.beginPath();for(var a=Math.round(r.R*i),f=s.length;f--;){var c=Math.round(s[f].ur*i);t.rect(c-l,u,o,a)}t.fill()}t.fillStyle=this.G(),dt(t,i,(function(){t.font=n.Sp();for(var i=0,r=s;i<r.length;i++){if((a=r[i]).Hv<h){var u=a.Dd?n.Tp(t,a.ur,a.qr):a.ur;t.fillText(a.qr,u,e)}}t.font=n.Fp();for(var o=0,l=s;o<l.length;o++){var a;if((a=l[o]).Hv>=h){u=a.Dd?n.Tp(t,a.ur,a.qr):a.ur;t.fillText(a.qr,u,e)}}})),t.restore()}},t.prototype.Tp=function(t,i,n){var s=this.xb.Mi(t,n),h=s/2,r=Math.floor(i-h)+.5;return r<0?i+=Math.abs(0-r):r+s>this.yb.Zt&&(i-=Math.abs(this.yb.Zt-(r+s))),i},t.prototype.Cp=function(t,i,n){for(var s=this.xp(),h=0,r=t;h<r.length;h++)for(var e=0,u=r[h].Ki();e<u.length;e++){var o=u[e].Dt();i.save(),o.ot(i,s,n),i.restore()}},t.prototype.Np=function(){return this.pm.K().timeScale.borderColor},t.prototype.G=function(){return this.un.textColor},t.prototype.X=function(){return this.un.fontSize},t.prototype.Sp=function(){return st(this.X(),this.un.fontFamily)},t.prototype.Fp=function(){return st(this.X(),this.un.fontFamily,"bold")},t.prototype.xp=function(){null===this.P&&(this.P={O:1,J:NaN,Y:NaN,H:NaN,Oi:NaN,R:3,V:NaN,W:"",Pi:new ks});var t=this.P,i=this.Sp();if(t.W!==i){var n=this.X();t.V=n,t.W=i,t.Y=Math.ceil(n/2.5),t.H=t.Y,t.Oi=Math.ceil(n/2),t.J=Math.round(this.X()/5),t.Pi.tf()}return this.P},t.prototype.hm=function(t){this.Bb.style.cursor=1===t?"ew-resize":"default"},t.prototype.bp=function(){var t=this.pm.ri(),i=t.K();i.leftPriceScale.visible||null===this.ap||(this._p.removeChild(this.ap.qb()),this.ap.D(),this.ap=null),i.rightPriceScale.visible||null===this.fp||(this.wp.removeChild(this.fp.qb()),this.fp.D(),this.fp=null);var n={nw:this.pm.ri().nw()},s=function(){return i.leftPriceScale.borderVisible&&t.Rt().K().borderVisible},h=function(){return t.ow()};i.leftPriceScale.visible&&null===this.ap&&(this.ap=new nr("left",i,n,s,h),this._p.appendChild(this.ap.qb())),i.rightPriceScale.visible&&null===this.fp&&(this.fp=new nr("right",i,n,s,h),this.wp.appendChild(this.fp.qb()))},t}(),rr=function(){function t(t,i){var n;this.Lp=[],this.Ep=0,this.Jr=0,this.yu=0,this.Ap=0,this.Bp=0,this.Dp=null,this.Pp=!1,this.am=new J,this.d_=new J,this.__=new J,this.w_=new J,this.un=i,this.dp=document.createElement("div"),this.dp.classList.add("tv-lightweight-charts"),this.dp.style.overflow="hidden",this.dp.style.width="100%",this.dp.style.height="100%",(n=this.dp).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Op=document.createElement("table"),this.Op.setAttribute("cellspacing","0"),this.dp.appendChild(this.Op),this.Rp=this.zp.bind(this),this.dp.addEventListener("wheel",this.Rp,{passive:!1}),this.Ri=new Ch(this.b_.bind(this),this.un),this.ri().R_().C(this.Vp.bind(this),this),this.ri().z_().C(this.Wp.bind(this),this),this.ri().V_().C(this.Ip.bind(this),this),this.jp=new hr(this),this.Op.appendChild(this.jp.qb());var s=this.un.width,h=this.un.height;if(0===s||0===h){var r=t.getBoundingClientRect();0===s&&(s=Math.floor(r.width),s-=s%2),0===h&&(h=Math.floor(r.height),h-=h%2)}this.Hp(s,h),this.qp(),t.appendChild(this.dp),this.Up(),this.Ri.Rt().qd().C(this.Ri.Gc.bind(this.Ri),this),this.Ri.Bu().C(this.Ri.Gc.bind(this.Ri),this)}return t.prototype.ri=function(){return this.Ri},t.prototype.K=function(){return this.un},t.prototype.Yp=function(){return this.Lp},t.prototype.Jp=function(){return this.jp},t.prototype.D=function(){this.dp.removeEventListener("wheel",this.Rp),0!==this.Ep&&window.cancelAnimationFrame(this.Ep),this.Ri.R_().L(this),this.Ri.z_().L(this),this.Ri.Rt().qd().L(this),this.Ri.Bu().L(this),this.Ri.D();for(var t=0,i=this.Lp;t<i.length;t++){var n=i[t];this.Op.removeChild(n.qb()),n.Wm().L(this),n.D()}this.Lp=[],E(this.jp).D(),null!==this.dp.parentElement&&this.dp.parentElement.removeChild(this.dp),this.d_.D(),this.am.D()},t.prototype.Hp=function(t,i,n){if(void 0===n&&(n=!1),this.Jr!==i||this.yu!==t){this.Jr=i,this.yu=t;var s=i+"px",h=t+"px";E(this.dp).style.height=s,E(this.dp).style.width=h,this.Op.style.height=s,this.Op.style.width=h,n?this.$p(new Tt(3)):this.Ri.Gc()}},t.prototype.Gb=function(t){void 0===t&&(t=new Tt(3));for(var i=0;i<this.Lp.length;i++)this.Lp[i].Gb(t.Vn(i).On);this.un.timeScale.visible&&this.jp.Gb(t.zn())},t.prototype.$s=function(t){this.Ri.$s(t),this.Up();var i=t.width||this.yu,n=t.height||this.Jr;this.Hp(i,n)},t.prototype.Wm=function(){return this.am},t.prototype.R_=function(){return this.d_},t.prototype.z_=function(){return this.__},t.prototype.V_=function(){return this.w_},t.prototype.Kp=function(){var t=this;null!==this.Dp&&(this.$p(this.Dp),this.Dp=null);var i=this.Lp[0],n=Dh(document,new Eh(this.yu,this.Jr)),s=Bh(n),h=Ah(n);return dt(s,h,(function(){var n=0,h=0,r=function(i){for(var r=0;r<t.Lp.length;r++){var e=t.Lp[r],u=e.Hm().Gt,o=E("left"===i?e.Km():e.Xm()),l=o.sm();s.drawImage(l,n,h,o.Zb(),u),h+=u}};t.Xp()&&(r("left"),n=E(i.Km()).Zb()),h=0;for(var e=0;e<t.Lp.length;e++){var u=t.Lp[e],o=u.Hm(),l=u.sm();s.drawImage(l,n,h,o.Zt,o.Gt),h+=o.Gt}n+=i.Hm().Zt,t.Zp()&&(h=0,r("right"));var a=function(i){var r=E("left"===i?t.jp.mp():t.jp.pp()),e=r.Hm(),u=r.sm();s.drawImage(u,n,h,e.Zt,e.Gt)};if(t.un.timeScale.visible){n=0,t.Xp()&&(a("left"),n=E(i.Km()).Zb());var f=t.jp.Hm();l=t.jp.sm();s.drawImage(l,n,h,f.Zt,f.Gt),t.Zp()&&(n+=i.Hm().Zt,a("right"),s.restore())}})),n},t.prototype.Gp=function(t){return"none"===t?0:("left"!==t||this.Xp())&&("right"!==t||this.Zp())?0===this.Lp.length?0:E("left"===t?this.Lp[0].Km():this.Lp[0].Xm()).Zb():0},t.prototype.Qp=function(){for(var t=0,i=0,n=0,s=0,h=this.Lp;s<h.length;s++){var r=h[s];this.Xp()&&(i=Math.max(i,E(r.Km()).$b())),this.Zp()&&(n=Math.max(n,E(r.Xm()).$b())),t+=r.Du()}var e=this.yu,u=this.Jr,o=Math.max(e-i-n,0),l=this.un.timeScale.visible,a=l?this.jp.kp():0;a%2&&(a+=1);for(var f=0+a,c=u<f?0:u-f,v=c/t,d=0,_=0;_<this.Lp.length;++_){(r=this.Lp[_]).Sm(this.Ri.Js()[_]);var w,M=0;M=_===this.Lp.length-1?c-d:Math.round(r.Du()*v),d+=w=Math.max(M,2),r.Xb(new Eh(o,w)),this.Xp()&&r.jm(i,"left"),this.Zp()&&r.jm(n,"right"),r.qs()&&this.Ri.W_(r.qs(),w)}this.jp.yp(new Eh(l?o:0,a),l?i:0,l?n:0),this.Ri.Ou(o),this.Ap!==i&&(this.Ap=i),this.Bp!==n&&(this.Bp=n)},t.prototype.zp=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.un.handleScroll.mouseWheel||0!==n&&this.un.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.un.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.dp.getBoundingClientRect().left;this.ri().H_(h,s)}0!==i&&this.un.handleScroll.mouseWheel&&this.ri().q_(-80*i)}},t.prototype.$p=function(t){var i,n=t.zn();3===n&&this.tg(),3!==n&&2!==n||(this.ig(t),this.ng(t),this.jp.At(),this.Lp.forEach((function(t){t.Fm()})),3===(null===(i=this.Dp)||void 0===i?void 0:i.zn())&&(this.Dp.Jn(t),this.tg(),this.ig(this.Dp),this.ng(this.Dp),t=this.Dp,this.Dp=null)),this.Gb(t)},t.prototype.ng=function(t){for(var i=0,n=t.Yn();i<n.length;i++){var s=n[i];this.$n(s)}},t.prototype.ig=function(t){for(var i=this.Ri.Js(),n=0;n<i.length;n++)t.Vn(n).Rn&&i[n].ho()},t.prototype.$n=function(t){var i=this.Ri.Rt();switch(t.In){case 0:i.Yd();break;case 1:i.Jd(t.qt);break;case 2:i.qn(t.qt);break;case 3:i.Un(t.qt);break;case 4:i.Pd()}},t.prototype.b_=function(t){var i=this;null!==this.Dp?this.Dp.Jn(t):this.Dp=t,this.Pp||(this.Pp=!0,this.Ep=window.requestAnimationFrame((function(){if(i.Pp=!1,i.Ep=0,null!==i.Dp){var t=i.Dp;i.Dp=null,i.$p(t)}})))},t.prototype.tg=function(){this.qp()},t.prototype.qp=function(){for(var t=this.Ri.Js(),i=t.length,n=this.Lp.length,s=i;s<n;s++){var h=L(this.Lp.pop());this.Op.removeChild(h.qb()),h.Wm().L(this),h.D()}for(s=n;s<i;s++){(h=new ir(this,t[s])).Wm().C(this.sg.bind(this),this),this.Lp.push(h),this.Op.insertBefore(h.qb(),this.jp.qb())}for(s=0;s<i;s++){var r=t[s];(h=this.Lp[s]).qs()!==r?h.Sm(r):h.Nm()}this.Up(),this.Qp()},t.prototype.hg=function(t,i){var n,s=new Map;null!==t&&this.Ri.Bt().forEach((function(i){var n=i.Gf(t);null!==n&&s.set(i,n)}));if(null!==t){var h=this.Ri.Rt().vn(t);null!==h&&(n=h)}var r=this.ri().F_(),e=null!==r&&r.E_ instanceof th?r.E_:void 0,u=null!==r&&void 0!==r.hp?r.hp.Zf:void 0;return{Ct:n,rg:i||void 0,eg:e,ug:s,og:u}},t.prototype.lg=function(t){return{ag:t}},t.prototype.fg=function(t,i){return{ag:t,cg:i}},t.prototype.sg=function(t,i){var n=this;this.am.A((function(){return n.hg(t,i)}))},t.prototype.Vp=function(t,i){var n=this;this.d_.A((function(){return n.hg(t,i)}))},t.prototype.Wp=function(t){var i=this;this.__.A((function(){return i.lg(t)}))},t.prototype.Ip=function(t,i){var n=this;this.w_.A((function(){return n.fg(t,i)}))},t.prototype.Up=function(){var t=this.un.timeScale.visible?"":"none";this.jp.qb().style.display=t},t.prototype.Xp=function(){return this.Lp[0].qs().Ju().K().visible},t.prototype.Zp=function(){return this.Lp[0].qs().Ys().K().visible},t}();function er(t,i,n){var s=n.value;return{ma:i,Ct:t,qt:[s,s,s,s]}}function ur(t,i,n){var s=n.value,h={ma:i,Ct:t,qt:[s,s,s,s]};return"color"in n&&void 0!==n.color&&(h.j=n.color),h}function or(t){return void 0!==t.qt}function lr(t){return function(i,n,s){return void 0===(h=s).open&&void 0===h.value?{Ct:i,ma:n}:t(i,n,s);var h}}var ar={Candlestick:lr((function(t,i,n){var s={ma:i,Ct:t,qt:[n.open,n.high,n.low,n.close]};return"color"in n&&void 0!==n.color&&(s.j=n.color),"borderColor"in n&&void 0!==n.borderColor&&(s.Ut=n.borderColor),"wickColor"in n&&void 0!==n.wickColor&&(s.ja=n.wickColor),s})),Bar:lr((function(t,i,n){var s={ma:i,Ct:t,qt:[n.open,n.high,n.low,n.close]};return"color"in n&&void 0!==n.color&&(s.j=n.color),s})),Area:lr(er),Baseline:lr(er),Histogram:lr(ur),Line:lr(ur)};function fr(t){return ar[t]}function cr(t){return 60*t*60*1e3}function vr(t){return 60*t*1e3}var dr,_r=[{vg:(dr=1,1e3*dr),Hv:10},{vg:vr(1),Hv:20},{vg:vr(5),Hv:21},{vg:vr(30),Hv:22},{vg:cr(1),Hv:30},{vg:cr(3),Hv:31},{vg:cr(6),Hv:32},{vg:cr(12),Hv:33}];function wr(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=_r.length-1;n>=0;--n)if(Math.floor(i.getTime()/_r[n].vg)!==Math.floor(t.getTime()/_r[n].vg))return _r[n].Hv;return 0}function Mr(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].Ct.vs,s=null!==n?new Date(1e3*n):null,h=0,r=i;r<t.length;++r){var e=t[r],u=new Date(1e3*e.Ct.vs);null!==s&&(e.jv=wr(u,s)),h+=e.Ct.vs-(n||e.Ct.vs),n=e.Ct.vs,s=u}if(0===i&&t.length>1){var o=Math.ceil(h/(t.length-1)),l=new Date(1e3*(t[0].Ct.vs-o));t[0].jv=wr(new Date(1e3*t[0].Ct.vs),l)}}}function br(t){if(!Sh(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{vs:Math.round(i.getTime()/1e3),Bv:t}}function mr(t){if(!Th(t))throw new Error("time must be of type isUTCTimestamp");return{vs:t}}function pr(t){return 0===t.length?null:Sh(t[0].time)?br:mr}function gr(t){return Th(t)?mr(t):Sh(t)?br(t):br(yr(t))}function yr(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function kr(t){Z(t.time)&&(t.time=yr(t.time))}function xr(t){return{ma:0,dg:new Map,Ye:t}}function Cr(t){if(void 0!==t&&0!==t.length)return{_g:t[0].Ct.vs,wg:t[t.length-1].Ct.vs}}var Nr=function(){function t(){this.Mg=new Map,this.bg=new Map,this.mg=new Map,this.pg=[]}return t.prototype.D=function(){this.Mg.clear(),this.bg.clear(),this.mg.clear(),this.pg=[]},t.prototype.gg=function(t,i){var n=this,s=0!==this.Mg.size,h=!1,r=this.bg.get(t);if(void 0!==r)if(1===this.bg.size)s=!1,h=!0,this.Mg.clear();else for(var e=0,u=this.pg;e<u.length;e++){u[e].pointData.dg.delete(t)&&(h=!0)}var o=[];if(0!==i.length){!function(t){t.forEach(kr)}(i);var l=E(pr(i)),a=fr(t.dc());o=i.map((function(i){var s=l(i.time),r=n.Mg.get(s.vs);void 0===r&&(r=xr(s),n.Mg.set(s.vs,r),h=!0);var e=a(s,r.ma,i);return r.dg.set(t,e),e}))}s&&this.yg(),this.kg(t,o);var f=-1;if(h){var c=[];this.Mg.forEach((function(t){c.push({jv:0,Ct:t.Ye,pointData:t})})),c.sort((function(t,i){return t.Ct.vs-i.Ct.vs})),f=this.xg(c)}return this.Cg(t,f,function(t,i){var n=Cr(t),s=Cr(i);if(void 0!==n&&void 0!==s)return{iv:n.wg>=s.wg&&n._g>=s._g}}(this.bg.get(t),r))},t.prototype.rw=function(t){return this.gg(t,[])},t.prototype.Ng=function(t,i){kr(i);var n=E(pr([i]))(i.time),s=this.mg.get(t);if(void 0!==s&&n.vs<s.vs)throw new Error("Cannot update oldest data, last time=".concat(s.vs,", new time=").concat(n.vs));var h=this.Mg.get(n.vs),r=void 0===h;void 0===h&&(h=xr(n),this.Mg.set(n.vs,h));var e=fr(t.dc())(n,h.ma,i);h.dg.set(t,e),this.Sg(t,e);var u={iv:or(e)};if(!r)return this.Cg(t,-1,u);var o={jv:0,Ct:h.Ye,pointData:h},l=is(this.pg,o.Ct.vs,(function(t,i){return t.Ct.vs<i}));this.pg.splice(l,0,o);for(var a=l;a<this.pg.length;++a)Sr(this.pg[a].pointData,a);return Mr(this.pg,l),this.Cg(t,l,u)},t.prototype.Sg=function(t,i){var n=this.bg.get(t);void 0===n&&(n=[],this.bg.set(t,n));var s=0!==n.length?n[n.length-1]:null;null===s||i.Ct.vs>s.Ct.vs?or(i)&&n.push(i):or(i)?n[n.length-1]=i:n.splice(-1,1),this.mg.set(t,i.Ct)},t.prototype.kg=function(t,i){0!==i.length?(this.bg.set(t,i.filter(or)),this.mg.set(t,i[i.length-1].Ct)):(this.bg.delete(t),this.mg.delete(t))},t.prototype.yg=function(){for(var t=0,i=this.pg;t<i.length;t++){var n=i[t];0===n.pointData.dg.size&&this.Mg.delete(n.Ct.vs)}},t.prototype.xg=function(t){for(var i=-1,n=0;n<this.pg.length&&n<t.length;++n){var s=this.pg[n],h=t[n];if(s.Ct.vs!==h.Ct.vs){i=n;break}h.jv=s.jv,Sr(h.pointData,n)}if(-1===i&&this.pg.length!==t.length&&(i=Math.min(this.pg.length,t.length)),-1===i)return-1;for(n=i;n<t.length;++n)Sr(t[n].pointData,n);return Mr(t,i),this.pg=t,i},t.prototype.Tg=function(){if(0===this.bg.size)return null;var t=0;return this.bg.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].ma))})),t},t.prototype.Cg=function(t,i,n){var s={Fg:new Map,Rt:{Nd:this.Tg()}};if(-1!==i)this.bg.forEach((function(i,h){s.Fg.set(h,{Mh:i,Lg:h===t?n:void 0})})),this.bg.has(t)||s.Fg.set(t,{Mh:[],Lg:n}),s.Rt.Ps=this.pg,s.Rt.Eg=i;else{var h=this.bg.get(t);s.Fg.set(t,{Mh:h||[],Lg:n})}return s},t}();function Sr(t,i){t.ma=i,t.dg.forEach((function(t){t.ma=i}))}var Tr={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",ray:!1,rayStart:0},Fr=function(){function t(t){this.ec=t}return t.prototype.applyOptions=function(t){this.ec.$s(t)},t.prototype.options=function(){return this.ec.K()},t.prototype.Ag=function(){return this.ec},t}();function Lr(t){var i=t.overlay,n=function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(s=Object.getOwnPropertySymbols(t);h<s.length;h++)i.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(t,s[h])&&(n[s[h]]=t[s[h]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var Er=function(){function t(t,i,n){this.ra=t,this.Bg=i,this.Dg=n}return t.prototype.priceFormatter=function(){return this.ra.oh()},t.prototype.priceToCoordinate=function(t){var i=this.ra.Wt();return null===i?null:this.ra.Ht().jt(t,i.qt)},t.prototype.coordinateToPrice=function(t){var i=this.ra.Wt();return null===i?null:this.ra.Ht().cn(t,i.qt)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new vh(new lh(t.from,t.to)).$v(),n=this.ra.En();if(n.et())return null;var s=n.Ec(i.ou(),1),h=n.Ec(i.lu(),-1),r=E(n.Tc()),e=E(n.Ln());if(null!==s&&null!==h&&s.ma>h.ma)return{barsBefore:t.from-r,barsAfter:e-t.to};var u={barsBefore:null===s||s.ma===r?t.from-r:s.ma-r,barsAfter:null===h||h.ma===e?e-t.to:e-h.ma};return null!==s&&null!==h&&(u.from=s.Ct.Bv||s.Ct.vs,u.to=h.Ct.Bv||h.Ct.vs),u},t.prototype.setData=function(t){this.ra.dc(),this.Bg.Pg(this.ra,t)},t.prototype.update=function(t){this.ra.dc(),this.Bg.fo(this.ra,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return U(U({},t),{time:gr(t.time)})}));this.ra.sv(i)},t.prototype.applyOptions=function(t){var i=Lr(t);this.ra.$s(i)},t.prototype.options=function(){return Q(this.ra.K())},t.prototype.priceScale=function(){return this.Dg.priceScale(this.ra.Ht().qi())},t.prototype.createPriceLine=function(t){var i=$(Q(Tr),t),n=this.ra.hv(i);return new Fr(n)},t.prototype.removePriceLine=function(t){this.ra.rv(t.Ag())},t.prototype.seriesType=function(){return this.ra.dc()},t}(),Ar=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return q(i,t),i.prototype.applyOptions=function(i){Nh(i),t.prototype.applyOptions.call(this,i)},i}(Er),Br=function(){function t(t){this.Og=t}return t.prototype.setPoints=function(t){throw new Error("Method not implemented.")},t.prototype.applyOptions=function(t){this.Og.$s(t)},t.prototype.options=function(){return Q(this.Og.K())},t.prototype.toolType=function(){return this.Og.sh()},t}(),Dr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},Pr={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:nt,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Or={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:nt},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1,magnetThreshold:14},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:U({},Dr),leftPriceScale:U(U({},Dr),{visible:!1}),rightPriceScale:U(U({},Dr),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:Pr,localization:{locale:Vh?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Rr={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},zr={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Vr={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Wr={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ir={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},jr={color:"#26a69a",base:0},Hr={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},qr=function(){function t(t,i){this.Rg=t,this.zg=i}return t.prototype.applyOptions=function(t){this.Rg.ri().A_(this.zg,t)},t.prototype.options=function(){return this.Ai().K()},t.prototype.width=function(){return St(this.zg)?this.Rg.Gp("left"===this.zg?"left":"right"):0},t.prototype.Ai=function(){return E(this.Rg.ri().B_(this.zg)).Ht},t}(),Ur=function(){function t(t,i){this.Vg=new J,this.rd=new J,this.vp=new J,this.Ri=t,this.Cu=t.Rt(),this.jp=i,this.Cu.jd().C(this.Wg.bind(this)),this.Cu.Hd().C(this.Ig.bind(this)),this.jp.gp().C(this.jg.bind(this))}return t.prototype.D=function(){this.Cu.jd().L(this),this.Cu.Hd().L(this),this.jp.gp().L(this),this.Vg.D(),this.rd.D(),this.vp.D()},t.prototype.scrollPosition=function(){return this.Cu.Ed()},t.prototype.scrollToPosition=function(t,i){i?this.Cu.Id(t,1e3):this.Ri.Un(t)},t.prototype.scrollToRealTime=function(){this.Cu.Wd()},t.prototype.getVisibleRange=function(){var t,i,n=this.Cu.tl();return null===n?null:{from:null!==(t=n.from.Bv)&&void 0!==t?t:n.from.vs,to:null!==(i=n.to.Bv)&&void 0!==i?i:n.to.vs}},t.prototype.setVisibleRange=function(t){var i={from:gr(t.from),to:gr(t.to)},n=this.Cu.kd(i);this.Ri.uw(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Cu.md();return null===t?null:{from:t.ou(),to:t.lu()}},t.prototype.setVisibleLogicalRange=function(t){F(t.from<=t.to,"The from index cannot be after the to index."),this.Ri.uw(t)},t.prototype.resetTimeScale=function(){this.Ri.Hn()},t.prototype.fitContent=function(){this.Ri.Yd()},t.prototype.logicalToCoordinate=function(t){var i=this.Ri.Rt();return i.et()?null:i.Jt(t)},t.prototype.coordinateToLogical=function(t){return this.Cu.et()?null:this.Cu.Sd(t)},t.prototype.timeToCoordinate=function(t){var i=gr(t),n=this.Cu.ac(i,!1);return null===n?null:this.Cu.Jt(n)},t.prototype.coordinateToTime=function(t){var i,n=this.Ri.Rt(),s=n.Sd(t),h=n.vn(s);return null===h?null:null!==(i=h.Bv)&&void 0!==i?i:h.vs},t.prototype.width=function(){return this.jp.Hm().Zt},t.prototype.height=function(){return this.jp.Hm().Gt},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Vg.C(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Vg.F(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.rd.C(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.rd.F(t)},t.prototype.subscribeSizeChange=function(t){this.vp.C(t)},t.prototype.unsubscribeSizeChange=function(t){this.vp.F(t)},t.prototype.applyOptions=function(t){this.Cu.$s(t)},t.prototype.options=function(){return Q(this.Cu.K())},t.prototype.Wg=function(){this.Vg.B()&&this.Vg.A(this.getVisibleRange())},t.prototype.Ig=function(){this.rd.B()&&this.rd.A(this.getVisibleLogicalRange())},t.prototype.jg=function(t){this.vp.A(t.Zt,t.Gt)},t}();function Yr(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Jr(t){return function(t){if(G(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&G(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var s=t.handleScroll;G(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=$(t.leftPriceScale,t.priceScale),t.rightPriceScale=$(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),function(t){t.layout&&t.layout.backgroundColor&&!t.layout.background&&(t.layout.background={type:"solid",color:t.layout.backgroundColor})}(t),t}var $r=function(){function t(t,i){var n=this;this.Hg=new Nr,this.qg=new Map,this.Ug=new Map,this.Yg=new J,this.Jg=new J,this.$g=new J,this.Kg=new J;var s=void 0===i?Q(Or):$(Q(Or),Jr(i));this.Rg=new rr(t,s),this.Rg.Wm().C((function(t){n.Yg.B()&&n.Yg.A(n.Xg(t()))}),this),this.Rg.R_().C((function(t){n.Jg.B()&&n.Jg.A(n.Xg(t()))}),this),this.Rg.z_().C((function(t){n.$g.B()&&n.$g.A(n.Zg(t()))}),this),this.Rg.V_().C((function(t){n.Kg.B()&&n.Kg.A(n.Gg(t()))}),this);var h=this.Rg.ri();this.Qg=new Ur(h,this.Rg.Jp())}return t.prototype.setCrossHairXY=function(t,i,n){this.Rg.Yp()[0].tp(t,i,n)},t.prototype.clearCrossHair=function(){this.Rg.Yp()[0].np()},t.prototype.remove=function(){this.Rg.Wm().L(this),this.Rg.R_().L(this),this.Rg.z_().L(this),this.Rg.V_().L(this),this.Qg.D(),this.Rg.D(),this.qg.clear(),this.Ug.clear(),this.Yg.D(),this.Jg.D(),this.$g.D(),this.Kg.D(),this.Hg.D()},t.prototype.resize=function(t,i,n){this.Rg.Hp(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Yr((t=Lr(t)).priceFormat);var i=$(Q(Hr),Wr,t),n=this.Rg.ri().sw("Area",i),s=new Er(n,this,this);return this.qg.set(s,n),this.Ug.set(n,s),s},t.prototype.addBaselineSeries=function(t){void 0===t&&(t={}),Yr((t=Lr(t)).priceFormat);var i=$(Q(Hr),Q(Ir),t),n=this.Rg.ri().sw("Baseline",i),s=new Er(n,this,this);return this.qg.set(s,n),this.Ug.set(n,s),s},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Yr((t=Lr(t)).priceFormat);var i=$(Q(Hr),zr,t),n=this.Rg.ri().sw("Bar",i),s=new Er(n,this,this);return this.qg.set(s,n),this.Ug.set(n,s),s},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),Nh(t=Lr(t)),Yr(t.priceFormat);var i=$(Q(Hr),Rr,t),n=this.Rg.ri().sw("Candlestick",i),s=new Ar(n,this,this);return this.qg.set(s,n),this.Ug.set(n,s),s},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Yr((t=Lr(t)).priceFormat);var i=$(Q(Hr),jr,t),n=this.Rg.ri().sw("Histogram",i),s=new Er(n,this,this);return this.qg.set(s,n),this.Ug.set(n,s),s},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Yr((t=Lr(t)).priceFormat);var i=$(Q(Hr),Vr,t),n=this.Rg.ri().sw("Line",i),s=new Er(n,this,this);return this.qg.set(s,n),this.Ug.set(n,s),s},t.prototype.removeSeries=function(t){var i=L(this.qg.get(t)),n=this.Hg.rw(i);this.Rg.ri().rw(i),this.ty(n),this.qg.delete(t),this.Ug.delete(i)},t.prototype.addLineTool=function(t,i,n){var s=$(Q(It[t]),n||{}),h=this.Rg.ri().ew(t,s,i);return new Br(h)},t.prototype.setActiveLineTool=function(t,i){this.Rg.ri().O_().Il(t,i)},t.prototype.removeLineToolsById=function(t){if(Array.isArray(t)){var i=this.iy();if(null===i)return;t.forEach((function(t){var n=i.qu(t);null!==n&&i.Ue(n)})),i.ro()}},t.prototype.getSelectedLineTools=function(){var t=[],i=this.iy();if(null===i)return JSON.stringify(t);var n=i.Uu();return n.length>0&&(t=n.map((function(t){return t.dh()}))),JSON.stringify(t)},t.prototype.removeSelectedLineTools=function(){var t=this.iy();if(null!==t){var i=t.Uu();i.length>0&&(i.forEach((function(i){t.Ue(i)})),t.ro())}},t.prototype.removeAllLineTools=function(){var t=this.iy();if(null!==t){var i=t.Hu();i.length>0&&(i.forEach((function(i){t.Ue(i)})),t.ro())}},t.prototype.exportLineTools=function(){var t=[],i=this.iy();if(null===i)return JSON.stringify(t);var n=i.Hu();return n.length>0&&(t=n.map((function(t){return t.dh()}))),JSON.stringify(t)},t.prototype.importLineTools=function(t){var i=this;if("undefined"===t||!t)return!1;JSON.parse(t).forEach((function(t){i.addLineTool(t.toolType,t.points,t.options).Og.Ui(t.id)}));var n=this.iy();return null!==n&&n.ro(),!0},t.prototype.applyLineToolOptions=function(t){var i=this.iy();if(null===i)return!1;var n=i.qu(t.id);return null!==n&&(n.Vs(t.points),new Br(n).applyOptions(t.options),!0)},t.prototype.Pg=function(t,i){this.ty(this.Hg.gg(t,i))},t.prototype.fo=function(t,i){this.ty(this.Hg.Ng(t,i))},t.prototype.subscribeClick=function(t){this.Yg.C(t)},t.prototype.unsubscribeClick=function(t){this.Yg.F(t)},t.prototype.subscribeCrosshairMove=function(t){this.Jg.C(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.Jg.F(t)},t.prototype.subscribeLineToolsDoubleClick=function(t){this.$g.C(t)},t.prototype.unsubscribeLineToolsDoubleClick=function(t){this.$g.F(t)},t.prototype.subscribeLineToolsAfterEdit=function(t){this.Kg.C(t)},t.prototype.unsubscribeLineToolsAfterEdit=function(t){this.Kg.F(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this.Rg.ri().Hl()),new qr(this.Rg,t)},t.prototype.timeScale=function(){return this.Qg},t.prototype.applyOptions=function(t){this.Rg.$s(Jr(t))},t.prototype.options=function(){return this.Rg.K()},t.prototype.takeScreenshot=function(){return this.Rg.Kp()},t.prototype.ty=function(t){var i=this.Rg.ri();i.tw(t.Rt.Nd,t.Rt.Ps,t.Rt.Eg),t.Fg.forEach((function(t,i){return i._t(t.Mh,t.Lg)})),i.Fd()},t.prototype.ny=function(t){return L(this.Ug.get(t))},t.prototype.iy=function(){return this.Rg.ri().D_()},t.prototype.Xg=function(t){var i=this,n=new Map;t.ug.forEach((function(t,s){n.set(i.ny(s),t)}));var s=void 0===t.eg?void 0:this.ny(t.eg);return{time:t.Ct&&(t.Ct.Bv||t.Ct.vs),point:t.rg,hoveredSeries:s,hoveredMarkerId:t.og,seriesPrices:n}},t.prototype.Zg=function(t){return{selectedLineTool:t.ag}},t.prototype.Gg=function(t){return{selectedLineTool:t.ag,stage:t.cg}},t}();var Kr=Object.freeze({__proto__:null,version:function(){return"3.8.0-dev+202409131107"},get LineStyle(){return n},get LineType(){return t},get TrackingModeExitMode(){return _h},get CrosshairMode(){return xt},get PriceScaleMode(){return ji},get PriceLineSource(){return ph},get LastPriceAnimationMode(){return mh},get LasPriceAnimationMode(){return mh},get BoxHorizontalAlignment(){return yh},get BoxVerticalAlignment(){return gh},get TickMarkType(){return fh},get ColorType(){return xh},get LineEnd(){return i},get TextAlignment(){return kh},isBusinessDay:Sh,isUTCTimestamp:Th,createChart:function(t,i){var n;if(Z(t)){var s=document.getElementById(t);F(null!==s,"Cannot find element in DOM with id=".concat(t)),n=s}else n=t;return new $r(n,i)}});window.LightweightCharts=Kr}();
